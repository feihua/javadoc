
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>5.Redis6.0 · 日常笔记</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="liufeihua">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-treeview/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../shardingsphere/" />
    
    
    <link rel="prev" href="源码分析.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../automation/">
            
                <a href="../../automation/">
            
                    
                    一、运维专题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../automation/git/">
            
                <a href="../../automation/git/">
            
                    
                    Git版本控制
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../automation/git/git-base-use.html">
            
                <a href="../../automation/git/git-base-use.html">
            
                    
                    1.Git基本概念与核心命令掌握
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../automation/maven/">
            
                <a href="../../automation/maven/">
            
                    
                    Maven依赖管理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../automation/maven/maven-base-use.html">
            
                <a href="../../automation/maven/maven-base-use.html">
            
                    
                    1.Maven基本使用 
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../automation/jenkins/">
            
                <a href="../../automation/jenkins/">
            
                    
                    Jenkins自动化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../automation/jenkins/springboot.html">
            
                <a href="../../automation/jenkins/springboot.html">
            
                    
                    1.jenkins启动springboot的脚本
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../automation/k8s/">
            
                <a href="../../automation/k8s/">
            
                    
                    K8s服务编排
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="../../automation/k8s/install.html">
            
                <a href="../../automation/k8s/install.html">
            
                    
                    K8s安装
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1.1" data-path="../../automation/k8s/kubeadm-install-one.html">
            
                <a href="../../automation/k8s/kubeadm-install-one.html">
            
                    
                    1.部署一个K8s集群
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.1.2" data-path="../../automation/k8s/kubeadm-install-all.html">
            
                <a href="../../automation/k8s/kubeadm-install-all.html">
            
                    
                    2.搭建高可用的K8s集群
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="../../automation/k8s/cmd.html">
            
                <a href="../../automation/k8s/cmd.html">
            
                    
                    1.K8s相关命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="../../automation/k8s/Kubernetes-deployment.html">
            
                <a href="../../automation/k8s/Kubernetes-deployment.html">
            
                    
                    2.K8s部署应用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="../../automation/k8s/Ingress.html">
            
                <a href="../../automation/k8s/Ingress.html">
            
                    
                    3.Ingress暴露应用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../automation/ServiceMesh/">
            
                <a href="../../automation/ServiceMesh/">
            
                    
                    ServiceMesh服务网格
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="../../automation/ServiceMesh/base.html">
            
                <a href="../../automation/ServiceMesh/base.html">
            
                    
                    1.ServiceMesh介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="../../automation/ServiceMesh/use.html">
            
                <a href="../../automation/ServiceMesh/use.html">
            
                    
                    2.Istio进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="../../automation/ServiceMesh/high.html">
            
                <a href="../../automation/ServiceMesh/high.html">
            
                    
                    3.Istio实战
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../source/">
            
                <a href="../../source/">
            
                    
                    二、源码专题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../source/mybatis/">
            
                <a href="../../source/mybatis/">
            
                    
                    mybatis持久层框架
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../source/mybatis/base-use.html">
            
                <a href="../../source/mybatis/base-use.html">
            
                    
                    1.基本使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../source/mybatis/analysis.html">
            
                <a href="../../source/mybatis/analysis.html">
            
                    
                    2源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../../source/mybatis/mybatis-source.html">
            
                <a href="../../source/mybatis/mybatis-source.html">
            
                    
                    3.mybatis源码剖析-黑马
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../source/spring/">
            
                <a href="../../source/spring/">
            
                    
                    spring应用程序框架
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../source/spring/ioc.html">
            
                <a href="../../source/spring/ioc.html">
            
                    
                    1.IOC容器与源码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../source/spring/aop.html">
            
                <a href="../../source/spring/aop.html">
            
                    
                    2.AOP事物原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../../source/spring/mvc.html">
            
                <a href="../../source/spring/mvc.html">
            
                    
                    3.SpringMvc原理解析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../concurrent/">
            
                <a href="../../concurrent/">
            
                    
                    三、并发专题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../concurrent/executor.html">
            
                <a href="../../concurrent/executor.html">
            
                    
                    1.Executor线程池详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../../concurrent/JMM&Lock&Tools.html">
            
                <a href="../../concurrent/JMM&Lock&Tools.html">
            
                    
                    2.JMM&Lock&Tools详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../../concurrent/atomic&collections.html">
            
                <a href="../../concurrent/atomic&collections.html">
            
                    
                    3.atomic&collections详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../../concurrent/Fork-join.html">
            
                <a href="../../concurrent/Fork-join.html">
            
                    
                    4.Fork-join详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../../concurrent/BlockingQueue.html">
            
                <a href="../../concurrent/BlockingQueue.html">
            
                    
                    5.BlockingQueue详解
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../performance/">
            
                <a href="../../performance/">
            
                    
                    四、调优专题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../performance/jvm/">
            
                <a href="../../performance/jvm/">
            
                    
                    jvm内存调优
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../../performance/jvm/base.html">
            
                <a href="../../performance/jvm/base.html">
            
                    
                    1.整体结构介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.2" data-path="../../performance/jvm/view.html">
            
                <a href="../../performance/jvm/view.html">
            
                    
                    2.性能调优监控工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.1.3" data-path="../../performance/jvm/gc.html">
            
                <a href="../../performance/jvm/gc.html">
            
                    
                    3.垃圾回收与调优
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../performance/mysql/">
            
                <a href="../../performance/mysql/">
            
                    
                    mysql关糸型数据库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../../performance/mysql/use.html">
            
                <a href="../../performance/mysql/use.html">
            
                    
                    1.Mysql基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.2" data-path="../../performance/mysql/high-use.html">
            
                <a href="../../performance/mysql/high-use.html">
            
                    
                    2.Mysql性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.3" data-path="../../performance/mysql/mysql-index.html">
            
                <a href="../../performance/mysql/mysql-index.html">
            
                    
                    3.索引底层数据结构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.4" data-path="../../performance/mysql/Explain.html">
            
                <a href="../../performance/mysql/Explain.html">
            
                    
                    4.Explain详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.5" data-path="../../performance/mysql/high-index.html">
            
                <a href="../../performance/mysql/high-index.html">
            
                    
                    5.索引优化深入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2.6" data-path="../../performance/mysql/acid.html">
            
                <a href="../../performance/mysql/acid.html">
            
                    
                    6.Mysql锁与事务
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../performance/nginx/">
            
                <a href="../../performance/nginx/">
            
                    
                    nginx反向代理
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.1" data-path="../../performance/nginx/Nginx-config.html">
            
                <a href="../../performance/nginx/Nginx-config.html">
            
                    
                    1.Nginx核心模块与配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.2" data-path="../../performance/nginx/Nginx-In-actual-combat.html">
            
                <a href="../../performance/nginx/Nginx-In-actual-combat.html">
            
                    
                    2.Nginx性能优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3" data-path="../../performance/nginx/Nginx_day00.html">
            
                <a href="../../performance/nginx/Nginx_day00.html">
            
                    
                    Nginx-黑马
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.3.3.1" data-path="../../performance/nginx/Nginx_day01.html">
            
                <a href="../../performance/nginx/Nginx_day01.html">
            
                    
                    1.基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3.2" data-path="../../performance/nginx/Nginx_day02.html">
            
                <a href="../../performance/nginx/Nginx_day02.html">
            
                    
                    2.进阶篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3.3" data-path="../../performance/nginx/Nginx_day03.html">
            
                <a href="../../performance/nginx/Nginx_day03.html">
            
                    
                    3.Rewrite功能配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3.4" data-path="../../performance/nginx/Nginx_day04.html">
            
                <a href="../../performance/nginx/Nginx_day04.html">
            
                    
                    4.负载均衡
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3.3.5" data-path="../../performance/nginx/Nginx_day05.html">
            
                <a href="../../performance/nginx/Nginx_day05.html">
            
                    
                    5.集群搭建
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../../performance/tomcat/">
            
                <a href="../../performance/tomcat/">
            
                    
                    tomcat-Servlet容器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.4.1" data-path="../../performance/tomcat/Tomcat-pro-use.html">
            
                <a href="../../performance/tomcat/Tomcat-pro-use.html">
            
                    
                    1.Tomcat生产环境应用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../">
            
                <a href="../">
            
                    
                    五、分布式专题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../zookeeper/">
            
                <a href="../zookeeper/">
            
                    
                    zookeeper协调框架
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../zookeeper/zookeeper-base-use.html">
            
                <a href="../zookeeper/zookeeper-base-use.html">
            
                    
                    1.特性与节点说明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../zookeeper/zookeeper-client-use.html">
            
                <a href="../zookeeper/zookeeper-client-use.html">
            
                    
                    2.客户端使用与集群特性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.3" data-path="../zookeeper/zookeeper-sence-use.html">
            
                <a href="../zookeeper/zookeeper-sence-use.html">
            
                    
                    3.典型使用场景实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.4" data-path="../zookeeper/zookeeper-zab.html">
            
                <a href="../zookeeper/zookeeper-zab.html">
            
                    
                    4.ZAB协议实现源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../netty/">
            
                <a href="../netty/">
            
                    
                    netty网络框架
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.1" data-path="../netty/netty.html">
            
                <a href="../netty/netty.html">
            
                    
                    1.分布式之netty
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2" data-path="../netty/Netty00.html">
            
                <a href="../netty/Netty00.html">
            
                    
                    Netty-黑马
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.2.2.1" data-path="../netty/Netty01-nio.html">
            
                <a href="../netty/Netty01-nio.html">
            
                    
                    Netty01-nio
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2.2" data-path="../netty/Netty02_use.html">
            
                <a href="../netty/Netty02_use.html">
            
                    
                    Netty02-入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2.3" data-path="../netty/Netty03-high.html">
            
                <a href="../netty/Netty03-high.html">
            
                    
                    Netty03-进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2.2.4" data-path="../netty/Netty04-source.html">
            
                <a href="../netty/Netty04-source.html">
            
                    
                    Netty04-优化与源码
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../dubbo/">
            
                <a href="../dubbo/">
            
                    
                    dubbo远程调用
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.3.1" data-path="../dubbo/dubbo-introduce.html">
            
                <a href="../dubbo/dubbo-introduce.html">
            
                    
                    1.从0到1整体认知分布式系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.2" data-path="../dubbo/dubbo-base-use.html">
            
                <a href="../dubbo/dubbo-base-use.html">
            
                    
                    2.快速掌握Dubbo常规应用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.3" data-path="../dubbo/dubbo-high-use.html">
            
                <a href="../dubbo/dubbo-high-use.html">
            
                    
                    3.Dubbo企业级应用进阶
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.4" data-path="../dubbo/dubbo-module-detail.html">
            
                <a href="../dubbo/dubbo-module-detail.html">
            
                    
                    2.Dubb调用模块详解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3.5" data-path="../dubbo/dubbo-proto-detail.html">
            
                <a href="../dubbo/dubbo-proto-detail.html">
            
                    
                    3.Dubbo协议模块源码剖析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../rocketmq/">
            
                <a href="../rocketmq/">
            
                    
                    rocketmq消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.4.1" data-path="../rocketmq/初识消息中间件.html">
            
                <a href="../rocketmq/初识消息中间件.html">
            
                    
                    1.初识消息中间件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.2" data-path="../rocketmq/特性详解&场景介绍.html">
            
                <a href="../rocketmq/特性详解&场景介绍.html">
            
                    
                    2.特性详解&场景介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4.3" data-path="../rocketmq/源码分析.html">
            
                <a href="../rocketmq/源码分析.html">
            
                    
                    3.源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../rabbitmq/">
            
                <a href="../rabbitmq/">
            
                    
                    rabbitmq消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.5.1" data-path="../rabbitmq/1_JVM整体结构介绍.md">
            
                <span>
            
                    
                    1.JVM整体结构介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.2" data-path="../rabbitmq/2_JVM性能调优监控工具.md">
            
                <span>
            
                    
                    2.JVM性能调优监控工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5.3" data-path="../rabbitmq/3_JVM垃圾回收与调优.md">
            
                <span>
            
                    
                    3.JVM垃圾回收与调优
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../kafka/">
            
                <a href="../kafka/">
            
                    
                    kafka消息中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.6.1" data-path="../kafka/kafka.html">
            
                <a href="../kafka/kafka.html">
            
                    
                    1.kafka消息中间件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../mongo/">
            
                <a href="../mongo/">
            
                    
                    mongo文档数据库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.7.1" data-path="../mongo/mongoDb-data.html">
            
                <a href="../mongo/mongoDb-data.html">
            
                    
                    1.准备数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7.2" data-path="../mongo/mongoDb-quick-start.html">
            
                <a href="../mongo/mongoDb-quick-start.html">
            
                    
                    2.快速上手
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7.3" data-path="../mongo/mongoDb-enterprise.html">
            
                <a href="../mongo/mongoDb-enterprise.html">
            
                    
                    3.企业应用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="./">
            
                <a href="./">
            
                    
                    redis缓存
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.8.1" data-path="特性介绍.html">
            
                <a href="特性介绍.html">
            
                    
                    1.特性介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.2" data-path="集群部署.html">
            
                <a href="集群部署.html">
            
                    
                    2.集群部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.3" data-path="原理分析.html">
            
                <a href="原理分析.html">
            
                    
                    3.原理分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8.4" data-path="源码分析.html">
            
                <a href="源码分析.html">
            
                    
                    4.源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.8.5" data-path="redis6.html">
            
                <a href="redis6.html">
            
                    
                    5.Redis6.0
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="../shardingsphere/">
            
                <a href="../shardingsphere/">
            
                    
                    shardingsphere中间件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.9.1" data-path="../shardingsphere/概述.html">
            
                <a href="../shardingsphere/概述.html">
            
                    
                    1.概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9.2" data-path="../shardingsphere/核心概念.html">
            
                <a href="../shardingsphere/核心概念.html">
            
                    
                    2.核心概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6.10" data-path="../elk/">
            
                <a href="../elk/">
            
                    
                    elk日志监控
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.10.1" data-path="../elk/elk.html">
            
                <a href="../elk/elk.html">
            
                    
                    1.分布式之ELK
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../micro/">
            
                <a href="../../micro/">
            
                    
                    六、微服务专题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../micro/springboot-index.html">
            
                <a href="../../micro/springboot-index.html">
            
                    
                    springboot
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1.1" data-path="../../micro/fast.html">
            
                <a href="../../micro/fast.html">
            
                    
                    1.快速开始
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.2" data-path="../../micro/tomcat.html">
            
                <a href="../../micro/tomcat.html">
            
                    
                    2.Springboot启动Tomcat热身
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.3" data-path="../../micro/springboot-auto.html">
            
                <a href="../../micro/springboot-auto.html">
            
                    
                    3.springboot自动装配原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.4" data-path="../../micro/Springboot-source.html">
            
                <a href="../../micro/Springboot-source.html">
            
                    
                    4.SpringBoot源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../micro/netflix-index.html">
            
                <a href="../../micro/netflix-index.html">
            
                    
                    springcloud-netflix
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="../../micro/Eureka-source.html">
            
                <a href="../../micro/Eureka-source.html">
            
                    
                    5.Eureka源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.2" data-path="../../micro/1_JVM整体结构介绍.md">
            
                <span>
            
                    
                    6.Ribbon&Feign介绍及使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.3" data-path="../../micro/2_JVM性能调优监控工具.md">
            
                <span>
            
                    
                    7.Ribbon&Feign源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.4" data-path="../../micro/3_JVM垃圾回收与调优.md">
            
                <span>
            
                    
                    8.Hystrix限流降级熔断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.5" data-path="../../micro/1_JVM整体结构介绍.md">
            
                <span>
            
                    
                    9.网关zuul
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.6" data-path="../../micro/Hystrix-source.html">
            
                <a href="../../micro/Hystrix-source.html">
            
                    
                    10.Hystrix&Zuul源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.7" data-path="../../micro/2_JVM性能调优监控工具.md">
            
                <span>
            
                    
                    12.配置中心Config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.8" data-path="../../micro/3_JVM垃圾回收与调优.md">
            
                <span>
            
                    
                    13.链路跟踪Sleuth
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../../micro/alibaba-index.html">
            
                <a href="../../micro/alibaba-index.html">
            
                    
                    springcloud-alibaba
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1" data-path="../../micro/Eureka-source.html">
            
                <a href="../../micro/Eureka-source.html">
            
                    
                    5.Eureka源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.2" data-path="../../micro/1_JVM整体结构介绍.md">
            
                <span>
            
                    
                    6.Ribbon&Feign介绍及使用
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.3" data-path="../../micro/2_JVM性能调优监控工具.md">
            
                <span>
            
                    
                    7.Ribbon&Feign源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.4" data-path="../../micro/3_JVM垃圾回收与调优.md">
            
                <span>
            
                    
                    8.Hystrix限流降级熔断
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.5" data-path="../../micro/1_JVM整体结构介绍.md">
            
                <span>
            
                    
                    9.网关zuul
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.6" data-path="../../micro/Hystrix-source.html">
            
                <a href="../../micro/Hystrix-source.html">
            
                    
                    10.Hystrix&Zuul源码分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.7" data-path="../../micro/2_JVM性能调优监控工具.md">
            
                <span>
            
                    
                    12.配置中心Config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.8" data-path="../../micro/3_JVM垃圾回收与调优.md">
            
                <span>
            
                    
                    13.链路跟踪Sleuth
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../../micro/docker-index.html">
            
                <a href="../../micro/docker-index.html">
            
                    
                    docker
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.1" data-path="../../micro/docker.html">
            
                <a href="../../micro/docker.html">
            
                    
                    14.Docker快速入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.2" data-path="../../micro/Docker-Compose.html">
            
                <a href="../../micro/Docker-Compose.html">
            
                    
                    15.DockerCompose微服务编排
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.3" data-path="../../micro/SpringCloudDocker.html">
            
                <a href="../../micro/SpringCloudDocker.html">
            
                    
                    16.Docker整体编排SpringCloud
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../project/">
            
                <a href="../../project/">
            
                    
                    七、项目实战专题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../../project/SystemArchitecture.html">
            
                <a href="../../project/SystemArchitecture.html">
            
                    
                    1.系统架构
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../../project/member.html">
            
                <a href="../../project/member.html">
            
                    
                    2.商品&会员模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../../project/order.html">
            
                <a href="../../project/order.html">
            
                    
                    3.交易&营销模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../../project/pay.html">
            
                <a href="../../project/pay.html">
            
                    
                    4.支付模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="../../project/Depots-table-1.html">
            
                <a href="../../project/Depots-table-1.html">
            
                    
                    5.分库分表一
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="../../project/Depots-table-2.html">
            
                <a href="../../project/Depots-table-2.html">
            
                    
                    6.分库分表二
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >5.Redis6.0</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div class="treeview__container"><div class="treeview__container-title"><span class="treeview__main-title">Treeview</span><span class="treeview__copyright">Copyright &#xA9; aleen42 all right reserved, powered by <a href="https://github.com/aleen42" target="_blank">aleen42</a></span></div><ul>
<li><div><a href="#1nosql&#x6570;&#x636E;&#x5E93;&#x7B80;&#x4ECB;">1.NoSQL&#x6570;&#x636E;&#x5E93;&#x7B80;&#x4ECB;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#11&#x6280;&#x672F;&#x53D1;&#x5C55;">1.1&#x6280;&#x672F;&#x53D1;&#x5C55;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#111web10&#x65F6;&#x4EE3;">1.1.1Web1.0&#x65F6;&#x4EE3;</a><i></i></div></li>
<li><div><a href="#112web20&#x65F6;&#x4EE3;">1.1.2Web2.0&#x65F6;&#x4EE3;</a><i></i></div></li>
<li><div><a href="#113&#x89E3;&#x51B3;cpu&#x53CA;&#x5185;&#x5B58;&#x538B;&#x529B;">1.1.3&#x89E3;&#x51B3;CPU&#x53CA;&#x5185;&#x5B58;&#x538B;&#x529B;</a><i></i></div></li>
<li><div><a href="#114&#x89E3;&#x51B3;io&#x538B;&#x529B;">1.1.4&#x89E3;&#x51B3;IO&#x538B;&#x529B;</a><i></i></div></li>
</ul></li>
<li><div><a href="#12nosql&#x6570;&#x636E;&#x5E93;">1.2NoSQL&#x6570;&#x636E;&#x5E93;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#121nosql&#x6570;&#x636E;&#x5E93;&#x6982;&#x8FF0;">1.2.1NoSQL&#x6570;&#x636E;&#x5E93;&#x6982;&#x8FF0;</a><i></i></div></li>
<li><div><a href="#122nosql&#x9002;&#x7528;&#x573A;&#x666F;">1.2.2NoSQL&#x9002;&#x7528;&#x573A;&#x666F;</a><i></i></div></li>
<li><div><a href="#123nosql&#x4E0D;&#x9002;&#x7528;&#x573A;&#x666F;">1.2.3NoSQL&#x4E0D;&#x9002;&#x7528;&#x573A;&#x666F;</a><i></i></div></li>
<li><div><a href="#124memcache">1.2.4Memcache</a><i></i></div></li>
<li><div><a href="#125redis">1.2.5Redis</a><i></i></div></li>
<li><div><a href="#126mongodb">1.2.6MongoDB</a><i></i></div></li>
</ul></li>
<li><div><a href="#13&#x884C;&#x5F0F;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x5E93;&#xFF08;&#x5927;&#x6570;&#x636E;&#x65F6;&#x4EE3;&#xFF09;">1.3&#x884C;&#x5F0F;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x5E93;&#xFF08;&#x5927;&#x6570;&#x636E;&#x65F6;&#x4EE3;&#xFF09;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#131&#x884C;&#x5F0F;&#x6570;&#x636E;&#x5E93;">1.3.1&#x884C;&#x5F0F;&#x6570;&#x636E;&#x5E93;</a><i></i></div></li>
<li><div><a href="#132&#x5217;&#x5F0F;&#x6570;&#x636E;&#x5E93;">1.3.2&#x5217;&#x5F0F;&#x6570;&#x636E;&#x5E93;</a><i></i></div></li>
</ul></li>
<li><div><a href="#14&#x56FE;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;">1.4&#x56FE;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;</a><i></i></div></li>
<li><div><a href="#15db-engines-&#x6570;&#x636E;&#x5E93;&#x6392;&#x540D;">1.5DB-Engines &#x6570;&#x636E;&#x5E93;&#x6392;&#x540D;</a><i></i></div></li>
</ul></li>
<li><div><a href="#2redis&#x6982;&#x8FF0;&#x5B89;&#x88C5;">2.Redis&#x6982;&#x8FF0;&#x5B89;&#x88C5;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#21&#x5E94;&#x7528;&#x573A;&#x666F;">2.1&#x5E94;&#x7528;&#x573A;&#x666F;</a><i></i></div></li>
<li><div><a href="#22redis&#x5B89;&#x88C5;">2.2Redis&#x5B89;&#x88C5;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#221&#x5B89;&#x88C5;&#x7248;&#x672C;">2.2.1&#x5B89;&#x88C5;&#x7248;&#x672C;</a><i></i></div></li>
<li><div><a href="#222&#x5B89;&#x88C5;&#x6B65;&#x9AA4;">2.2.2&#x5B89;&#x88C5;&#x6B65;&#x9AA4;</a><i></i></div></li>
<li><div><a href="#223&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF1A;usrlocalbin">2.2.3&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF1A;/usr/local/bin</a><i></i></div></li>
<li><div><a href="#224&#x524D;&#x53F0;&#x542F;&#x52A8;&#xFF08;&#x4E0D;&#x63A8;&#x8350;&#xFF09;">2.2.4&#x524D;&#x53F0;&#x542F;&#x52A8;&#xFF08;&#x4E0D;&#x63A8;&#x8350;&#xFF09;</a><i></i></div></li>
<li><div><a href="#225&#x540E;&#x53F0;&#x542F;&#x52A8;&#xFF08;&#x63A8;&#x8350;&#xFF09;">2.2.5&#x540E;&#x53F0;&#x542F;&#x52A8;&#xFF08;&#x63A8;&#x8350;&#xFF09;</a><i></i></div></li>
</ul></li>
</ul></li>
<li><div><a href="#3&#x5E38;&#x7528;&#x4E94;&#x5927;&#x6570;&#x636E;&#x7C7B;&#x578B;">3.&#x5E38;&#x7528;&#x4E94;&#x5927;&#x6570;&#x636E;&#x7C7B;&#x578B;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#31redis&#x952E;key">3.1Redis&#x952E;(key)</a><i></i></div></li>
<li><div><a href="#32redis&#x5B57;&#x7B26;&#x4E32;string">3.2Redis&#x5B57;&#x7B26;&#x4E32;(String)</a><i></i></div></li>
<li><div><a href="#33redis&#x5217;&#x8868;list">3.3Redis&#x5217;&#x8868;(List)</a><i></i></div></li>
<li><div><a href="#34redis&#x96C6;&#x5408;set">3.4Redis&#x96C6;&#x5408;(Set)</a><i></i></div></li>
<li><div><a href="#35redis&#x54C8;&#x5E0C;hash">3.5Redis&#x54C8;&#x5E0C;(Hash)</a><i></i></div></li>
<li><div><a href="#36redis&#x6709;&#x5E8F;&#x96C6;&#x5408;zsetsorted-set">3.6Redis&#x6709;&#x5E8F;&#x96C6;&#x5408;Zset(sorted set)</a><i></i></div></li>
</ul></li>
<li><div><a href="#4redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECB;&#x7ECD;">4.Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECB;&#x7ECD;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li> 
<ul>
<li><div><a href="#units&#x5355;&#x4F4D;">Units&#x5355;&#x4F4D;###</a><i></i></div></li>
<li><div><a href="#includes&#x5305;&#x542B;">INCLUDES&#x5305;&#x542B;###</a><i></i></div></li>
<li><div><a href="#&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E;-">&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E; ###</a><i></i></div></li>
<li><div><a href="#general&#x901A;&#x7528;">GENERAL&#x901A;&#x7528;###</a><i></i></div></li>
<li><div><a href="#security&#x5B89;&#x5168;">SECURITY&#x5B89;&#x5168;###</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#"></a></div></li>
</ul></li>
</ul></li>
</ul></li>
<li><a href="#5redis&#x7684;&#x53D1;&#x5E03;&#x548C;&#x8BA2;&#x9605;">5.Redis&#x7684;&#x53D1;&#x5E03;&#x548C;&#x8BA2;&#x9605;</a><i></i></li></ul></div>
<li><div><a href="#6redis&#x65B0;&#x6570;&#x636E;&#x7C7B;&#x578B;">6.Redis&#x65B0;&#x6570;&#x636E;&#x7C7B;&#x578B;</a><i></i></div></li>
<li><div><a href="#7redisjedis&#x6D4B;&#x8BD5;">7.Redis_Jedis_&#x6D4B;&#x8BD5;</a><i></i></div></li>
<li><div><a href="#8redisjedis&#x5B9E;&#x4F8B;">8.Redis_Jedis_&#x5B9E;&#x4F8B;</a><i></i></div></li>
<li><div><a href="#9redis&#x4E0E;spring-boot&#x6574;&#x5408;">9.Redis&#x4E0E;Spring Boot&#x6574;&#x5408;</a><i></i></div></li>
<li><div><a href="#10redis&#x4E8B;&#x52A1;&#x9501;&#x673A;&#x5236;&#x79D2;&#x6740;">10.Redis_&#x4E8B;&#x52A1;<em>&#x9501;&#x673A;&#x5236;</em>&#x79D2;&#x6740;</a><i></i></div></li>
<li><div><a href="#11redis&#x4E8B;&#x52A1;&#x79D2;&#x6740;&#x6848;&#x4F8B;">11.Redis_&#x4E8B;&#x52A1;_&#x79D2;&#x6740;&#x6848;&#x4F8B;</a><i></i></div></li>
<li><div><a href="#12redis&#x6301;&#x4E45;&#x5316;&#x4E4B;rdb">12.Redis&#x6301;&#x4E45;&#x5316;&#x4E4B;RDB</a><i></i></div>
<ul>
<li> 
<ul>
<li><div><a href="#snapshotting&#x5FEB;&#x7167;">SNAPSHOTTING&#x5FEB;&#x7167;###</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div></li>
</ul></li>
</ul></li>
<li><div><a href="#13redis&#x6301;&#x4E45;&#x5316;&#x4E4B;aof">13.Redis&#x6301;&#x4E45;&#x5316;&#x4E4B;AOF</a><i></i></div></li>
<li><div><a href="#14redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;">14.Redis_&#x4E3B;&#x4ECE;&#x590D;&#x5236;</a><i></i></div></li>
<li><div><a href="#15redis&#x96C6;&#x7FA4;">15.Redis&#x96C6;&#x7FA4;</a><i></i></div></li>
<li><div><a href="#16redis&#x5E94;&#x7528;&#x95EE;&#x9898;&#x89E3;&#x51B3;">16.Redis&#x5E94;&#x7528;&#x95EE;&#x9898;&#x89E3;&#x51B3;</a><i></i></div>
<ul>
<li><div><a href="#161&#x7F13;&#x5B58;&#x7A7F;&#x900F;">16.1&#x7F13;&#x5B58;&#x7A7F;&#x900F;</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div></li>
<li><div><a href="#172&#x7F13;&#x5B58;&#x51FB;&#x7A7F;">17.2&#x7F13;&#x5B58;&#x51FB;&#x7A7F;</a><i></i></div></li>
<li><div><a href="#173&#x7F13;&#x5B58;&#x96EA;&#x5D29;">17.3&#x7F13;&#x5B58;&#x96EA;&#x5D29;</a><i></i></div></li>
<li><div><a href="#174&#x5206;&#x5E03;&#x5F0F;&#x9501;">17.4&#x5206;&#x5E03;&#x5F0F;&#x9501;</a><i></i></div></li>
</ul></li>
<li><div><a href="#17redis60&#x65B0;&#x529F;&#x80FD;">17.Redis6.0&#x65B0;&#x529F;&#x80FD;</a><i></i></div>
<ul>
<li><div><a href="#171acl">17.1ACL</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div></li>
<li><div><a href="#172io&#x591A;&#x7EBF;&#x7A0B;">17.2IO&#x591A;&#x7EBF;&#x7A0B;</a><i></i></div></li>
</ul></li>



<p>&#x6846;&#x67B6;&#x9AD8;&#x7EA7;&#x8BFE;&#x7A0B;&#x7CFB;&#x5217;&#x4E4B;Redis6</p>
<p>&#x5C1A;&#x7845;&#x8C37;JavaEE&#x6559;&#x7814;&#x7EC4;</p>
<h1 id="1nosql&#x6570;&#x636E;&#x5E93;&#x7B80;&#x4ECB;">1.NoSQL&#x6570;&#x636E;&#x5E93;&#x7B80;&#x4ECB;</h1>
<h2 id="11&#x6280;&#x672F;&#x53D1;&#x5C55;">1.1&#x6280;&#x672F;&#x53D1;&#x5C55;</h2>
<p>&#x6280;&#x672F;&#x7684;&#x5206;&#x7C7B;</p>
<p>1&#x3001;&#x89E3;&#x51B3;&#x529F;&#x80FD;&#x6027;&#x7684;&#x95EE;&#x9898;&#xFF1A;Java&#x3001;Jsp&#x3001;RDBMS&#x3001;Tomcat&#x3001;HTML&#x3001;Linux&#x3001;JDBC&#x3001;SVN</p>
<p>2&#x3001;&#x89E3;&#x51B3;&#x6269;&#x5C55;&#x6027;&#x7684;&#x95EE;&#x9898;&#xFF1A;Struts&#x3001;Spring&#x3001;SpringMVC&#x3001;Hibernate&#x3001;Mybatis</p>
<p>3&#x3001;&#x89E3;&#x51B3;&#x6027;&#x80FD;&#x7684;&#x95EE;&#x9898;&#xFF1A;NoSQL&#x3001;Java&#x7EBF;&#x7A0B;&#x3001;Hadoop&#x3001;Nginx&#x3001;MQ&#x3001;ElasticSearch</p>
<h3 id="111web10&#x65F6;&#x4EE3;">1.1.1Web1.0&#x65F6;&#x4EE3;</h3>
<p>Web1.0&#x7684;&#x65F6;&#x4EE3;&#xFF0C;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x91CF;&#x5F88;&#x6709;&#x9650;&#xFF0C;&#x7528;&#x4E00;&#x592B;&#x5F53;&#x5173;&#x7684;&#x9AD8;&#x6027;&#x80FD;&#x7684;&#x5355;&#x70B9;&#x670D;&#x52A1;&#x5668;&#x53EF;&#x4EE5;&#x89E3;&#x51B3;&#x5927;&#x90E8;&#x5206;&#x95EE;&#x9898;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/nsZCph8AcRp4AFjl.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="112web20&#x65F6;&#x4EE3;">1.1.2Web2.0&#x65F6;&#x4EE3;</h3>
<p>&#x968F;&#x7740;Web2.0&#x7684;&#x65F6;&#x4EE3;&#x7684;&#x5230;&#x6765;&#xFF0C;&#x7528;&#x6237;&#x8BBF;&#x95EE;&#x91CF;&#x5927;&#x5E45;&#x5EA6;&#x63D0;&#x5347;&#xFF0C;&#x540C;&#x65F6;&#x4EA7;&#x751F;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x7528;&#x6237;&#x6570;&#x636E;&#x3002;&#x52A0;&#x4E0A;&#x540E;&#x6765;&#x7684;&#x667A;&#x80FD;&#x79FB;&#x52A8;&#x8BBE;&#x5907;&#x7684;&#x666E;&#x53CA;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x4E92;&#x8054;&#x7F51;&#x5E73;&#x53F0;&#x90FD;&#x9762;&#x4E34;&#x4E86;&#x5DE8;&#x5927;&#x7684;&#x6027;&#x80FD;&#x6311;&#x6218;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/AcxxhVM12EPG7GB1.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="113&#x89E3;&#x51B3;cpu&#x53CA;&#x5185;&#x5B58;&#x538B;&#x529B;">1.1.3&#x89E3;&#x51B3;CPU&#x53CA;&#x5185;&#x5B58;&#x538B;&#x529B;</h3>
<p><img src="https://uploader.shimo.im/f/JuFOHmsC8LAvuBro.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="114&#x89E3;&#x51B3;io&#x538B;&#x529B;">1.1.4&#x89E3;&#x51B3;IO&#x538B;&#x529B;</h3>
<p><img src="https://uploader.shimo.im/f/dVJPNpZUEifp8Dsw.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h2 id="12nosql&#x6570;&#x636E;&#x5E93;">1.2NoSQL&#x6570;&#x636E;&#x5E93;</h2>
<h3 id="121nosql&#x6570;&#x636E;&#x5E93;&#x6982;&#x8FF0;">1.2.1NoSQL&#x6570;&#x636E;&#x5E93;&#x6982;&#x8FF0;</h3>
<p>NoSQL(NoSQL = Not Only SQL )&#xFF0C;&#x610F;&#x5373;&#x201C;&#x4E0D;&#x4EC5;&#x4EC5;&#x662F;SQL&#x201D;&#xFF0C;&#x6CDB;&#x6307;&#x975E;&#x5173;&#x7CFB;&#x578B;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<p>NoSQL &#x4E0D;&#x4F9D;&#x8D56;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x65B9;&#x5F0F;&#x5B58;&#x50A8;&#xFF0C;&#x800C;&#x4EE5;&#x7B80;&#x5355;&#x7684;key-value&#x6A21;&#x5F0F;&#x5B58;&#x50A8;&#x3002;&#x56E0;&#x6B64;&#x5927;&#x5927;&#x7684;&#x589E;&#x52A0;&#x4E86;&#x6570;&#x636E;&#x5E93;&#x7684;&#x6269;&#x5C55;&#x80FD;&#x529B;&#x3002;</p>
<p>&#x4E0D;&#x9075;&#x5FAA;SQL&#x6807;&#x51C6;&#x3002;</p>
<p>&#x4E0D;&#x652F;&#x6301;ACID&#x3002;</p>
<p>&#x8FDC;&#x8D85;&#x4E8E;SQL&#x7684;&#x6027;&#x80FD;&#x3002;</p>
<h3 id="122nosql&#x9002;&#x7528;&#x573A;&#x666F;">1.2.2NoSQL&#x9002;&#x7528;&#x573A;&#x666F;</h3>
<p>&#x5BF9;&#x6570;&#x636E;&#x9AD8;&#x5E76;&#x53D1;&#x7684;&#x8BFB;&#x5199;</p>
<p>&#x6D77;&#x91CF;&#x6570;&#x636E;&#x7684;&#x8BFB;&#x5199;</p>
<p>&#x5BF9;&#x6570;&#x636E;&#x9AD8;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x7684;</p>
<h3 id="123nosql&#x4E0D;&#x9002;&#x7528;&#x573A;&#x666F;">1.2.3NoSQL&#x4E0D;&#x9002;&#x7528;&#x573A;&#x666F;</h3>
<p>&#x9700;&#x8981;&#x4E8B;&#x52A1;&#x652F;&#x6301;</p>
<p>&#x57FA;&#x4E8E;sql&#x7684;&#x7ED3;&#x6784;&#x5316;&#x67E5;&#x8BE2;&#x5B58;&#x50A8;&#xFF0C;&#x5904;&#x7406;&#x590D;&#x6742;&#x7684;&#x5173;&#x7CFB;,&#x9700;&#x8981;&#x5373;&#x5E2D;&#x67E5;&#x8BE2;&#x3002;</p>
<p>&#xFF08;&#x7528;&#x4E0D;&#x7740;sql&#x7684;&#x548C;&#x7528;&#x4E86;sql&#x4E5F;&#x4E0D;&#x884C;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x8BF7;&#x8003;&#x8651;&#x7528;NoSql&#xFF09;</p>
<h3 id="124memcache">1.2.4Memcache</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><img src="https://uploader.shimo.im/f/QbOKvP6mP5IXJXBj.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></th>
<th style="text-align:left">&#x5F88;&#x65E9;&#x51FA;&#x73B0;&#x7684;NoSql&#x6570;&#x636E;&#x5E93;<br>&#x6570;&#x636E;&#x90FD;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x4E00;&#x822C;&#x4E0D;&#x6301;&#x4E45;&#x5316;<br>&#x652F;&#x6301;&#x7B80;&#x5355;&#x7684;key-value&#x6A21;&#x5F0F;&#xFF0C;&#x652F;&#x6301;&#x7C7B;&#x578B;&#x5355;&#x4E00;<br>&#x4E00;&#x822C;&#x662F;&#x4F5C;&#x4E3A;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x5E93;&#x8F85;&#x52A9;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6570;&#x636E;&#x5E93;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h3 id="125redis">1.2.5Redis</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><img src="https://uploader.shimo.im/f/AstrRcGoqnl2EbdS.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></th>
<th style="text-align:left">&#x51E0;&#x4E4E;&#x8986;&#x76D6;&#x4E86;Memcached&#x7684;&#x7EDD;&#x5927;&#x90E8;&#x5206;&#x529F;&#x80FD;<br>&#x6570;&#x636E;&#x90FD;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x652F;&#x6301;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4F5C;&#x5907;&#x4EFD;&#x6062;&#x590D;<br>&#x9664;&#x4E86;&#x652F;&#x6301;&#x7B80;&#x5355;&#x7684;key-value&#x6A21;&#x5F0F;&#xFF0C;&#x8FD8;&#x652F;&#x6301;&#x591A;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x5B58;&#x50A8;&#xFF0C;&#x6BD4;&#x5982;list&#x3001;set&#x3001;hash&#x3001;zset&#x7B49;&#x3002;<br>&#x4E00;&#x822C;&#x662F;&#x4F5C;&#x4E3A;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x5E93;&#x8F85;&#x52A9;&#x6301;&#x4E45;&#x5316;&#x7684;&#x6570;&#x636E;&#x5E93;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h3 id="126mongodb">1.2.6MongoDB</h3>
<table>
<thead>
<tr>
<th style="text-align:left"><img src="https://uploader.shimo.im/f/eQqgaml7pw8EmKch.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br></th>
<th style="text-align:left">&#x9AD8;&#x6027;&#x80FD;&#x3001;&#x5F00;&#x6E90;&#x3001;&#x6A21;&#x5F0F;&#x81EA;&#x7531;(schema  free)&#x7684;&#x6587;&#x6863;&#x578B;&#x6570;&#x636E;&#x5E93;<br>&#x6570;&#x636E;&#x90FD;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#xFF0C;&#x628A;&#x4E0D;&#x5E38;&#x7528;&#x7684;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x5230;&#x786C;&#x76D8;<br>&#x867D;&#x7136;&#x662F;key-value&#x6A21;&#x5F0F;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;value&#xFF08;&#x5C24;&#x5176;&#x662F;json&#xFF09;&#x63D0;&#x4F9B;&#x4E86;&#x4E30;&#x5BCC;&#x7684;&#x67E5;&#x8BE2;&#x529F;&#x80FD;<br>&#x652F;&#x6301;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x53CA;&#x5927;&#x578B;&#x5BF9;&#x8C61;<br>&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x6570;&#x636E;&#x7684;&#x7279;&#x70B9;&#x66FF;&#x4EE3;RDBMS&#xFF0C;&#x6210;&#x4E3A;&#x72EC;&#x7ACB;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x6216;&#x8005;&#x914D;&#x5408;RDBMS&#xFF0C;&#x5B58;&#x50A8;&#x7279;&#x5B9A;&#x7684;&#x6570;&#x636E;&#x3002;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h2 id="13&#x884C;&#x5F0F;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x5E93;&#xFF08;&#x5927;&#x6570;&#x636E;&#x65F6;&#x4EE3;&#xFF09;">1.3&#x884C;&#x5F0F;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x5E93;&#xFF08;&#x5927;&#x6570;&#x636E;&#x65F6;&#x4EE3;&#xFF09;</h2>
<h3 id="131&#x884C;&#x5F0F;&#x6570;&#x636E;&#x5E93;">1.3.1&#x884C;&#x5F0F;&#x6570;&#x636E;&#x5E93;</h3>
<p><img src="https://uploader.shimo.im/f/cx4niw48fOaJiQrx.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="132&#x5217;&#x5F0F;&#x6570;&#x636E;&#x5E93;">1.3.2&#x5217;&#x5F0F;&#x6570;&#x636E;&#x5E93;</h3>
<p><img src="https://uploader.shimo.im/f/QMXwEOV6sM1lX0Mb.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Hbase</p>
<p><img src="https://uploader.shimo.im/f/ZYgUn98OYJwaQ3WU.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>HBase&#x662F;Hadoop&#x9879;&#x76EE;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5E93;&#x3002;&#x5B83;&#x7528;&#x4E8E;&#x9700;&#x8981;&#x5BF9;&#x5927;&#x91CF;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x968F;&#x673A;&#x3001;&#x5B9E;&#x65F6;&#x7684;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#x7684;&#x573A;&#x666F;&#x4E2D;&#x3002;</p>
<p>HBase&#x7684;&#x76EE;&#x6807;&#x5C31;&#x662F;&#x5904;&#x7406;&#x6570;&#x636E;&#x91CF;&#x975E;&#x5E38;&#x5E9E;&#x5927;&#x7684;&#x8868;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x666E;&#x901A;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x5904;&#x7406;&#x8D85;&#x8FC7;10&#x4EBF;&#x884C;&#x6570;&#x636E;&#xFF0C;&#x8FD8;&#x53EF;&#x5904;&#x7406;&#x6709;&#x6570;&#x767E;&#x4E07;&#x5217;&#x5143;&#x7D20;&#x7684;&#x6570;&#x636E;&#x8868;&#x3002;</p>
<p>Cassandra[k&#x259;&#x2C8;s&#xE6;ndr&#x259;]</p>
<p><img src="https://uploader.shimo.im/f/ZivEwMZkYE8aQpvM.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Apache Cassandra&#x662F;&#x4E00;&#x6B3E;&#x514D;&#x8D39;&#x7684;&#x5F00;&#x6E90;NoSQL&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x5176;&#x8BBE;&#x8BA1;&#x76EE;&#x7684;&#x5728;&#x4E8E;&#x7BA1;&#x7406;&#x7531;&#x5927;&#x91CF;&#x5546;&#x7528;&#x670D;&#x52A1;&#x5668;&#x6784;&#x5EFA;&#x8D77;&#x6765;&#x7684;&#x5E9E;&#x5927;&#x96C6;&#x7FA4;&#x4E0A;&#x7684;&#x6D77;&#x91CF;&#x6570;&#x636E;&#x96C6;(&#x6570;&#x636E;&#x91CF;&#x901A;&#x5E38;&#x8FBE;&#x5230;PB&#x7EA7;&#x522B;)&#x3002;&#x5728;&#x4F17;&#x591A;&#x663E;&#x8457;&#x7279;&#x6027;&#x5F53;&#x4E2D;&#xFF0C;Cassandra&#x6700;&#x4E3A;&#x5353;&#x8D8A;&#x7684;&#x957F;&#x5904;&#x662F;&#x5BF9;&#x5199;&#x5165;&#x53CA;&#x8BFB;&#x53D6;&#x64CD;&#x4F5C;&#x8FDB;&#x884C;&#x89C4;&#x6A21;&#x8C03;&#x6574;&#xFF0C;&#x800C;&#x4E14;&#x5176;&#x4E0D;&#x5F3A;&#x8C03;&#x4E3B;&#x96C6;&#x7FA4;&#x7684;&#x8BBE;&#x8BA1;&#x601D;&#x8DEF;&#x80FD;&#x591F;&#x4EE5;&#x76F8;&#x5BF9;&#x76F4;&#x89C2;&#x7684;&#x65B9;&#x5F0F;&#x7B80;&#x5316;&#x5404;&#x96C6;&#x7FA4;&#x7684;&#x521B;&#x5EFA;&#x4E0E;&#x6269;&#x5C55;&#x6D41;&#x7A0B;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:left">&#x8BA1;&#x7B97;&#x673A;&#x5B58;&#x50A8;&#x5355;&#x4F4D;&#x8BA1;&#x7B97;&#x673A;&#x5B58;&#x50A8;&#x5355;&#x4F4D;&#x4E00;&#x822C;&#x7528;B&#xFF0C;KB&#xFF0C;MB&#xFF0C;GB&#xFF0C;TB&#xFF0C;EB&#xFF0C;ZB&#xFF0C;YB&#xFF0C;BB&#x6765;&#x8868;&#x793A;&#xFF0C;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x5173;&#x7CFB;&#x662F;&#xFF1A;<br>&#x4F4D;bit (&#x6BD4;&#x7279;)(Binary Digits)&#xFF1A;&#x5B58;&#x653E;&#x4E00;&#x4F4D;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#xFF0C;&#x5373;0&#x6216;1&#xFF0C;&#x6700;&#x5C0F;&#x7684;&#x5B58;&#x50A8;&#x5355;&#x4F4D;&#x3002;<br>&#x5B57;&#x8282;byte&#xFF1A;8&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x4F4D;&#x4E3A;&#x4E00;&#x4E2A;&#x5B57;&#x8282;(B)&#xFF0C;&#x6700;&#x5E38;&#x7528;&#x7684;&#x5355;&#x4F4D;&#x3002;<br>1KB (Kilobyte&#x5343;&#x5B57;&#x8282;)=1024B&#xFF0C;<br>1MB (Megabyte&#x5146;&#x5B57;&#x8282;&#x7B80;&#x79F0;&#x201C;&#x5146;&#x201D;)=1024KB&#xFF0C;<br>1GB (Gigabyte&#x5409;&#x5B57;&#x8282;&#x53C8;&#x79F0;&#x201C;&#x5343;&#x5146;&#x201D;)=1024MB&#xFF0C;<br>1TB (Trillionbyte&#x4E07;&#x4EBF;&#x5B57;&#x8282;&#x592A;&#x5B57;&#x8282;)=1024GB&#xFF0C;&#x5176;&#x4E2D;1024=2^10 ( 2&#x7684;10&#x6B21;&#x65B9;)&#xFF0C;<br>1PB&#xFF08;Petabyte&#x5343;&#x4E07;&#x4EBF;&#x5B57;&#x8282;&#x62CD;&#x5B57;&#x8282;&#xFF09;=1024TB&#xFF0C;<br>1EB&#xFF08;Exabyte&#x767E;&#x4EBF;&#x4EBF;&#x5B57;&#x8282;&#x827E;&#x5B57;&#x8282;&#xFF09;=1024PB&#xFF0C;<br>1ZB (Zettabyte&#x5341;&#x4E07;&#x4EBF;&#x4EBF;&#x5B57;&#x8282;&#x6CFD;&#x5B57;&#x8282;)= 1024 EB,<br>1YB (Jottabyte&#x4E00;&#x4EBF;&#x4EBF;&#x4EBF;&#x5B57;&#x8282;&#x5C27;&#x5B57;&#x8282;)= 1024 ZB,<br>1BB (Brontobyte&#x4E00;&#x5343;&#x4EBF;&#x4EBF;&#x4EBF;&#x5B57;&#x8282;)= 1024 YB.<br>&#x6CE8;&#xFF1A;&#x201C;&#x5146;&#x201D;&#x4E3A;&#x767E;&#x4E07;&#x7EA7;&#x6570;&#x91CF;&#x5355;&#x4F4D;&#x3002;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h2 id="14&#x56FE;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;">1.4&#x56FE;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;</h2>
<p><img src="https://uploader.shimo.im/f/iYjEcpGDiUHZYJfj.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E3B;&#x8981;&#x5E94;&#x7528;&#xFF1A;&#x793E;&#x4F1A;&#x5173;&#x7CFB;&#xFF0C;&#x516C;&#x5171;&#x4EA4;&#x901A;&#x7F51;&#x7EDC;&#xFF0C;&#x5730;&#x56FE;&#x53CA;&#x7F51;&#x7EDC;&#x62D3;&#x8C31;(n*(n-1)/2)</p>
<p><img src="https://uploader.shimo.im/f/ineC4HdKC01wPkGo.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h2 id="15db-engines-&#x6570;&#x636E;&#x5E93;&#x6392;&#x540D;">1.5DB-Engines &#x6570;&#x636E;&#x5E93;&#x6392;&#x540D;</h2>
<p><a href="http://db-engines.com/en/ranking?fileGuid=yBtmdjz5Ja42cjcb" target="_blank">http://db-engines.com/en/ranking</a></p>
<p><img src="https://uploader.shimo.im/f/FUCeSk9mejwMo8QQ.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h1 id="2redis&#x6982;&#x8FF0;&#x5B89;&#x88C5;">2.Redis&#x6982;&#x8FF0;&#x5B89;&#x88C5;</h1>
<p>Redis&#x662F;&#x4E00;&#x4E2A;&#x5F00;&#x6E90;&#x7684;key-value&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x3002;</p>
<p>&#x548C;Memcached&#x7C7B;&#x4F3C;&#xFF0C;&#x5B83;&#x652F;&#x6301;&#x5B58;&#x50A8;&#x7684;value&#x7C7B;&#x578B;&#x76F8;&#x5BF9;&#x66F4;&#x591A;&#xFF0C;&#x5305;&#x62EC;string(&#x5B57;&#x7B26;&#x4E32;)&#x3001;list(&#x94FE;&#x8868;)&#x3001;set(&#x96C6;&#x5408;)&#x3001;zset(sorted set --&#x6709;&#x5E8F;&#x96C6;&#x5408;)&#x548C;hash&#xFF08;&#x54C8;&#x5E0C;&#x7C7B;&#x578B;&#xFF09;&#x3002;</p>
<p>&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x90FD;&#x652F;&#x6301;push/pop&#x3001;add/remove&#x53CA;&#x53D6;&#x4EA4;&#x96C6;&#x5E76;&#x96C6;&#x548C;&#x5DEE;&#x96C6;&#x53CA;&#x66F4;&#x4E30;&#x5BCC;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x800C;&#x4E14;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x539F;&#x5B50;&#x6027;&#x7684;&#x3002;</p>
<p>&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;Redis&#x652F;&#x6301;&#x5404;&#x79CD;&#x4E0D;&#x540C;&#x65B9;&#x5F0F;&#x7684;&#x6392;&#x5E8F;&#x3002;</p>
<p>&#x4E0E;memcached&#x4E00;&#x6837;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x6548;&#x7387;&#xFF0C;&#x6570;&#x636E;&#x90FD;&#x662F;&#x7F13;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#x3002;</p>
<p>&#x533A;&#x522B;&#x7684;&#x662F;Redis&#x4F1A;&#x5468;&#x671F;&#x6027;&#x7684;&#x628A;&#x66F4;&#x65B0;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x6216;&#x8005;&#x628A;&#x4FEE;&#x6539;&#x64CD;&#x4F5C;&#x5199;&#x5165;&#x8FFD;&#x52A0;&#x7684;&#x8BB0;&#x5F55;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x5E76;&#x4E14;&#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x5B9E;&#x73B0;&#x4E86;master-slave(&#x4E3B;&#x4ECE;)&#x540C;&#x6B65;&#x3002;</p>
<h2 id="21&#x5E94;&#x7528;&#x573A;&#x666F;">2.1&#x5E94;&#x7528;&#x573A;&#x666F;</h2>
<p>&#x914D;&#x5408;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x505A;&#x9AD8;&#x901F;&#x7F13;&#x5B58;</p>
<p>&#x9AD8;&#x9891;&#x6B21;&#xFF0C;&#x70ED;&#x95E8;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x964D;&#x4F4E;&#x6570;&#x636E;&#x5E93;IO</p>
<p>&#x5206;&#x5E03;&#x5F0F;&#x67B6;&#x6784;&#xFF0C;&#x505A;session&#x5171;&#x4EAB;</p>
<p><img src="https://uploader.shimo.im/f/GxZ1qxmJETKjACOj.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x591A;&#x6837;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5B58;&#x50A8;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;</p>
<p><img src="https://uploader.shimo.im/f/8Q4NS5XIKI8Mv3DM.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h2 id="22redis&#x5B89;&#x88C5;">2.2Redis&#x5B89;&#x88C5;</h2>
<table>
<thead>
<tr>
<th style="text-align:left">Redis&#x5B98;&#x65B9;&#x7F51;&#x7AD9;</th>
<th style="text-align:left">Redis&#x4E2D;&#x6587;&#x5B98;&#x65B9;&#x7F51;&#x7AD9;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="http://redis.io?fileGuid=yBtmdjz5Ja42cjcb" target="_blank">http://redis.io</a></td>
<td style="text-align:left"><a href="http://redis.cn/" target="_blank">http://redis.cn/</a></td>
</tr>
</tbody>
</table>
<p><img src="https://uploader.shimo.im/f/rahsMeKnwuyP6Psx.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://uploader.shimo.im/f/J1zWFgPtEoCdw7cD.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="221&#x5B89;&#x88C5;&#x7248;&#x672C;">2.2.1&#x5B89;&#x88C5;&#x7248;&#x672C;</h3>
<p>6.2.1 for Linux&#xFF08;redis-6.2.1.tar.gz&#xFF09;</p>
<p>&#x4E0D;&#x7528;&#x8003;&#x8651;&#x5728;windows&#x73AF;&#x5883;&#x4E0B;&#x5BF9;Redis&#x7684;&#x652F;&#x6301;</p>
<p><img src="https://uploader.shimo.im/f/8b9VhYQb0B0WN84H.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="222&#x5B89;&#x88C5;&#x6B65;&#x9AA4;">2.2.2&#x5B89;&#x88C5;&#x6B65;&#x9AA4;</h3>
<p>&#x51C6;&#x5907;&#x5DE5;&#x4F5C;&#xFF1A;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x6700;&#x65B0;&#x7248;&#x7684;gcc&#x7F16;&#x8BD1;&#x5668;</p>
<p>&#x5B89;&#x88C5;C &#x8BED;&#x8A00;&#x7684;&#x7F16;&#x8BD1;&#x73AF;&#x5883;</p>
<p>yum install centos-release-scl scl-utils-build</p>
<p>yum install -y devtoolset-8-toolchain</p>
<p>scl enable devtoolset-8 bash</p>
<p>&#x6D4B;&#x8BD5; gcc&#x7248;&#x672C;</p>
<p>gcc --version</p>
<p><img src="https://uploader.shimo.im/f/8ZHUPlXMlyG1N81y.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E0B;&#x8F7D;redis-6.2.1.tar.gz&#x653E;/opt&#x76EE;&#x5F55;</p>
<p>&#x89E3;&#x538B;&#x547D;&#x4EE4;&#xFF1A;tar -zxvf redis-6.2.1.tar.gz</p>
<p>&#x89E3;&#x538B;&#x5B8C;&#x6210;&#x540E;&#x8FDB;&#x5165;&#x76EE;&#x5F55;&#xFF1A;cd redis-6.2.1</p>
<p>&#x5728;redis-6.2.1&#x76EE;&#x5F55;&#x4E0B;&#x518D;&#x6B21;&#x6267;&#x884C;make&#x547D;&#x4EE4;&#xFF08;&#x53EA;&#x662F;&#x7F16;&#x8BD1;&#x597D;&#xFF09;</p>
<p>&#x5982;&#x679C;&#x6CA1;&#x6709;&#x51C6;&#x5907;&#x597D;C&#x8BED;&#x8A00;&#x7F16;&#x8BD1;&#x73AF;&#x5883;&#xFF0C;make &#x4F1A;&#x62A5;&#x9519;&#x2014;Jemalloc/jemalloc.h&#xFF1A;&#x6CA1;&#x6709;&#x90A3;&#x4E2A;&#x6587;&#x4EF6;</p>
<p><img src="https://uploader.shimo.im/f/1Zn9YXNp9Vh5K8HC.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;&#x8FD0;&#x884C;make distclean</p>
<p><img src="https://uploader.shimo.im/f/4OqTJPMuoStJ4uGX.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5728;redis-6.2.1&#x76EE;&#x5F55;&#x4E0B;&#x518D;&#x6B21;&#x6267;&#x884C;make&#x547D;&#x4EE4;&#xFF08;&#x53EA;&#x662F;&#x7F16;&#x8BD1;&#x597D;&#xFF09;</p>
<p><img src="https://uploader.shimo.im/f/aW9gyjd2kNk3fdvF.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x8DF3;&#x8FC7;make test &#x7EE7;&#x7EED;&#x6267;&#x884C;: make install</p>
<p><img src="https://uploader.shimo.im/f/kxgW5EhjFeKGdrPa.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="223&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF1A;usrlocalbin">2.2.3&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF1A;/usr/local/bin</h3>
<p>&#x67E5;&#x770B;&#x9ED8;&#x8BA4;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#xFF1A;</p>
<p>redis-benchmark:&#x6027;&#x80FD;&#x6D4B;&#x8BD5;&#x5DE5;&#x5177;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x81EA;&#x5DF1;&#x672C;&#x5B50;&#x8FD0;&#x884C;&#xFF0C;&#x770B;&#x770B;&#x81EA;&#x5DF1;&#x672C;&#x5B50;&#x6027;&#x80FD;&#x5982;&#x4F55;</p>
<p>redis-check-aof&#xFF1A;&#x4FEE;&#x590D;&#x6709;&#x95EE;&#x9898;&#x7684;AOF&#x6587;&#x4EF6;&#xFF0C;rdb&#x548C;aof&#x540E;&#x9762;&#x8BB2;</p>
<p>redis-check-dump&#xFF1A;&#x4FEE;&#x590D;&#x6709;&#x95EE;&#x9898;&#x7684;dump.rdb&#x6587;&#x4EF6;</p>
<p>redis-sentinel&#xFF1A;Redis&#x96C6;&#x7FA4;&#x4F7F;&#x7528;</p>
<p>redis-server&#xFF1A;Redis&#x670D;&#x52A1;&#x5668;&#x542F;&#x52A8;&#x547D;&#x4EE4;</p>
<p>redis-cli&#xFF1A;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x64CD;&#x4F5C;&#x5165;&#x53E3;</p>
<h3 id="224&#x524D;&#x53F0;&#x542F;&#x52A8;&#xFF08;&#x4E0D;&#x63A8;&#x8350;&#xFF09;">2.2.4&#x524D;&#x53F0;&#x542F;&#x52A8;&#xFF08;&#x4E0D;&#x63A8;&#x8350;&#xFF09;</h3>
<p>&#x524D;&#x53F0;&#x542F;&#x52A8;&#xFF0C;&#x547D;&#x4EE4;&#x884C;&#x7A97;&#x53E3;&#x4E0D;&#x80FD;&#x5173;&#x95ED;&#xFF0C;&#x5426;&#x5219;&#x670D;&#x52A1;&#x5668;&#x505C;&#x6B62;</p>
<p><img src="https://uploader.shimo.im/f/lby1jiKrhJ1Eh9ZE.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="225&#x540E;&#x53F0;&#x542F;&#x52A8;&#xFF08;&#x63A8;&#x8350;&#xFF09;">2.2.5&#x540E;&#x53F0;&#x542F;&#x52A8;&#xFF08;&#x63A8;&#x8350;&#xFF09;</h3>
<p>&#x5907;&#x4EFD;redis.conf</p>
<p>&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;redis.conf&#x5230;&#x5176;&#x4ED6;&#x76EE;&#x5F55;</p>
<p>cp  /opt/redis-3.2.5/redis.conf  /myredis</p>
<p>&#x540E;&#x53F0;&#x542F;&#x52A8;&#x8BBE;&#x7F6E;daemonize no&#x6539;&#x6210;yes</p>
<p>&#x4FEE;&#x6539;redis.conf(128&#x884C;)&#x6587;&#x4EF6;&#x5C06;&#x91CC;&#x9762;&#x7684;daemonize no &#x6539;&#x6210; yes&#xFF0C;&#x8BA9;&#x670D;&#x52A1;&#x5728;&#x540E;&#x53F0;&#x542F;&#x52A8;</p>
<p>Redis&#x542F;&#x52A8;</p>
<p>redis-server/myredis/redis.conf</p>
<p><img src="https://uploader.shimo.im/f/FMrBXQvKnBosfqnk.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x7528;&#x5BA2;&#x6237;&#x7AEF;&#x8BBF;&#x95EE;&#xFF1A;redis-cli</p>
<p><img src="https://uploader.shimo.im/f/FlA0n4RN62oH09j2.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x591A;&#x4E2A;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#xFF1A;redis-cli -p6379</p>
<p>&#x6D4B;&#x8BD5;&#x9A8C;&#x8BC1;&#xFF1A; ping</p>
<p><img src="https://uploader.shimo.im/f/yc9qLsP6DDoigCGZ.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Redis&#x5173;&#x95ED;</p>
<p>&#x5355;&#x5B9E;&#x4F8B;&#x5173;&#x95ED;&#xFF1A;redis-cli shutdown</p>
<p><img src="https://uploader.shimo.im/f/C2gZkUEEjr6GvK5Y.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E5F;&#x53EF;&#x4EE5;&#x8FDB;&#x5165;&#x7EC8;&#x7AEF;&#x540E;&#x518D;&#x5173;&#x95ED;</p>
<p><img src="https://uploader.shimo.im/f/fBJBjMpGy3SJVgof.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x591A;&#x5B9E;&#x4F8B;&#x5173;&#x95ED;&#xFF0C;&#x6307;&#x5B9A;&#x7AEF;&#x53E3;&#x5173;&#x95ED;&#xFF1A;redis-cli -p 6379 shutdown</p>
<p>Redis&#x4ECB;&#x7ECD;&#x76F8;&#x5173;&#x77E5;&#x8BC6;</p>
<table>
<thead>
<tr>
<th style="text-align:left">&#x7AEF;&#x53E3;6379&#x4ECE;&#x4F55;&#x800C;&#x6765;<br>Alessia  Merz<br><img src="https://uploader.shimo.im/f/CaISTOgTtteHukic.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></th>
<th style="text-align:left">&#x9ED8;&#x8BA4;16&#x4E2A;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7C7B;&#x4F3C;&#x6570;&#x7EC4;&#x4E0B;&#x6807;&#x4ECE;0&#x5F00;&#x59CB;&#xFF0C;&#x521D;&#x59CB;&#x9ED8;&#x8BA4;&#x4F7F;&#x7528;0&#x53F7;&#x5E93;<br>&#x4F7F;&#x7528;&#x547D;&#x4EE4;select   <dbid>&#x6765;&#x5207;&#x6362;&#x6570;&#x636E;&#x5E93;&#x3002;&#x5982;: select 8<br>&#x7EDF;&#x4E00;&#x5BC6;&#x7801;&#x7BA1;&#x7406;&#xFF0C;&#x6240;&#x6709;&#x5E93;&#x540C;&#x6837;&#x5BC6;&#x7801;&#x3002;<br>dbsize&#x67E5;&#x770B;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x7684;key&#x7684;&#x6570;&#x91CF;<br>flushdb&#x6E05;&#x7A7A;&#x5F53;&#x524D;&#x5E93;<br>flushall&#x901A;&#x6740;&#x5168;&#x90E8;&#x5E93;</dbid></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>Redis&#x662F;&#x5355;&#x7EBF;&#x7A0B;+&#x591A;&#x8DEF;IO&#x590D;&#x7528;&#x6280;&#x672F;</p>
<p>&#x591A;&#x8DEF;&#x590D;&#x7528;&#x662F;&#x6307;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x6765;&#x68C0;&#x67E5;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#xFF08;Socket&#xFF09;&#x7684;&#x5C31;&#x7EEA;&#x72B6;&#x6001;&#xFF0C;&#x6BD4;&#x5982;&#x8C03;&#x7528;select&#x548C;poll&#x51FD;&#x6570;&#xFF0C;&#x4F20;&#x5165;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x63CF;&#x8FF0;&#x7B26;&#x5C31;&#x7EEA;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#xFF0C;&#x5426;&#x5219;&#x963B;&#x585E;&#x76F4;&#x5230;&#x8D85;&#x65F6;&#x3002;&#x5F97;&#x5230;&#x5C31;&#x7EEA;&#x72B6;&#x6001;&#x540E;&#x8FDB;&#x884C;&#x771F;&#x6B63;&#x7684;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#x91CC;&#x6267;&#x884C;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x542F;&#x52A8;&#x7EBF;&#x7A0B;&#x6267;&#x884C;&#xFF08;&#x6BD4;&#x5982;&#x4F7F;&#x7528;&#x7EBF;&#x7A0B;&#x6C60;&#xFF09;</p>
<p>&#x4E32;&#x884C;   vs   &#x591A;&#x7EBF;&#x7A0B;+&#x9501;&#xFF08;memcached&#xFF09; vs   &#x5355;&#x7EBF;&#x7A0B;+&#x591A;&#x8DEF;IO&#x590D;&#x7528;(Redis)</p>
<p>&#xFF08;&#x4E0E;Memcache&#x4E09;&#x70B9;&#x4E0D;&#x540C;: &#x652F;&#x6301;&#x591A;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x652F;&#x6301;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x5355;&#x7EBF;&#x7A0B;+&#x591A;&#x8DEF;IO&#x590D;&#x7528;&#xFF09;</p>
<p><img src="https://uploader.shimo.im/f/EW1NSUEDOwaLHtFp.gif?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h1 id="3&#x5E38;&#x7528;&#x4E94;&#x5927;&#x6570;&#x636E;&#x7C7B;&#x578B;">3.&#x5E38;&#x7528;&#x4E94;&#x5927;&#x6570;&#x636E;&#x7C7B;&#x578B;</h1>
<p>&#x54EA;&#x91CC;&#x53BB;&#x83B7;&#x5F97;redis&#x5E38;&#x89C1;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x64CD;&#x4F5C;&#x547D;&#x4EE4;<a href="http://www.redis.cn/commands.html" target="_blank">http://www.redis.cn/commands.html</a></p>
<h2 id="31redis&#x952E;key">3.1Redis&#x952E;(key)</h2>
<p>keys <em>&#x67E5;&#x770B;&#x5F53;&#x524D;&#x5E93;&#x6240;&#x6709;key    (&#x5339;&#x914D;&#xFF1A;keys </em>1)</p>
<p>exists key&#x5224;&#x65AD;&#x67D0;&#x4E2A;key&#x662F;&#x5426;&#x5B58;&#x5728;</p>
<p>type key &#x67E5;&#x770B;&#x4F60;&#x7684;key&#x662F;&#x4EC0;&#x4E48;&#x7C7B;&#x578B;</p>
<p>del key       &#x5220;&#x9664;&#x6307;&#x5B9A;&#x7684;key&#x6570;&#x636E;</p>
<p>unlink key   &#x6839;&#x636E;value&#x9009;&#x62E9;&#x975E;&#x963B;&#x585E;&#x5220;&#x9664;</p>
<p>&#x4EC5;&#x5C06;keys&#x4ECE;keyspace&#x5143;&#x6570;&#x636E;&#x4E2D;&#x5220;&#x9664;&#xFF0C;&#x771F;&#x6B63;&#x7684;&#x5220;&#x9664;&#x4F1A;&#x5728;&#x540E;&#x7EED;&#x5F02;&#x6B65;&#x64CD;&#x4F5C;&#x3002;</p>
<p>expire key 10   10&#x79D2;&#x949F;&#xFF1A;&#x4E3A;&#x7ED9;&#x5B9A;&#x7684;key&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;</p>
<p>ttl key &#x67E5;&#x770B;&#x8FD8;&#x6709;&#x591A;&#x5C11;&#x79D2;&#x8FC7;&#x671F;&#xFF0C;-1&#x8868;&#x793A;&#x6C38;&#x4E0D;&#x8FC7;&#x671F;&#xFF0C;-2&#x8868;&#x793A;&#x5DF2;&#x8FC7;&#x671F;</p>
<p>select&#x547D;&#x4EE4;&#x5207;&#x6362;&#x6570;&#x636E;&#x5E93;</p>
<p>dbsize&#x67E5;&#x770B;&#x5F53;&#x524D;&#x6570;&#x636E;&#x5E93;&#x7684;key&#x7684;&#x6570;&#x91CF;</p>
<p>flushdb&#x6E05;&#x7A7A;&#x5F53;&#x524D;&#x5E93;</p>
<p>flushall&#x901A;&#x6740;&#x5168;&#x90E8;&#x5E93;</p>
<h2 id="32redis&#x5B57;&#x7B26;&#x4E32;string">3.2Redis&#x5B57;&#x7B26;&#x4E32;(String)</h2>
<p>&#x7B80;&#x4ECB;</p>
<p>String&#x662F;Redis&#x6700;&#x57FA;&#x672C;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x6210;&#x4E0E;Memcached&#x4E00;&#x6A21;&#x4E00;&#x6837;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x4E00;&#x4E2A;key&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;value&#x3002;</p>
<p>String&#x7C7B;&#x578B;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x5B89;&#x5168;&#x7684;&#x3002;&#x610F;&#x5473;&#x7740;Redis&#x7684;string&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x4EFB;&#x4F55;&#x6570;&#x636E;&#x3002;&#x6BD4;&#x5982;jpg&#x56FE;&#x7247;&#x6216;&#x8005;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
<p>String&#x7C7B;&#x578B;&#x662F;Redis&#x6700;&#x57FA;&#x672C;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C;&#x4E00;&#x4E2A;Redis&#x4E2D;&#x5B57;&#x7B26;&#x4E32;value&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x662F;512M</p>
<p>&#x5E38;&#x7528;&#x547D;&#x4EE4;</p>
<p>set   <key><value>&#x6DFB;&#x52A0;&#x952E;&#x503C;&#x5BF9;</value></key></p>
<p><img src="https://uploader.shimo.im/f/s3Bb4tBvIWs8dOA3.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>*NX&#xFF1A;&#x5F53;&#x6570;&#x636E;&#x5E93;&#x4E2D;key&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;key-value&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x5E93;</p>
<p>*XX&#xFF1A;&#x5F53;&#x6570;&#x636E;&#x5E93;&#x4E2D;key&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;key-value&#x6DFB;&#x52A0;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x4E0E;NX&#x53C2;&#x6570;&#x4E92;&#x65A5;</p>
<p>*EX&#xFF1A;key&#x7684;&#x8D85;&#x65F6;&#x79D2;&#x6570;</p>
<p>*PX&#xFF1A;key&#x7684;&#x8D85;&#x65F6;&#x6BEB;&#x79D2;&#x6570;&#xFF0C;&#x4E0E;EX&#x4E92;&#x65A5;</p>
<p>get   <key>&#x67E5;&#x8BE2;&#x5BF9;&#x5E94;&#x952E;&#x503C;</key></p>
<p>append  <key><value>&#x5C06;&#x7ED9;&#x5B9A;&#x7684;<value> &#x8FFD;&#x52A0;&#x5230;&#x539F;&#x503C;&#x7684;&#x672B;&#x5C3E;</value></value></key></p>
<p>strlen  <key>&#x83B7;&#x5F97;&#x503C;&#x7684;&#x957F;&#x5EA6;</key></p>
<p>setnx  <key><value>&#x53EA;&#x6709;&#x5728; key &#x4E0D;&#x5B58;&#x5728;&#x65F6;    &#x8BBE;&#x7F6E; key &#x7684;&#x503C;</value></key></p>
<p>incr  <key></key></p>
<p>&#x5C06; key &#x4E2D;&#x50A8;&#x5B58;&#x7684;&#x6570;&#x5B57;&#x503C;&#x589E;1</p>
<p>&#x53EA;&#x80FD;&#x5BF9;&#x6570;&#x5B57;&#x503C;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x7A7A;&#xFF0C;&#x65B0;&#x589E;&#x503C;&#x4E3A;1</p>
<p>decr  <key></key></p>
<p>&#x5C06; key &#x4E2D;&#x50A8;&#x5B58;&#x7684;&#x6570;&#x5B57;&#x503C;&#x51CF;1</p>
<p>&#x53EA;&#x80FD;&#x5BF9;&#x6570;&#x5B57;&#x503C;&#x64CD;&#x4F5C;&#xFF0C;&#x5982;&#x679C;&#x4E3A;&#x7A7A;&#xFF0C;&#x65B0;&#x589E;&#x503C;&#x4E3A;-1</p>
<p>incrby / decrby  <key>&lt;&#x6B65;&#x957F;&gt;&#x5C06; key &#x4E2D;&#x50A8;&#x5B58;&#x7684;&#x6570;&#x5B57;&#x503C;&#x589E;&#x51CF;&#x3002;&#x81EA;&#x5B9A;&#x4E49;&#x6B65;&#x957F;&#x3002;</key></p>
<table>
<thead>
<tr>
<th style="text-align:left">&#x539F;&#x5B50;&#x6027;<br><img src="https://uploader.shimo.im/f/n0iGtcFEa2eg7EGm.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br>&#x6240;&#x8C13;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x662F;&#x6307;&#x4E0D;&#x4F1A;&#x88AB;&#x7EBF;&#x7A0B;&#x8C03;&#x5EA6;&#x673A;&#x5236;&#x6253;&#x65AD;&#x7684;&#x64CD;&#x4F5C;&#xFF1B;<br>&#x8FD9;&#x79CD;&#x64CD;&#x4F5C;&#x4E00;&#x65E6;&#x5F00;&#x59CB;&#xFF0C;&#x5C31;&#x4E00;&#x76F4;&#x8FD0;&#x884C;&#x5230;&#x7ED3;&#x675F;&#xFF0C;&#x4E2D;&#x95F4;&#x4E0D;&#x4F1A;&#x6709;&#x4EFB;&#x4F55; context switch &#xFF08;&#x5207;&#x6362;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF09;&#x3002;<br>&#xFF08;1&#xFF09;&#x5728;&#x5355;&#x7EBF;&#x7A0B;&#x4E2D;&#xFF0C; &#x80FD;&#x591F;&#x5728;&#x5355;&#x6761;&#x6307;&#x4EE4;&#x4E2D;&#x5B8C;&#x6210;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x662F;&quot;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&quot;&#xFF0C;&#x56E0;&#x4E3A;&#x4E2D;&#x65AD;&#x53EA;&#x80FD;&#x53D1;&#x751F;&#x4E8E;&#x6307;&#x4EE4;&#x4E4B;&#x95F4;&#x3002;<br>&#xFF08;2&#xFF09;&#x5728;&#x591A;&#x7EBF;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E0D;&#x80FD;&#x88AB;&#x5176;&#x5B83;&#x8FDB;&#x7A0B;&#xFF08;&#x7EBF;&#x7A0B;&#xFF09;&#x6253;&#x65AD;&#x7684;&#x64CD;&#x4F5C;&#x5C31;&#x53EB;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#x3002;<br>Redis&#x5355;&#x547D;&#x4EE4;&#x7684;&#x539F;&#x5B50;&#x6027;&#x4E3B;&#x8981;&#x5F97;&#x76CA;&#x4E8E;Redis&#x7684;&#x5355;&#x7EBF;&#x7A0B;&#x3002;<br>&#x6848;&#x4F8B;&#xFF1A;<br>java&#x4E2D;&#x7684;i++&#x662F;&#x5426;&#x662F;&#x539F;&#x5B50;&#x64CD;&#x4F5C;&#xFF1F;&#x4E0D;&#x662F;<br>i=0;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x5206;&#x522B;&#x5BF9;i&#x8FDB;&#x884C;++100&#x6B21;,&#x503C;&#x662F;&#x591A;&#x5C11;&#xFF1F; 2~200<br></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>mset  <key1><value1><key2><value2>  .....</value2></key2></value1></key1></p>
<p>&#x540C;&#x65F6;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; key-value&#x5BF9;</p>
<p>mget  <key1><key2><key3> .....</key3></key2></key1></p>
<p>&#x540C;&#x65F6;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; value</p>
<p>msetnx <key1><value1><key2><value2>  .....</value2></key2></value1></key1></p>
<p>&#x540C;&#x65F6;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; key-value &#x5BF9;&#xFF0C;&#x5F53;&#x4E14;&#x4EC5;&#x5F53;&#x6240;&#x6709;&#x7ED9;&#x5B9A; key &#x90FD;&#x4E0D;&#x5B58;&#x5728;&#x3002;</p>
<p>&#x539F;&#x5B50;&#x6027;&#xFF0C;&#x6709;&#x4E00;&#x4E2A;&#x5931;&#x8D25;&#x5219;&#x90FD;&#x5931;&#x8D25;</p>
<p>getrange  <key>&lt;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&gt;&lt;&#x7ED3;&#x675F;&#x4F4D;&#x7F6E;&gt;</key></p>
<p>&#x83B7;&#x5F97;&#x503C;&#x7684;&#x8303;&#x56F4;&#xFF0C;&#x7C7B;&#x4F3C;java&#x4E2D;&#x7684;substring&#xFF0C;&#x524D;&#x5305;&#xFF0C;&#x540E;&#x5305;</p>
<p>setrange  <key>&lt;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&gt;<value></value></key></p>
<p>&#x7528; <value>  &#x8986;&#x5199;<key>&#x6240;&#x50A8;&#x5B58;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x503C;&#xFF0C;&#x4ECE;&lt;&#x8D77;&#x59CB;&#x4F4D;&#x7F6E;&gt;&#x5F00;&#x59CB;(&#x7D22;&#x5F15;&#x4ECE;0&#x5F00;&#x59CB;)&#x3002;</key></value></p>
<p>setex  <key>&lt;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&gt;<value></value></key></p>
<p>&#x8BBE;&#x7F6E;&#x952E;&#x503C;&#x7684;&#x540C;&#x65F6;&#xFF0C;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x79D2;&#x3002;</p>
<p>getset <key><value></value></key></p>
<p>&#x4EE5;&#x65B0;&#x6362;&#x65E7;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E86;&#x65B0;&#x503C;&#x540C;&#x65F6;&#x83B7;&#x5F97;&#x65E7;&#x503C;&#x3002;</p>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;</p>
<p>String&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E3A;&#x7B80;&#x5355;&#x52A8;&#x6001;&#x5B57;&#x7B26;&#x4E32;(Simple Dynamic String,&#x7F29;&#x5199;SDS)&#x3002;&#x662F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5185;&#x90E8;&#x7ED3;&#x6784;&#x5B9E;&#x73B0;&#x4E0A;&#x7C7B;&#x4F3C;&#x4E8E;Java&#x7684;ArrayList&#xFF0C;&#x91C7;&#x7528;&#x9884;&#x5206;&#x914D;&#x5197;&#x4F59;&#x7A7A;&#x95F4;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x51CF;&#x5C11;&#x5185;&#x5B58;&#x7684;&#x9891;&#x7E41;&#x5206;&#x914D;.</p>
<p><img src="https://uploader.shimo.im/f/ZzTbKMrfxwQmVCYg.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5982;&#x56FE;&#x4E2D;&#x6240;&#x793A;&#xFF0C;&#x5185;&#x90E8;&#x4E3A;&#x5F53;&#x524D;&#x5B57;&#x7B26;&#x4E32;&#x5B9E;&#x9645;&#x5206;&#x914D;&#x7684;&#x7A7A;&#x95F4;capacity&#x4E00;&#x822C;&#x8981;&#x9AD8;&#x4E8E;&#x5B9E;&#x9645;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;len&#x3002;&#x5F53;&#x5B57;&#x7B26;&#x4E32;&#x957F;&#x5EA6;&#x5C0F;&#x4E8E;1M&#x65F6;&#xFF0C;&#x6269;&#x5BB9;&#x90FD;&#x662F;&#x52A0;&#x500D;&#x73B0;&#x6709;&#x7684;&#x7A7A;&#x95F4;&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x8FC7;1M&#xFF0C;&#x6269;&#x5BB9;&#x65F6;&#x4E00;&#x6B21;&#x53EA;&#x4F1A;&#x591A;&#x6269;1M&#x7684;&#x7A7A;&#x95F4;&#x3002;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x4E3A;512M&#x3002;</p>
<h2 id="33redis&#x5217;&#x8868;list">3.3Redis&#x5217;&#x8868;(List)</h2>
<p>&#x7B80;&#x4ECB;</p>
<p>&#x5355;&#x952E;&#x591A;&#x503C;</p>
<p>Redis &#x5217;&#x8868;&#x662F;&#x7B80;&#x5355;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x5217;&#x8868;&#xFF0C;&#x6309;&#x7167;&#x63D2;&#x5165;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5230;&#x5217;&#x8868;&#x7684;&#x5934;&#x90E8;&#xFF08;&#x5DE6;&#x8FB9;&#xFF09;&#x6216;&#x8005;&#x5C3E;&#x90E8;&#xFF08;&#x53F3;&#x8FB9;&#xFF09;&#x3002;</p>
<p>&#x5B83;&#x7684;&#x5E95;&#x5C42;&#x5B9E;&#x9645;&#x662F;&#x4E2A;&#x53CC;&#x5411;&#x94FE;&#x8868;&#xFF0C;&#x5BF9;&#x4E24;&#x7AEF;&#x7684;&#x64CD;&#x4F5C;&#x6027;&#x80FD;&#x5F88;&#x9AD8;&#xFF0C;&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#x4E0B;&#x6807;&#x7684;&#x64CD;&#x4F5C;&#x4E2D;&#x95F4;&#x7684;&#x8282;&#x70B9;&#x6027;&#x80FD;&#x4F1A;&#x8F83;&#x5DEE;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/UGBfyW30qEjTj9eJ.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5E38;&#x7528;&#x547D;&#x4EE4;</p>
<p>lpush/rpush  <key><value1><value2><value3> .... &#x4ECE;&#x5DE6;&#x8FB9;/&#x53F3;&#x8FB9;&#x63D2;&#x5165;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x503C;&#x3002;</value3></value2></value1></key></p>
<p>lpop/rpop  <key>&#x4ECE;&#x5DE6;&#x8FB9;/&#x53F3;&#x8FB9;&#x5410;&#x51FA;&#x4E00;&#x4E2A;&#x503C;&#x3002;&#x503C;&#x5728;&#x952E;&#x5728;&#xFF0C;&#x503C;&#x5149;&#x952E;&#x4EA1;&#x3002;</key></p>
<p>rpoplpush  <key1><key2>&#x4ECE;<key1>&#x5217;&#x8868;&#x53F3;&#x8FB9;&#x5410;&#x51FA;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x63D2;&#x5230;<key2>&#x5217;&#x8868;&#x5DE6;&#x8FB9;&#x3002;</key2></key1></key2></key1></p>
<p>lrange <key><start><stop></stop></start></key></p>
<p>&#x6309;&#x7167;&#x7D22;&#x5F15;&#x4E0B;&#x6807;&#x83B7;&#x5F97;&#x5143;&#x7D20;(&#x4ECE;&#x5DE6;&#x5230;&#x53F3;)</p>
<p>lrange mylist 0 -1   0&#x5DE6;&#x8FB9;&#x7B2C;&#x4E00;&#x4E2A;&#xFF0C;-1&#x53F3;&#x8FB9;&#x7B2C;&#x4E00;&#x4E2A;&#xFF0C;&#xFF08;0-1&#x8868;&#x793A;&#x83B7;&#x53D6;&#x6240;&#x6709;&#xFF09;</p>
<p>lindex <key><index>&#x6309;&#x7167;&#x7D22;&#x5F15;&#x4E0B;&#x6807;&#x83B7;&#x5F97;&#x5143;&#x7D20;(&#x4ECE;&#x5DE6;&#x5230;&#x53F3;)</index></key></p>
<p>llen <key>&#x83B7;&#x5F97;&#x5217;&#x8868;&#x957F;&#x5EA6;</key></p>
<p>linsert <key>  before <value><newvalue>&#x5728;<value>&#x7684;&#x540E;&#x9762;&#x63D2;&#x5165;<newvalue>&#x63D2;&#x5165;&#x503C;</newvalue></value></newvalue></value></key></p>
<p>lrem <key><n><value>&#x4ECE;&#x5DE6;&#x8FB9;&#x5220;&#x9664;n&#x4E2A;value(&#x4ECE;&#x5DE6;&#x5230;&#x53F3;)</value></n></key></p>
<p>lset<key><index><value>&#x5C06;&#x5217;&#x8868;key&#x4E0B;&#x6807;&#x4E3A;index&#x7684;&#x503C;&#x66FF;&#x6362;&#x6210;value</value></index></key></p>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;</p>
<p>List&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E3A;&#x5FEB;&#x901F;&#x94FE;&#x8868;quickList&#x3002;</p>
<p>&#x9996;&#x5148;&#x5728;&#x5217;&#x8868;&#x5143;&#x7D20;&#x8F83;&#x5C11;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x4F7F;&#x7528;&#x4E00;&#x5757;&#x8FDE;&#x7EED;&#x7684;&#x5185;&#x5B58;&#x5B58;&#x50A8;&#xFF0C;&#x8FD9;&#x4E2A;&#x7ED3;&#x6784;&#x662F;ziplist&#xFF0C;&#x4E5F;&#x5373;&#x662F;&#x538B;&#x7F29;&#x5217;&#x8868;&#x3002;</p>
<p>&#x5B83;&#x5C06;&#x6240;&#x6709;&#x7684;&#x5143;&#x7D20;&#x7D27;&#x6328;&#x7740;&#x4E00;&#x8D77;&#x5B58;&#x50A8;&#xFF0C;&#x5206;&#x914D;&#x7684;&#x662F;&#x4E00;&#x5757;&#x8FDE;&#x7EED;&#x7684;&#x5185;&#x5B58;&#x3002;</p>
<p>&#x5F53;&#x6570;&#x636E;&#x91CF;&#x6BD4;&#x8F83;&#x591A;&#x7684;&#x65F6;&#x5019;&#x624D;&#x4F1A;&#x6539;&#x6210;quicklist&#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x666E;&#x901A;&#x7684;&#x94FE;&#x8868;&#x9700;&#x8981;&#x7684;&#x9644;&#x52A0;&#x6307;&#x9488;&#x7A7A;&#x95F4;&#x592A;&#x5927;&#xFF0C;&#x4F1A;&#x6BD4;&#x8F83;&#x6D6A;&#x8D39;&#x7A7A;&#x95F4;&#x3002;&#x6BD4;&#x5982;&#x8FD9;&#x4E2A;&#x5217;&#x8868;&#x91CC;&#x5B58;&#x7684;&#x53EA;&#x662F;int&#x7C7B;&#x578B;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7ED3;&#x6784;&#x4E0A;&#x8FD8;&#x9700;&#x8981;&#x4E24;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x6307;&#x9488;prev&#x548C;next&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/kvkbHVdQ9V3pdHYm.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Redis&#x5C06;&#x94FE;&#x8868;&#x548C;ziplist&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x7EC4;&#x6210;&#x4E86;quicklist&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x5C06;&#x591A;&#x4E2A;ziplist&#x4F7F;&#x7528;&#x53CC;&#x5411;&#x6307;&#x9488;&#x4E32;&#x8D77;&#x6765;&#x4F7F;&#x7528;&#x3002;&#x8FD9;&#x6837;&#x65E2;&#x6EE1;&#x8DB3;&#x4E86;&#x5FEB;&#x901F;&#x7684;&#x63D2;&#x5165;&#x5220;&#x9664;&#x6027;&#x80FD;&#xFF0C;&#x53C8;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x592A;&#x5927;&#x7684;&#x7A7A;&#x95F4;&#x5197;&#x4F59;&#x3002;</p>
<h2 id="34redis&#x96C6;&#x5408;set">3.4Redis&#x96C6;&#x5408;(Set)</h2>
<p>&#x7B80;&#x4ECB;</p>
<p>Redis set&#x5BF9;&#x5916;&#x63D0;&#x4F9B;&#x7684;&#x529F;&#x80FD;&#x4E0E;list&#x7C7B;&#x4F3C;&#x662F;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x7279;&#x6B8A;&#x4E4B;&#x5904;&#x5728;&#x4E8E;set&#x662F;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x6392;&#x91CD;&#x7684;&#xFF0C;&#x5F53;&#x4F60;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#x6570;&#x636E;&#xFF0C;&#x53C8;&#x4E0D;&#x5E0C;&#x671B;&#x51FA;&#x73B0;&#x91CD;&#x590D;&#x6570;&#x636E;&#x65F6;&#xFF0C;set&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x9009;&#x62E9;&#xFF0C;&#x5E76;&#x4E14;set&#x63D0;&#x4F9B;&#x4E86;&#x5224;&#x65AD;&#x67D0;&#x4E2A;&#x6210;&#x5458;&#x662F;&#x5426;&#x5728;&#x4E00;&#x4E2A;set&#x96C6;&#x5408;&#x5185;&#x7684;&#x91CD;&#x8981;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E2A;&#x4E5F;&#x662F;list&#x6240;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x7684;&#x3002;</p>
<p>Redis&#x7684;Set&#x662F;string&#x7C7B;&#x578B;&#x7684;&#x65E0;&#x5E8F;&#x96C6;&#x5408;&#x3002;&#x5B83;&#x5E95;&#x5C42;&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;value&#x4E3A;null&#x7684;hash&#x8868;&#xFF0C;&#x6240;&#x4EE5;&#x6DFB;&#x52A0;&#xFF0C;&#x5220;&#x9664;&#xFF0C;&#x67E5;&#x627E;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x90FD;&#x662F;O(1)&#x3002;</p>
<p>&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#xFF0C;&#x968F;&#x7740;&#x6570;&#x636E;&#x7684;&#x589E;&#x52A0;&#xFF0C;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x7684;&#x957F;&#x77ED;&#xFF0C;&#x5982;&#x679C;&#x662F;O(1)&#xFF0C;&#x6570;&#x636E;&#x589E;&#x52A0;&#xFF0C;&#x67E5;&#x627E;&#x6570;&#x636E;&#x7684;&#x65F6;&#x95F4;&#x4E0D;&#x53D8;</p>
<p>&#x5E38;&#x7528;&#x547D;&#x4EE4;</p>
<p>sadd <key><value1><value2> .....</value2></value1></key></p>
<p>&#x5C06;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; member &#x5143;&#x7D20;&#x52A0;&#x5165;&#x5230;&#x96C6;&#x5408; key &#x4E2D;&#xFF0C;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x7684; member &#x5143;&#x7D20;&#x5C06;&#x88AB;&#x5FFD;&#x7565;</p>
<p>smembers <key>&#x53D6;&#x51FA;&#x8BE5;&#x96C6;&#x5408;&#x7684;&#x6240;&#x6709;&#x503C;&#x3002;</key></p>
<p>sismember <key><value>&#x5224;&#x65AD;&#x96C6;&#x5408;<key>&#x662F;&#x5426;&#x4E3A;&#x542B;&#x6709;&#x8BE5;<value>&#x503C;&#xFF0C;&#x6709;1&#xFF0C;&#x6CA1;&#x6709;0</value></key></value></key></p>
<p>scard<key>&#x8FD4;&#x56DE;&#x8BE5;&#x96C6;&#x5408;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x3002;</key></p>
<p>srem <key><value1><value2> .... &#x5220;&#x9664;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x67D0;&#x4E2A;&#x5143;&#x7D20;&#x3002;</value2></value1></key></p>
<p>spop <key>&#x968F;&#x673A;&#x4ECE;&#x8BE5;&#x96C6;&#x5408;&#x4E2D;&#x5410;&#x51FA;&#x4E00;&#x4E2A;&#x503C;&#x3002;</key></p>
<p>srandmember <key><n>&#x968F;&#x673A;&#x4ECE;&#x8BE5;&#x96C6;&#x5408;&#x4E2D;&#x53D6;&#x51FA;n&#x4E2A;&#x503C;&#x3002;&#x4E0D;&#x4F1A;&#x4ECE;&#x96C6;&#x5408;&#x4E2D;&#x5220;&#x9664; &#x3002;</n></key></p>
<p>smove <source><destination>value&#x628A;&#x96C6;&#x5408;&#x4E2D;&#x4E00;&#x4E2A;&#x503C;&#x4ECE;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x79FB;&#x52A8;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x96C6;&#x5408;</destination></p>
<p>sinter <key1><key2>&#x8FD4;&#x56DE;&#x4E24;&#x4E2A;&#x96C6;&#x5408;&#x7684;&#x4EA4;&#x96C6;&#x5143;&#x7D20;&#x3002;</key2></key1></p>
<p>sunion <key1><key2>&#x8FD4;&#x56DE;&#x4E24;&#x4E2A;&#x96C6;&#x5408;&#x7684;&#x5E76;&#x96C6;&#x5143;&#x7D20;&#x3002;</key2></key1></p>
<p>sdiff <key1><key2>&#x8FD4;&#x56DE;&#x4E24;&#x4E2A;&#x96C6;&#x5408;&#x7684;&#x5DEE;&#x96C6;&#x5143;&#x7D20;(key1&#x4E2D;&#x7684;&#xFF0C;&#x4E0D;&#x5305;&#x542B;key2&#x4E2D;&#x7684;)</key2></key1></p>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;</p>
<p>Set&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;dict&#x5B57;&#x5178;&#xFF0C;&#x5B57;&#x5178;&#x662F;&#x7528;&#x54C8;&#x5E0C;&#x8868;&#x5B9E;&#x73B0;&#x7684;&#x3002;</p>
<p>Java&#x4E2D;HashSet&#x7684;&#x5185;&#x90E8;&#x5B9E;&#x73B0;&#x4F7F;&#x7528;&#x7684;&#x662F;HashMap&#xFF0C;&#x53EA;&#x4E0D;&#x8FC7;&#x6240;&#x6709;&#x7684;value&#x90FD;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;Redis&#x7684;set&#x7ED3;&#x6784;&#x4E5F;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x5B83;&#x7684;&#x5185;&#x90E8;&#x4E5F;&#x4F7F;&#x7528;hash&#x7ED3;&#x6784;&#xFF0C;&#x6240;&#x6709;&#x7684;value&#x90FD;&#x6307;&#x5411;&#x540C;&#x4E00;&#x4E2A;&#x5185;&#x90E8;&#x503C;&#x3002;</p>
<h2 id="35redis&#x54C8;&#x5E0C;hash">3.5Redis&#x54C8;&#x5E0C;(Hash)</h2>
<p>&#x7B80;&#x4ECB;</p>
<p>Redis hash &#x662F;&#x4E00;&#x4E2A;&#x952E;&#x503C;&#x5BF9;&#x96C6;&#x5408;&#x3002;</p>
<p>Redis hash&#x662F;&#x4E00;&#x4E2A;string&#x7C7B;&#x578B;&#x7684;field&#x548C;value&#x7684;&#x6620;&#x5C04;&#x8868;&#xFF0C;hash&#x7279;&#x522B;&#x9002;&#x5408;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x7C7B;&#x4F3C;Java&#x91CC;&#x9762;&#x7684;Map<string,object></string,object></p>
<p>&#x7528;&#x6237;ID&#x4E3A;&#x67E5;&#x627E;&#x7684;key&#xFF0C;&#x5B58;&#x50A8;&#x7684;value&#x7528;&#x6237;&#x5BF9;&#x8C61;&#x5305;&#x542B;&#x59D3;&#x540D;&#xFF0C;&#x5E74;&#x9F84;&#xFF0C;&#x751F;&#x65E5;&#x7B49;&#x4FE1;&#x606F;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x666E;&#x901A;&#x7684;key/value&#x7ED3;&#x6784;&#x6765;&#x5B58;&#x50A8;</p>
<p>&#x4E3B;&#x8981;&#x6709;&#x4EE5;&#x4E0B;2&#x79CD;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left"><img src="https://uploader.shimo.im/f/AeKIMoQlfh9TvSPS.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br>&#x6BCF;&#x6B21;&#x4FEE;&#x6539;&#x7528;&#x6237;&#x7684;&#x67D0;&#x4E2A;&#x5C5E;&#x6027;&#x9700;&#x8981;&#xFF0C;&#x5148;&#x53CD;&#x5E8F;&#x5217;&#x5316;&#x6539;&#x597D;&#x540E;&#x518D;&#x5E8F;&#x5217;&#x5316;&#x56DE;&#x53BB;&#x3002;&#x5F00;&#x9500;&#x8F83;&#x5927;&#x3002;</th>
<th style="text-align:left"><img src="https://uploader.shimo.im/f/4i8lsmerI9RHCFVZ.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br>&#x7528;&#x6237;ID&#x6570;&#x636E;&#x5197;&#x4F59;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><img src="https://uploader.shimo.im/f/9ciLxE7vhw1GHL4S.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br>&#x901A;&#x8FC7; key(&#x7528;&#x6237;ID) + field(&#x5C5E;&#x6027;&#x6807;&#x7B7E;) &#x5C31;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;&#x5BF9;&#x5E94;&#x5C5E;&#x6027;&#x6570;&#x636E;&#x4E86;&#xFF0C;&#x65E2;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x590D;&#x5B58;&#x50A8;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x4E0D;&#x4F1A;&#x5E26;&#x6765;&#x5E8F;&#x5217;&#x5316;&#x548C;&#x5E76;&#x53D1;&#x4FEE;&#x6539;&#x63A7;&#x5236;&#x7684;&#x95EE;&#x9898;</td>
</tr>
<tr>
<td style="text-align:left">:----</td>
</tr>
</tbody>
</table>
<p>&#x5E38;&#x7528;&#x547D;&#x4EE4;</p>
<p>hset <key><field><value>&#x7ED9;<key>&#x96C6;&#x5408;&#x4E2D;&#x7684;  <field>&#x952E;&#x8D4B;&#x503C;<value></value></field></key></value></field></key></p>
<p>hget <key1><field>&#x4ECE;<key1>&#x96C6;&#x5408;<field>&#x53D6;&#x51FA; value</field></key1></field></key1></p>
<p>hmset <key1><field1><value1><field2><value2>... &#x6279;&#x91CF;&#x8BBE;&#x7F6E;hash&#x7684;&#x503C;</value2></field2></value1></field1></key1></p>
<p>hexists<key1><field>&#x67E5;&#x770B;&#x54C8;&#x5E0C;&#x8868; key &#x4E2D;&#xFF0C;&#x7ED9;&#x5B9A;&#x57DF; field &#x662F;&#x5426;&#x5B58;&#x5728;&#x3002;</field></key1></p>
<p>hkeys <key>&#x5217;&#x51FA;&#x8BE5;hash&#x96C6;&#x5408;&#x7684;&#x6240;&#x6709;field</key></p>
<p>hvals <key>&#x5217;&#x51FA;&#x8BE5;hash&#x96C6;&#x5408;&#x7684;&#x6240;&#x6709;value</key></p>
<p>hincrby <key><field><increment>&#x4E3A;&#x54C8;&#x5E0C;&#x8868; key &#x4E2D;&#x7684;&#x57DF; field &#x7684;&#x503C;&#x52A0;&#x4E0A;&#x589E;&#x91CF; 1   -1</increment></field></key></p>
<p>hsetnx <key><field><value>&#x5C06;&#x54C8;&#x5E0C;&#x8868; key &#x4E2D;&#x7684;&#x57DF; field &#x7684;&#x503C;&#x8BBE;&#x7F6E;&#x4E3A; value &#xFF0C;&#x5F53;&#x4E14;&#x4EC5;&#x5F53;&#x57DF; field &#x4E0D;&#x5B58;&#x5728; .</value></field></key></p>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;</p>
<p>Hash&#x7C7B;&#x578B;&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x662F;&#x4E24;&#x79CD;&#xFF1A;ziplist&#xFF08;&#x538B;&#x7F29;&#x5217;&#x8868;&#xFF09;&#xFF0C;hashtable&#xFF08;&#x54C8;&#x5E0C;&#x8868;&#xFF09;&#x3002;&#x5F53;field-value&#x957F;&#x5EA6;&#x8F83;&#x77ED;&#x4E14;&#x4E2A;&#x6570;&#x8F83;&#x5C11;&#x65F6;&#xFF0C;&#x4F7F;&#x7528;ziplist&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528;hashtable&#x3002;</p>
<h2 id="36redis&#x6709;&#x5E8F;&#x96C6;&#x5408;zsetsorted-set">3.6Redis&#x6709;&#x5E8F;&#x96C6;&#x5408;Zset(sorted set)</h2>
<p>&#x7B80;&#x4ECB;</p>
<p>Redis&#x6709;&#x5E8F;&#x96C6;&#x5408;zset&#x4E0E;&#x666E;&#x901A;&#x96C6;&#x5408;set&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x91CD;&#x590D;&#x5143;&#x7D20;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x96C6;&#x5408;&#x3002;</p>
<p>&#x4E0D;&#x540C;&#x4E4B;&#x5904;&#x662F;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x7684;&#x6BCF;&#x4E2A;&#x6210;&#x5458;&#x90FD;&#x5173;&#x8054;&#x4E86;&#x4E00;&#x4E2A;&#x8BC4;&#x5206;&#xFF08;score&#xFF09;,&#x8FD9;&#x4E2A;&#x8BC4;&#x5206;&#xFF08;score&#xFF09;&#x88AB;&#x7528;&#x6765;&#x6309;&#x7167;&#x4ECE;&#x6700;&#x4F4E;&#x5206;&#x5230;&#x6700;&#x9AD8;&#x5206;&#x7684;&#x65B9;&#x5F0F;&#x6392;&#x5E8F;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6210;&#x5458;&#x3002;&#x96C6;&#x5408;&#x7684;&#x6210;&#x5458;&#x662F;&#x552F;&#x4E00;&#x7684;&#xFF0C;&#x4F46;&#x662F;&#x8BC4;&#x5206;&#x53EF;&#x4EE5;&#x662F;&#x91CD;&#x590D;&#x4E86; &#x3002;</p>
<p>&#x56E0;&#x4E3A;&#x5143;&#x7D20;&#x662F;&#x6709;&#x5E8F;&#x7684;, &#x6240;&#x4EE5;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5F88;&#x5FEB;&#x7684;&#x6839;&#x636E;&#x8BC4;&#x5206;&#xFF08;score&#xFF09;&#x6216;&#x8005;&#x6B21;&#x5E8F;&#xFF08;position&#xFF09;&#x6765;&#x83B7;&#x53D6;&#x4E00;&#x4E2A;&#x8303;&#x56F4;&#x7684;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x8BBF;&#x95EE;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x7684;&#x4E2D;&#x95F4;&#x5143;&#x7D20;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x5FEB;&#x7684;,&#x56E0;&#x6B64;&#x4F60;&#x80FD;&#x591F;&#x4F7F;&#x7528;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x91CD;&#x590D;&#x6210;&#x5458;&#x7684;&#x667A;&#x80FD;&#x5217;&#x8868;&#x3002;</p>
<p>&#x5E38;&#x7528;&#x547D;&#x4EE4;</p>
<p>zadd  <key><score1><value1><score2><value2>&#x2026;</value2></score2></value1></score1></key></p>
<p>&#x5C06;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A; member &#x5143;&#x7D20;&#x53CA;&#x5176; score &#x503C;&#x52A0;&#x5165;&#x5230;&#x6709;&#x5E8F;&#x96C6; key &#x5F53;&#x4E2D;&#x3002;</p>
<p>zrange <key><start><stop></stop>  [WITHSCORES]</start></key></p>
<p>&#x8FD4;&#x56DE;&#x6709;&#x5E8F;&#x96C6; key &#x4E2D;&#xFF0C;&#x4E0B;&#x6807;&#x5728;<start><stop></stop>&#x4E4B;&#x95F4;&#x7684;&#x5143;&#x7D20;</start></p>
<p>&#x5E26;WITHSCORES&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x5206;&#x6570;&#x4E00;&#x8D77;&#x548C;&#x503C;&#x8FD4;&#x56DE;&#x5230;&#x7ED3;&#x679C;&#x96C6;&#x3002;</p>
<p>zrangebyscore key minmax [withscores] [limit offset count]</p>
<p>&#x8FD4;&#x56DE;&#x6709;&#x5E8F;&#x96C6; key &#x4E2D;&#xFF0C;&#x6240;&#x6709; score &#x503C;&#x4ECB;&#x4E8E; min &#x548C; max &#x4E4B;&#x95F4;(&#x5305;&#x62EC;&#x7B49;&#x4E8E; min &#x6216; max )&#x7684;&#x6210;&#x5458;&#x3002;&#x6709;&#x5E8F;&#x96C6;&#x6210;&#x5458;&#x6309; score &#x503C;&#x9012;&#x589E;(&#x4ECE;&#x5C0F;&#x5230;&#x5927;)&#x6B21;&#x5E8F;&#x6392;&#x5217;&#x3002;</p>
<p>zrevrangebyscore key maxmin [withscores] [limit offset count]</p>
<p>&#x540C;&#x4E0A;&#xFF0C;&#x6539;&#x4E3A;&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x6392;&#x5217;&#x3002;</p>
<p>zincrby <key><increment><value>      &#x4E3A;&#x5143;&#x7D20;&#x7684;score&#x52A0;&#x4E0A;&#x589E;&#x91CF;</value></increment></key></p>
<p>zrem  <key><value>&#x5220;&#x9664;&#x8BE5;&#x96C6;&#x5408;&#x4E0B;&#xFF0C;&#x6307;&#x5B9A;&#x503C;&#x7684;&#x5143;&#x7D20;</value></key></p>
<p>zcount <key><min><max>&#x7EDF;&#x8BA1;&#x8BE5;&#x96C6;&#x5408;&#xFF0C;&#x5206;&#x6570;&#x533A;&#x95F4;&#x5185;&#x7684;&#x5143;&#x7D20;&#x4E2A;&#x6570;</max></min></key></p>
<p>zrank <key><value>&#x8FD4;&#x56DE;&#x8BE5;&#x503C;&#x5728;&#x96C6;&#x5408;&#x4E2D;&#x7684;&#x6392;&#x540D;&#xFF0C;&#x4ECE;0&#x5F00;&#x59CB;&#x3002;</value></key></p>
<p>&#x6848;&#x4F8B;&#xFF1A;&#x5982;&#x4F55;&#x5229;&#x7528;zset&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x6587;&#x7AE0;&#x8BBF;&#x95EE;&#x91CF;&#x7684;&#x6392;&#x884C;&#x699C;&#xFF1F;</p>
<p><img src="https://uploader.shimo.im/f/MxnxuIg8UXTKGpjl.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x6570;&#x636E;&#x7ED3;&#x6784;</p>
<p>SortedSet(zset)&#x662F;Redis&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x7279;&#x522B;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x4E00;&#x65B9;&#x9762;&#x5B83;&#x7B49;&#x4EF7;&#x4E8E;Java&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;Map<string, double="">&#xFF0C;&#x53EF;&#x4EE5;&#x7ED9;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;value&#x8D4B;&#x4E88;&#x4E00;&#x4E2A;&#x6743;&#x91CD;score&#xFF0C;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#x5B83;&#x53C8;&#x7C7B;&#x4F3C;&#x4E8E;TreeSet&#xFF0C;&#x5185;&#x90E8;&#x7684;&#x5143;&#x7D20;&#x4F1A;&#x6309;&#x7167;&#x6743;&#x91CD;score&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#xFF0C;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x540D;&#x6B21;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;score&#x7684;&#x8303;&#x56F4;&#x6765;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x7684;&#x5217;&#x8868;&#x3002;</string,></p>
<p>zset&#x5E95;&#x5C42;&#x4F7F;&#x7528;&#x4E86;&#x4E24;&#x4E2A;&#x6570;&#x636E;&#x7ED3;&#x6784;</p>
<p>&#xFF08;1&#xFF09;hash&#xFF0C;hash&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x5173;&#x8054;&#x5143;&#x7D20;value&#x548C;&#x6743;&#x91CD;score&#xFF0C;&#x4FDD;&#x969C;&#x5143;&#x7D20;value&#x7684;&#x552F;&#x4E00;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5143;&#x7D20;value&#x627E;&#x5230;&#x76F8;&#x5E94;&#x7684;score&#x503C;&#x3002;</p>
<p>&#xFF08;2&#xFF09;&#x8DF3;&#x8DC3;&#x8868;&#xFF0C;&#x8DF3;&#x8DC3;&#x8868;&#x7684;&#x76EE;&#x7684;&#x5728;&#x4E8E;&#x7ED9;&#x5143;&#x7D20;value&#x6392;&#x5E8F;&#xFF0C;&#x6839;&#x636E;score&#x7684;&#x8303;&#x56F4;&#x83B7;&#x53D6;&#x5143;&#x7D20;&#x5217;&#x8868;&#x3002;</p>
<p>&#x8DF3;&#x8DC3;&#x8868;&#xFF08;&#x8DF3;&#x8868;&#xFF09;</p>
<p>1&#x3001;&#x7B80;&#x4ECB;</p>
<p>&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x5728;&#x751F;&#x6D3B;&#x4E2D;&#x6BD4;&#x8F83;&#x5E38;&#x89C1;&#xFF0C;&#x4F8B;&#x5982;&#x6839;&#x636E;&#x6210;&#x7EE9;&#x5BF9;&#x5B66;&#x751F;&#x6392;&#x540D;&#xFF0C;&#x6839;&#x636E;&#x5F97;&#x5206;&#x5BF9;&#x73A9;&#x5BB6;&#x6392;&#x540D;&#x7B49;&#x3002;&#x5BF9;&#x4E8E;&#x6709;&#x5E8F;&#x96C6;&#x5408;&#x7684;&#x5E95;&#x5C42;&#x5B9E;&#x73B0;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x6570;&#x7EC4;&#x3001;&#x5E73;&#x8861;&#x6811;&#x3001;&#x94FE;&#x8868;&#x7B49;&#x3002;&#x6570;&#x7EC4;&#x4E0D;&#x4FBF;&#x5143;&#x7D20;&#x7684;&#x63D2;&#x5165;&#x3001;&#x5220;&#x9664;&#xFF1B;&#x5E73;&#x8861;&#x6811;&#x6216;&#x7EA2;&#x9ED1;&#x6811;&#x867D;&#x7136;&#x6548;&#x7387;&#x9AD8;&#x4F46;&#x7ED3;&#x6784;&#x590D;&#x6742;&#xFF1B;&#x94FE;&#x8868;&#x67E5;&#x8BE2;&#x9700;&#x8981;&#x904D;&#x5386;&#x6240;&#x6709;&#x6548;&#x7387;&#x4F4E;&#x3002;Redis&#x91C7;&#x7528;&#x7684;&#x662F;&#x8DF3;&#x8DC3;&#x8868;&#x3002;&#x8DF3;&#x8DC3;&#x8868;&#x6548;&#x7387;&#x582A;&#x6BD4;&#x7EA2;&#x9ED1;&#x6811;&#xFF0C;&#x5B9E;&#x73B0;&#x8FDC;&#x6BD4;&#x7EA2;&#x9ED1;&#x6811;&#x7B80;&#x5355;&#x3002;</p>
<p>2&#x3001;&#x5B9E;&#x4F8B;</p>
<p>&#x5BF9;&#x6BD4;&#x6709;&#x5E8F;&#x94FE;&#x8868;&#x548C;&#x8DF3;&#x8DC3;&#x8868;&#xFF0C;&#x4ECE;&#x94FE;&#x8868;&#x4E2D;&#x67E5;&#x8BE2;&#x51FA;51</p>
<p>&#x6709;&#x5E8F;&#x94FE;&#x8868;</p>
<p><img src="https://uploader.shimo.im/f/HZFShRUHLxzwjVvO.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x8981;&#x67E5;&#x627E;&#x503C;&#x4E3A;51&#x7684;&#x5143;&#x7D20;&#xFF0C;&#x9700;&#x8981;&#x4ECE;&#x7B2C;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x5F00;&#x59CB;&#x4F9D;&#x6B21;&#x67E5;&#x627E;&#x3001;&#x6BD4;&#x8F83;&#x624D;&#x80FD;&#x627E;&#x5230;&#x3002;&#x5171;&#x9700;&#x8981;6&#x6B21;&#x6BD4;&#x8F83;&#x3002;</p>
<p>&#x8DF3;&#x8DC3;&#x8868;</p>
<p><img src="https://uploader.shimo.im/f/jlLGDiINl9qxeSiX.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4ECE;&#x7B2C;2&#x5C42;&#x5F00;&#x59CB;&#xFF0C;1&#x8282;&#x70B9;&#x6BD4;51&#x8282;&#x70B9;&#x5C0F;&#xFF0C;&#x5411;&#x540E;&#x6BD4;&#x8F83;&#x3002;</p>
<p>21&#x8282;&#x70B9;&#x6BD4;51&#x8282;&#x70B9;&#x5C0F;&#xFF0C;&#x7EE7;&#x7EED;&#x5411;&#x540E;&#x6BD4;&#x8F83;&#xFF0C;&#x540E;&#x9762;&#x5C31;&#x662F;NULL&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4ECE;21&#x8282;&#x70B9;&#x5411;&#x4E0B;&#x5230;&#x7B2C;1&#x5C42;</p>
<p>&#x5728;&#x7B2C;1&#x5C42;&#xFF0C;41&#x8282;&#x70B9;&#x6BD4;51&#x8282;&#x70B9;&#x5C0F;&#xFF0C;&#x7EE7;&#x7EED;&#x5411;&#x540E;&#xFF0C;61&#x8282;&#x70B9;&#x6BD4;51&#x8282;&#x70B9;&#x5927;&#xFF0C;&#x6240;&#x4EE5;&#x4ECE;41&#x5411;&#x4E0B;</p>
<p>&#x5728;&#x7B2C;0&#x5C42;&#xFF0C;51&#x8282;&#x70B9;&#x4E3A;&#x8981;&#x67E5;&#x627E;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x8282;&#x70B9;&#x88AB;&#x627E;&#x5230;&#xFF0C;&#x5171;&#x67E5;&#x627E;4&#x6B21;&#x3002;</p>
<p>&#x4ECE;&#x6B64;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x8DF3;&#x8DC3;&#x8868;&#x6BD4;&#x6709;&#x5E8F;&#x94FE;&#x8868;&#x6548;&#x7387;&#x8981;&#x9AD8;</p>
<h1 id="4redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECB;&#x7ECD;">4.Redis&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4ECB;&#x7ECD;</h1>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x76EE;&#x5F55;&#xFF1A;/myredis/redis.conf</p>
<h3 id="units&#x5355;&#x4F4D;">Units&#x5355;&#x4F4D;</h3>
<p>&#x914D;&#x7F6E;&#x5927;&#x5C0F;&#x5355;&#x4F4D;,&#x5F00;&#x5934;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E9B;&#x57FA;&#x672C;&#x7684;&#x5EA6;&#x91CF;&#x5355;&#x4F4D;&#xFF0C;&#x53EA;&#x652F;&#x6301;bytes&#xFF0C;&#x4E0D;&#x652F;&#x6301;bit</p>
<p>&#x5927;&#x5C0F;&#x5199;&#x4E0D;&#x654F;&#x611F;</p>
<p><img src="https://uploader.shimo.im/f/GC8OtsSTEsn7iuEC.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="includes&#x5305;&#x542B;">INCLUDES&#x5305;&#x542B;</h3>
<p><img src="https://uploader.shimo.im/f/DrR3w3apjdhgugDD.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x7C7B;&#x4F3C;jsp&#x4E2D;&#x7684;include&#xFF0C;&#x591A;&#x5B9E;&#x4F8B;&#x7684;&#x60C5;&#x51B5;&#x53EF;&#x4EE5;&#x628A;&#x516C;&#x7528;&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x63D0;&#x53D6;&#x51FA;&#x6765;</p>
<h3 id="&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E;">&#x7F51;&#x7EDC;&#x76F8;&#x5173;&#x914D;&#x7F6E;</h3>
<p>bind</p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;bind=127.0.0.1&#x53EA;&#x80FD;&#x63A5;&#x53D7;&#x672C;&#x673A;&#x7684;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;</p>
<p>&#x4E0D;&#x5199;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x65E0;&#x9650;&#x5236;&#x63A5;&#x53D7;&#x4EFB;&#x4F55;ip&#x5730;&#x5740;&#x7684;&#x8BBF;&#x95EE;</p>
<p>&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x80AF;&#x5B9A;&#x8981;&#x5199;&#x4F60;&#x5E94;&#x7528;&#x670D;&#x52A1;&#x5668;&#x7684;&#x5730;&#x5740;&#xFF1B;&#x670D;&#x52A1;&#x5668;&#x662F;&#x9700;&#x8981;&#x8FDC;&#x7A0B;&#x8BBF;&#x95EE;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x5C06;&#x5176;&#x6CE8;&#x91CA;&#x6389;</p>
<p>&#x5982;&#x679C;&#x5F00;&#x542F;&#x4E86;protected-mode&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x6CA1;&#x6709;&#x8BBE;&#x5B9A;bind ip&#x4E14;&#x6CA1;&#x6709;&#x8BBE;&#x5BC6;&#x7801;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Redis&#x53EA;&#x5141;&#x8BB8;&#x63A5;&#x53D7;&#x672C;&#x673A;&#x7684;&#x54CD;&#x5E94;</p>
<p><img src="https://uploader.shimo.im/f/GePGQ7B9gklJNFlT.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4FDD;&#x5B58;&#x914D;&#x7F6E;&#xFF0C;&#x505C;&#x6B62;&#x670D;&#x52A1;&#xFF0C;&#x91CD;&#x542F;&#x542F;&#x52A8;&#x67E5;&#x770B;&#x8FDB;&#x7A0B;&#xFF0C;&#x4E0D;&#x518D;&#x662F;&#x672C;&#x673A;&#x8BBF;&#x95EE;&#x4E86;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/P26fgfjcEIpc3CxL.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>protected-mode</p>
<p>&#x5C06;&#x672C;&#x673A;&#x8BBF;&#x95EE;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x8BBE;&#x7F6E;no</p>
<p><img src="https://uploader.shimo.im/f/dO0SAbrAjJHIghfD.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Port</p>
<p>&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x9ED8;&#x8BA4; 6379</p>
<p><img src="https://uploader.shimo.im/f/arwGWdtEz9sdmQve.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>tcp-backlog</p>
<p>&#x8BBE;&#x7F6E;tcp&#x7684;backlog&#xFF0C;backlog&#x5176;&#x5B9E;&#x662F;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x961F;&#x5217;&#xFF0C;backlog&#x961F;&#x5217;&#x603B;&#x548C;=&#x672A;&#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x961F;&#x5217; + &#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E09;&#x6B21;&#x63E1;&#x624B;&#x961F;&#x5217;&#x3002;</p>
<p>&#x5728;&#x9AD8;&#x5E76;&#x53D1;&#x73AF;&#x5883;&#x4E0B;&#x4F60;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x9AD8;backlog&#x503C;&#x6765;&#x907F;&#x514D;&#x6162;&#x5BA2;&#x6237;&#x7AEF;&#x8FDE;&#x63A5;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x6CE8;&#x610F;Linux&#x5185;&#x6838;&#x4F1A;&#x5C06;&#x8FD9;&#x4E2A;&#x503C;&#x51CF;&#x5C0F;&#x5230;/proc/sys/net/core/somaxconn&#x7684;&#x503C;&#xFF08;128&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;&#x786E;&#x8BA4;&#x589E;&#x5927;/proc/sys/net/core/somaxconn&#x548C;/proc/sys/net/ipv4/tcp_max_syn_backlog&#xFF08;128&#xFF09;&#x4E24;&#x4E2A;&#x503C;&#x6765;&#x8FBE;&#x5230;&#x60F3;&#x8981;&#x7684;&#x6548;&#x679C;</p>
<p><img src="https://uploader.shimo.im/f/rl7wesVxuHiDFxZt.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>timeout</p>
<p>&#x4E00;&#x4E2A;&#x7A7A;&#x95F2;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7EF4;&#x6301;&#x591A;&#x5C11;&#x79D2;&#x4F1A;&#x5173;&#x95ED;&#xFF0C;0&#x8868;&#x793A;&#x5173;&#x95ED;&#x8BE5;&#x529F;&#x80FD;&#x3002;&#x5373;&#x6C38;&#x4E0D;&#x5173;&#x95ED;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/1oAwWsDqi05NiFGv.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>tcp-keepalive</p>
<p>&#x5BF9;&#x8BBF;&#x95EE;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x4E00;&#x79CD;&#x5FC3;&#x8DF3;&#x68C0;&#x6D4B;&#xFF0C;&#x6BCF;&#x4E2A;n&#x79D2;&#x68C0;&#x6D4B;&#x4E00;&#x6B21;&#x3002;</p>
<p>&#x5355;&#x4F4D;&#x4E3A;&#x79D2;&#xFF0C;&#x5982;&#x679C;&#x8BBE;&#x7F6E;&#x4E3A;0&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;Keepalive&#x68C0;&#x6D4B;&#xFF0C;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x6210;60</p>
<p><img src="https://uploader.shimo.im/f/euOSduXnJ9Vn7hz6.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="general&#x901A;&#x7528;">GENERAL&#x901A;&#x7528;</h3>
<p>daemonize</p>
<p>&#x662F;&#x5426;&#x4E3A;&#x540E;&#x53F0;&#x8FDB;&#x7A0B;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E3A;yes</p>
<p>&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF0C;&#x540E;&#x53F0;&#x542F;&#x52A8;</p>
<p><img src="https://uploader.shimo.im/f/v2NRk4YGwvzWZ49J.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>pidfile</p>
<p>&#x5B58;&#x653E;pid&#x6587;&#x4EF6;&#x7684;&#x4F4D;&#x7F6E;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B9E;&#x4F8B;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x4E0D;&#x540C;&#x7684;pid&#x6587;&#x4EF6;</p>
<p><img src="https://uploader.shimo.im/f/5urmOEsECjvNatZL.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>loglevel</p>
<p>&#x6307;&#x5B9A;&#x65E5;&#x5FD7;&#x8BB0;&#x5F55;&#x7EA7;&#x522B;&#xFF0C;Redis&#x603B;&#x5171;&#x652F;&#x6301;&#x56DB;&#x4E2A;&#x7EA7;&#x522B;&#xFF1A;debug&#x3001;verbose&#x3001;notice&#x3001;warning&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;notice</p>
<p>&#x56DB;&#x4E2A;&#x7EA7;&#x522B;&#x6839;&#x636E;&#x4F7F;&#x7528;&#x9636;&#x6BB5;&#x6765;&#x9009;&#x62E9;&#xFF0C;&#x751F;&#x4EA7;&#x73AF;&#x5883;&#x9009;&#x62E9;notice &#x6216;&#x8005;warning</p>
<p><img src="https://uploader.shimo.im/f/QvfsddiqNfDHIgSo.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>logfile</p>
<p>&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x540D;&#x79F0;</p>
<p><img src="https://uploader.shimo.im/f/flludylyV1EQT7LC.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>databases 16</p>
<p>&#x8BBE;&#x5B9A;&#x5E93;&#x7684;&#x6570;&#x91CF; &#x9ED8;&#x8BA4;16&#xFF0C;&#x9ED8;&#x8BA4;&#x6570;&#x636E;&#x5E93;&#x4E3A;0&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;SELECT <dbid>&#x547D;&#x4EE4;&#x5728;&#x8FDE;&#x63A5;&#x4E0A;&#x6307;&#x5B9A;&#x6570;&#x636E;&#x5E93;id</dbid></p>
<p><img src="https://uploader.shimo.im/f/ep0CX3JsQZOSa30A.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h3 id="security&#x5B89;&#x5168;">SECURITY&#x5B89;&#x5168;</h3>
<p>&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;</p>
<p><img src="https://uploader.shimo.im/f/iKnzoxKM5UYUkHXd.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x8BBF;&#x95EE;&#x5BC6;&#x7801;&#x7684;&#x67E5;&#x770B;&#x3001;&#x8BBE;&#x7F6E;&#x548C;&#x53D6;&#x6D88;</p>
<p>&#x5728;&#x547D;&#x4EE4;&#x4E2D;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;&#xFF0C;&#x53EA;&#x662F;&#x4E34;&#x65F6;&#x7684;&#x3002;&#x91CD;&#x542F;redis&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5BC6;&#x7801;&#x5C31;&#x8FD8;&#x539F;&#x4E86;&#x3002;</p>
<p>&#x6C38;&#x4E45;&#x8BBE;&#x7F6E;&#xFF0C;&#x9700;&#x8981;&#x518D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/gSlLrtEGl3wJhiY3.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h4 id="">#</h4>
<p>LIMITS&#x9650;&#x5236;</p>
<p>maxclients</p>
<p>&#x8BBE;&#x7F6E;redis&#x540C;&#x65F6;&#x53EF;&#x4EE5;&#x4E0E;&#x591A;&#x5C11;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x8FDB;&#x884C;&#x8FDE;&#x63A5;&#x3002;</p>
<p>&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#x4E3A;10000&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x3002;</p>
<p>&#x5982;&#x679C;&#x8FBE;&#x5230;&#x4E86;&#x6B64;&#x9650;&#x5236;&#xFF0C;redis&#x5219;&#x4F1A;&#x62D2;&#x7EDD;&#x65B0;&#x7684;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x5E76;&#x4E14;&#x5411;&#x8FD9;&#x4E9B;&#x8FDE;&#x63A5;&#x8BF7;&#x6C42;&#x65B9;&#x53D1;&#x51FA;&#x201C;max number of clients reached&#x201D;&#x4EE5;&#x4F5C;&#x56DE;&#x5E94;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/BjU8f1XBeCJbJB9w.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>maxmemory</p>
<p>&#x5EFA;&#x8BAE;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#xFF0C;&#x5426;&#x5219;&#xFF0C;&#x5C06;&#x5185;&#x5B58;&#x5360;&#x6EE1;&#xFF0C;&#x9020;&#x6210;&#x670D;&#x52A1;&#x5668;&#x5B95;&#x673A;</p>
<p>&#x8BBE;&#x7F6E;redis&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7684;&#x5185;&#x5B58;&#x91CF;&#x3002;&#x4E00;&#x65E6;&#x5230;&#x8FBE;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x4E0A;&#x9650;&#xFF0C;redis&#x5C06;&#x4F1A;&#x8BD5;&#x56FE;&#x79FB;&#x9664;&#x5185;&#x90E8;&#x6570;&#x636E;&#xFF0C;&#x79FB;&#x9664;&#x89C4;&#x5219;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;maxmemory-policy&#x6765;&#x6307;&#x5B9A;&#x3002;</p>
<p>&#x5982;&#x679C;redis&#x65E0;&#x6CD5;&#x6839;&#x636E;&#x79FB;&#x9664;&#x89C4;&#x5219;&#x6765;&#x79FB;&#x9664;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6216;&#x8005;&#x8BBE;&#x7F6E;&#x4E86;&#x201C;&#x4E0D;&#x5141;&#x8BB8;&#x79FB;&#x9664;&#x201D;&#xFF0C;&#x90A3;&#x4E48;redis&#x5219;&#x4F1A;&#x9488;&#x5BF9;&#x90A3;&#x4E9B;&#x9700;&#x8981;&#x7533;&#x8BF7;&#x5185;&#x5B58;&#x7684;&#x6307;&#x4EE4;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;SET&#x3001;LPUSH&#x7B49;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x65E0;&#x5185;&#x5B58;&#x7533;&#x8BF7;&#x7684;&#x6307;&#x4EE4;&#xFF0C;&#x4ECD;&#x7136;&#x4F1A;&#x6B63;&#x5E38;&#x54CD;&#x5E94;&#xFF0C;&#x6BD4;&#x5982;GET&#x7B49;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7684;redis&#x662F;&#x4E3B;redis&#xFF08;&#x8BF4;&#x660E;&#x4F60;&#x7684;redis&#x6709;&#x4ECE;redis&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x5728;&#x8BBE;&#x7F6E;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x4E0A;&#x9650;&#x65F6;&#xFF0C;&#x9700;&#x8981;&#x5728;&#x7CFB;&#x7EDF;&#x4E2D;&#x7559;&#x51FA;&#x4E00;&#x4E9B;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#x7ED9;&#x540C;&#x6B65;&#x961F;&#x5217;&#x7F13;&#x5B58;&#xFF0C;&#x53EA;&#x6709;&#x5728;&#x4F60;&#x8BBE;&#x7F6E;&#x7684;&#x662F;&#x201C;&#x4E0D;&#x79FB;&#x9664;&#x201D;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x624D;&#x4E0D;&#x7528;&#x8003;&#x8651;&#x8FD9;&#x4E2A;&#x56E0;&#x7D20;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/Rtmayho8x1J0LmqH.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>maxmemory-policy</p>
<p>volatile-lru&#xFF1A;&#x4F7F;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;key&#xFF0C;&#x53EA;&#x5BF9;&#x8BBE;&#x7F6E;&#x4E86;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x952E;&#xFF1B;&#xFF08;&#x6700;&#x8FD1;&#x6700;&#x5C11;&#x4F7F;&#x7528;&#xFF09;</p>
<p>allkeys-lru&#xFF1A;&#x5728;&#x6240;&#x6709;&#x96C6;&#x5408;key&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;LRU&#x7B97;&#x6CD5;&#x79FB;&#x9664;key</p>
<p>volatile-random&#xFF1A;&#x5728;&#x8FC7;&#x671F;&#x96C6;&#x5408;&#x4E2D;&#x79FB;&#x9664;&#x968F;&#x673A;&#x7684;key&#xFF0C;&#x53EA;&#x5BF9;&#x8BBE;&#x7F6E;&#x4E86;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x952E;</p>
<p>allkeys-random&#xFF1A;&#x5728;&#x6240;&#x6709;&#x96C6;&#x5408;key&#x4E2D;&#xFF0C;&#x79FB;&#x9664;&#x968F;&#x673A;&#x7684;key</p>
<p>volatile-ttl&#xFF1A;&#x79FB;&#x9664;&#x90A3;&#x4E9B;TTL&#x503C;&#x6700;&#x5C0F;&#x7684;key&#xFF0C;&#x5373;&#x90A3;&#x4E9B;&#x6700;&#x8FD1;&#x8981;&#x8FC7;&#x671F;&#x7684;key</p>
<p>noeviction&#xFF1A;&#x4E0D;&#x8FDB;&#x884C;&#x79FB;&#x9664;&#x3002;&#x9488;&#x5BF9;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x53EA;&#x662F;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x4FE1;&#x606F;</p>
<p><img src="https://uploader.shimo.im/f/JxauDb0ivfaVsLoC.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>maxmemory-samples</p>
<p>&#x8BBE;&#x7F6E;&#x6837;&#x672C;&#x6570;&#x91CF;&#xFF0C;LRU&#x7B97;&#x6CD5;&#x548C;&#x6700;&#x5C0F;TTL&#x7B97;&#x6CD5;&#x90FD;&#x5E76;&#x975E;&#x662F;&#x7CBE;&#x786E;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x800C;&#x662F;&#x4F30;&#x7B97;&#x503C;&#xFF0C;&#x6240;&#x4EE5;&#x4F60;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x6837;&#x672C;&#x7684;&#x5927;&#x5C0F;&#xFF0C;redis&#x9ED8;&#x8BA4;&#x4F1A;&#x68C0;&#x67E5;&#x8FD9;&#x4E48;&#x591A;&#x4E2A;key&#x5E76;&#x9009;&#x62E9;&#x5176;&#x4E2D;LRU&#x7684;&#x90A3;&#x4E2A;&#x3002;</p>
<p>&#x4E00;&#x822C;&#x8BBE;&#x7F6E;3&#x5230;7&#x7684;&#x6570;&#x5B57;&#xFF0C;&#x6570;&#x503C;&#x8D8A;&#x5C0F;&#x6837;&#x672C;&#x8D8A;&#x4E0D;&#x51C6;&#x786E;&#xFF0C;&#x4F46;&#x6027;&#x80FD;&#x6D88;&#x8017;&#x8D8A;&#x5C0F;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/hFA4B2hPEeUQG4xo.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h1 id="5redis&#x7684;&#x53D1;&#x5E03;&#x548C;&#x8BA2;&#x9605;">5.Redis&#x7684;&#x53D1;&#x5E03;&#x548C;&#x8BA2;&#x9605;</h1>
<p>&#x4EC0;&#x4E48;&#x662F;&#x53D1;&#x5E03;&#x548C;&#x8BA2;&#x9605;</p>
<p>Redis &#x53D1;&#x5E03;&#x8BA2;&#x9605; (pub/sub) &#x662F;&#x4E00;&#x79CD;&#x6D88;&#x606F;&#x901A;&#x4FE1;&#x6A21;&#x5F0F;&#xFF1A;&#x53D1;&#x9001;&#x8005; (pub) &#x53D1;&#x9001;&#x6D88;&#x606F;&#xFF0C;&#x8BA2;&#x9605;&#x8005; (sub) &#x63A5;&#x6536;&#x6D88;&#x606F;&#x3002;</p>
<p>Redis &#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x8BA2;&#x9605;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x9891;&#x9053;&#x3002;</p>
<p>Redis&#x7684;&#x53D1;&#x5E03;&#x548C;&#x8BA2;&#x9605;</p>
<p>1&#x3001;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x8BA2;&#x9605;&#x9891;&#x9053;&#x5982;&#x4E0B;&#x56FE;</p>
<p><img src="https://uploader.shimo.im/f/QTxGRNgcvUyzf6LE.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>2&#x3001;&#x5F53;&#x7ED9;&#x8FD9;&#x4E2A;&#x9891;&#x9053;&#x53D1;&#x5E03;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x6D88;&#x606F;&#x5C31;&#x4F1A;&#x53D1;&#x9001;&#x7ED9;&#x8BA2;&#x9605;&#x7684;&#x5BA2;&#x6237;&#x7AEF;</p>
<p><img src="https://uploader.shimo.im/f/eAhHs8uqdiMXUYxq.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x53D1;&#x5E03;&#x8BA2;&#x9605;&#x547D;&#x4EE4;&#x884C;&#x5B9E;&#x73B0;</p>
<p>&#x6253;&#x5F00;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x8BA2;&#x9605;channel1</p>
<p>SUBSCRIBE channel1</p>
<p><img src="https://uploader.shimo.im/f/U18KR07n0q8fRvZE.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>2&#x3001;&#x6253;&#x5F00;&#x53E6;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x7ED9;channel1&#x53D1;&#x5E03;&#x6D88;&#x606F;hello</p>
<p>publish channel1 hello</p>
<p><img src="https://uploader.shimo.im/f/2ZWteVUqZP5pVG4p.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x8FD4;&#x56DE;&#x7684;1&#x662F;&#x8BA2;&#x9605;&#x8005;&#x6570;&#x91CF;</p>
<p>3&#x3001;&#x6253;&#x5F00;&#x7B2C;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;</p>
<p><img src="https://uploader.shimo.im/f/x49CA4QHtvXKDLFP.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x6CE8;&#xFF1A;&#x53D1;&#x5E03;&#x7684;&#x6D88;&#x606F;&#x6CA1;&#x6709;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x8BA2;&#x9605;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x6536;&#x4E0D;&#x5230;hello&#xFF0C;&#x53EA;&#x80FD;&#x6536;&#x5230;&#x8BA2;&#x9605;&#x540E;&#x53D1;&#x5E03;&#x7684;&#x6D88;&#x606F;</p>
<h1 id="6redis&#x65B0;&#x6570;&#x636E;&#x7C7B;&#x578B;">6.Redis&#x65B0;&#x6570;&#x636E;&#x7C7B;&#x578B;</h1>
<p>Bitmaps</p>
<p>&#x7B80;&#x4ECB;</p>
<p>&#x73B0;&#x4EE3;&#x8BA1;&#x7B97;&#x673A;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#xFF08;&#x4F4D;&#xFF09; &#x4F5C;&#x4E3A;&#x4FE1;&#x606F;&#x7684;&#x57FA;&#x7840;&#x5355;&#x4F4D;&#xFF0C; 1&#x4E2A;&#x5B57;&#x8282;&#x7B49;&#x4E8E;8&#x4F4D;&#xFF0C; &#x4F8B;&#x5982;&#x201C;abc&#x201D;&#x5B57;&#x7B26;&#x4E32;&#x662F;&#x7531;3&#x4E2A;&#x5B57;&#x8282;&#x7EC4;&#x6210;&#xFF0C; &#x4F46;&#x5B9E;&#x9645;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x5B58;&#x50A8;&#x65F6;&#x5C06;&#x5176;&#x7528;&#x4E8C;&#x8FDB;&#x5236;&#x8868;&#x793A;&#xFF0C; &#x201C;abc&#x201D;&#x5206;&#x522B;&#x5BF9;&#x5E94;&#x7684;ASCII&#x7801;&#x5206;&#x522B;&#x662F;97&#x3001; 98&#x3001; 99&#xFF0C; &#x5BF9;&#x5E94;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5206;&#x522B;&#x662F;01100001&#x3001; 01100010&#x548C;01100011&#xFF0C;&#x5982;&#x4E0B;&#x56FE;</p>
<p><img src="https://uploader.shimo.im/f/AcTEDCLcsTgJgzZF.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5408;&#x7406;&#x5730;&#x4F7F;&#x7528;&#x64CD;&#x4F5C;&#x4F4D;&#x80FD;&#x591F;&#x6709;&#x6548;&#x5730;&#x63D0;&#x9AD8;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x7387;&#x548C;&#x5F00;&#x53D1;&#x6548;&#x7387;&#x3002;</p>
<p>Redis&#x63D0;&#x4F9B;&#x4E86;Bitmaps&#x8FD9;&#x4E2A;&#x201C;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x201D;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5BF9;&#x4F4D;&#x7684;&#x64CD;&#x4F5C;&#xFF1A;</p>
<p>Bitmaps&#x672C;&#x8EAB;&#x4E0D;&#x662F;&#x4E00;&#x79CD;&#x6570;&#x636E;&#x7C7B;&#x578B;&#xFF0C; &#x5B9E;&#x9645;&#x4E0A;&#x5B83;&#x5C31;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF08;key-value&#xFF09; &#xFF0C; &#x4F46;&#x662F;&#x5B83;&#x53EF;&#x4EE5;&#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x4F4D;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;</p>
<p>Bitmaps&#x5355;&#x72EC;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x5957;&#x547D;&#x4EE4;&#xFF0C; &#x6240;&#x4EE5;&#x5728;Redis&#x4E2D;&#x4F7F;&#x7528;Bitmaps&#x548C;&#x4F7F;&#x7528;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x65B9;&#x6CD5;&#x4E0D;&#x592A;&#x76F8;&#x540C;&#x3002; &#x53EF;&#x4EE5;&#x628A;Bitmaps&#x60F3;&#x8C61;&#x6210;&#x4E00;&#x4E2A;&#x4EE5;&#x4F4D;&#x4E3A;&#x5355;&#x4F4D;&#x7684;&#x6570;&#x7EC4;&#xFF0C; &#x6570;&#x7EC4;&#x7684;&#x6BCF;&#x4E2A;&#x5355;&#x5143;&#x53EA;&#x80FD;&#x5B58;&#x50A8;0&#x548C;1&#xFF0C; &#x6570;&#x7EC4;&#x7684;&#x4E0B;&#x6807;&#x5728;Bitmaps&#x4E2D;&#x53EB;&#x505A;&#x504F;&#x79FB;&#x91CF;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/11kumXOcFBEOtYz3.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x547D;&#x4EE4;</p>
<p>1&#x3001;setbit</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>setbit<key><offset><value>&#x8BBE;&#x7F6E;Bitmaps&#x4E2D;&#x67D0;&#x4E2A;&#x504F;&#x79FB;&#x91CF;&#x7684;&#x503C;&#xFF08;0&#x6216;1&#xFF09;</value></offset></key></p>
<p><img src="https://uploader.shimo.im/f/J1LHqvkFeUc8Blfc.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>*offset:&#x504F;&#x79FB;&#x91CF;&#x4ECE;0&#x5F00;&#x59CB;</p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p>&#x6BCF;&#x4E2A;&#x72EC;&#x7ACB;&#x7528;&#x6237;&#x662F;&#x5426;&#x8BBF;&#x95EE;&#x8FC7;&#x7F51;&#x7AD9;&#x5B58;&#x653E;&#x5728;Bitmaps&#x4E2D;&#xFF0C; &#x5C06;&#x8BBF;&#x95EE;&#x7684;&#x7528;&#x6237;&#x8BB0;&#x505A;1&#xFF0C; &#x6CA1;&#x6709;&#x8BBF;&#x95EE;&#x7684;&#x7528;&#x6237;&#x8BB0;&#x505A;0&#xFF0C; &#x7528;&#x504F;&#x79FB;&#x91CF;&#x4F5C;&#x4E3A;&#x7528;&#x6237;&#x7684;id&#x3002;</p>
<p>&#x8BBE;&#x7F6E;&#x952E;&#x7684;&#x7B2C;offset&#x4E2A;&#x4F4D;&#x7684;&#x503C;&#xFF08;&#x4ECE;0&#x7B97;&#x8D77;&#xFF09; &#xFF0C; &#x5047;&#x8BBE;&#x73B0;&#x5728;&#x6709;20&#x4E2A;&#x7528;&#x6237;&#xFF0C;userid=1&#xFF0C; 6&#xFF0C; 11&#xFF0C; 15&#xFF0C; 19&#x7684;&#x7528;&#x6237;&#x5BF9;&#x7F51;&#x7AD9;&#x8FDB;&#x884C;&#x4E86;&#x8BBF;&#x95EE;&#xFF0C; &#x90A3;&#x4E48;&#x5F53;&#x524D;Bitmaps&#x521D;&#x59CB;&#x5316;&#x7ED3;&#x679C;&#x5982;&#x56FE;</p>
<p><img src="https://uploader.shimo.im/f/eM22d4oTQIkOY7NO.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>unique:users:20201106&#x4EE3;&#x8868;2020-11-06&#x8FD9;&#x5929;&#x7684;&#x72EC;&#x7ACB;&#x8BBF;&#x95EE;&#x7528;&#x6237;&#x7684;Bitmaps</p>
<p><img src="https://uploader.shimo.im/f/GCHaVutcGK04NuXd.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x6CE8;&#xFF1A;</p>
<p>&#x5F88;&#x591A;&#x5E94;&#x7528;&#x7684;&#x7528;&#x6237;id&#x4EE5;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x6570;&#x5B57;&#xFF08;&#x4F8B;&#x5982;10000&#xFF09; &#x5F00;&#x5934;&#xFF0C; &#x76F4;&#x63A5;&#x5C06;&#x7528;&#x6237;id&#x548C;Bitmaps&#x7684;&#x504F;&#x79FB;&#x91CF;&#x5BF9;&#x5E94;&#x52BF;&#x5FC5;&#x4F1A;&#x9020;&#x6210;&#x4E00;&#x5B9A;&#x7684;&#x6D6A;&#x8D39;&#xFF0C; &#x901A;&#x5E38;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x6BCF;&#x6B21;&#x505A;setbit&#x64CD;&#x4F5C;&#x65F6;&#x5C06;&#x7528;&#x6237;id&#x51CF;&#x53BB;&#x8FD9;&#x4E2A;&#x6307;&#x5B9A;&#x6570;&#x5B57;&#x3002;</p>
<p>&#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x521D;&#x59CB;&#x5316;Bitmaps&#x65F6;&#xFF0C; &#x5047;&#x5982;&#x504F;&#x79FB;&#x91CF;&#x975E;&#x5E38;&#x5927;&#xFF0C; &#x90A3;&#x4E48;&#x6574;&#x4E2A;&#x521D;&#x59CB;&#x5316;&#x8FC7;&#x7A0B;&#x6267;&#x884C;&#x4F1A;&#x6BD4;&#x8F83;&#x6162;&#xFF0C; &#x53EF;&#x80FD;&#x4F1A;&#x9020;&#x6210;Redis&#x7684;&#x963B;&#x585E;&#x3002;</p>
<p>2&#x3001;getbit</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>getbit<key><offset>&#x83B7;&#x53D6;Bitmaps&#x4E2D;&#x67D0;&#x4E2A;&#x504F;&#x79FB;&#x91CF;&#x7684;&#x503C;</offset></key></p>
<p><img src="https://uploader.shimo.im/f/rIyzk1R0HRbwgPmT.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x83B7;&#x53D6;&#x952E;&#x7684;&#x7B2C;offset&#x4F4D;&#x7684;&#x503C;&#xFF08;&#x4ECE;0&#x5F00;&#x59CB;&#x7B97;&#xFF09;</p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p>&#x83B7;&#x53D6;id=8&#x7684;&#x7528;&#x6237;&#x662F;&#x5426;&#x5728;2020-11-06&#x8FD9;&#x5929;&#x8BBF;&#x95EE;&#x8FC7;&#xFF0C; &#x8FD4;&#x56DE;0&#x8BF4;&#x660E;&#x6CA1;&#x6709;&#x8BBF;&#x95EE;&#x8FC7;&#xFF1A;</p>
<p><img src="https://uploader.shimo.im/f/K5RLJ1A4NAwejJKs.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x6CE8;&#xFF1A;&#x56E0;&#x4E3A;100&#x6839;&#x672C;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x662F;&#x8FD4;&#x56DE;0</p>
<p>3&#x3001;bitcount</p>
<p>&#x7EDF;&#x8BA1;&#x5B57;&#x7B26;&#x4E32;&#x88AB;&#x8BBE;&#x7F6E;&#x4E3A;1&#x7684;bit&#x6570;&#x3002;&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7ED9;&#x5B9A;&#x7684;&#x6574;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x90FD;&#x4F1A;&#x88AB;&#x8FDB;&#x884C;&#x8BA1;&#x6570;&#xFF0C;&#x901A;&#x8FC7;&#x6307;&#x5B9A;&#x989D;&#x5916;&#x7684; start &#x6216; end &#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9;&#x8BA1;&#x6570;&#x53EA;&#x5728;&#x7279;&#x5B9A;&#x7684;&#x4F4D;&#x4E0A;&#x8FDB;&#x884C;&#x3002;start &#x548C; end &#x53C2;&#x6570;&#x7684;&#x8BBE;&#x7F6E;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x8D1F;&#x6570;&#x503C;&#xFF1A;&#x6BD4;&#x5982; -1 &#x8868;&#x793A;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x4F4D;&#xFF0C;&#x800C; -2 &#x8868;&#x793A;&#x5012;&#x6570;&#x7B2C;&#x4E8C;&#x4E2A;&#x4F4D;&#xFF0C;start&#x3001;end &#x662F;&#x6307;bit&#x7EC4;&#x7684;&#x5B57;&#x8282;&#x7684;&#x4E0B;&#x6807;&#x6570;&#xFF0C;&#x4E8C;&#x8005;&#x7686;&#x5305;&#x542B;&#x3002;</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>bitcount<key>[start end] &#x7EDF;&#x8BA1;&#x5B57;&#x7B26;&#x4E32;&#x4ECE;start&#x5B57;&#x8282;&#x5230;end&#x5B57;&#x8282;&#x6BD4;&#x7279;&#x503C;&#x4E3A;1&#x7684;&#x6570;&#x91CF;</key></p>
<p><img src="https://uploader.shimo.im/f/1SSb1yGxRu06ZySt.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p>&#x8BA1;&#x7B97;2022-11-06&#x8FD9;&#x5929;&#x7684;&#x72EC;&#x7ACB;&#x8BBF;&#x95EE;&#x7528;&#x6237;&#x6570;&#x91CF;</p>
<p><img src="https://uploader.shimo.im/f/LJBSdiVLthU77XzY.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>start&#x548C;end&#x4EE3;&#x8868;&#x8D77;&#x59CB;&#x548C;&#x7ED3;&#x675F;&#x5B57;&#x8282;&#x6570;&#xFF0C; &#x4E0B;&#x9762;&#x64CD;&#x4F5C;&#x8BA1;&#x7B97;&#x7528;&#x6237;id&#x5728;&#x7B2C;1&#x4E2A;&#x5B57;&#x8282;&#x5230;&#x7B2C;3&#x4E2A;&#x5B57;&#x8282;&#x4E4B;&#x95F4;&#x7684;&#x72EC;&#x7ACB;&#x8BBF;&#x95EE;&#x7528;&#x6237;&#x6570;&#xFF0C; &#x5BF9;&#x5E94;&#x7684;&#x7528;&#x6237;id&#x662F;11&#xFF0C; 15&#xFF0C; 19&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/yMFS0s5gVt24Eg9o.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E3E;&#x4F8B;&#xFF1A; K1 &#x3010;01000001 01000000  00000000 00100001&#x3011;&#xFF0C;&#x5BF9;&#x5E94;&#x3010;0&#xFF0C;1&#xFF0C;2&#xFF0C;3&#x3011;</p>
<p>bitcount K1 1 2  &#xFF1A; &#x7EDF;&#x8BA1;&#x4E0B;&#x6807;1&#x3001;2&#x5B57;&#x8282;&#x7EC4;&#x4E2D;bit=1&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x5373;01000000  00000000</p>
<p>--&#x300B;bitcount K1 1 2 &#x3000;&#x3000;--&#x300B;1</p>
<p>bitcount K1 1 3  &#xFF1A; &#x7EDF;&#x8BA1;&#x4E0B;&#x6807;1&#x3001;2&#x5B57;&#x8282;&#x7EC4;&#x4E2D;bit=1&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x5373;01000000  00000000 00100001</p>
<p>--&#x300B;bitcount K1 1 3&#x3000;&#x3000;--&#x300B;3</p>
<p>bitcount K1 0 -2  &#xFF1A; &#x7EDF;&#x8BA1;&#x4E0B;&#x6807;0&#x5230;&#x4E0B;&#x6807;&#x5012;&#x6570;&#x7B2C;2&#xFF0C;&#x5B57;&#x8282;&#x7EC4;&#x4E2D;bit=1&#x7684;&#x4E2A;&#x6570;&#xFF0C;&#x5373;01000001  01000000   00000000</p>
<p>--&#x300B;bitcount K1 0 -2&#x3000;&#x3000;--&#x300B;3</p>
<p>&#x6CE8;&#x610F;&#xFF1A;redis&#x7684;setbit&#x8BBE;&#x7F6E;&#x6216;&#x6E05;&#x9664;&#x7684;&#x662F;bit&#x4F4D;&#x7F6E;&#xFF0C;&#x800C;bitcount&#x8BA1;&#x7B97;&#x7684;&#x662F;byte&#x4F4D;&#x7F6E;&#x3002;</p>
<p>4&#x3001;bitop</p>
<p>(1)&#x683C;&#x5F0F;</p>
<p>bitop  and(or/not/xor) <destkey> [key&#x2026;]</destkey></p>
<p><img src="https://uploader.shimo.im/f/JLSn1JGAZ0NUpwkC.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>bitop&#x662F;&#x4E00;&#x4E2A;&#x590D;&#x5408;&#x64CD;&#x4F5C;&#xFF0C; &#x5B83;&#x53EF;&#x4EE5;&#x505A;&#x591A;&#x4E2A;Bitmaps&#x7684;and&#xFF08;&#x4EA4;&#x96C6;&#xFF09; &#x3001; or&#xFF08;&#x5E76;&#x96C6;&#xFF09; &#x3001; not&#xFF08;&#x975E;&#xFF09; &#x3001; xor&#xFF08;&#x5F02;&#x6216;&#xFF09; &#x64CD;&#x4F5C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x4FDD;&#x5B58;&#x5728;destkey&#x4E2D;&#x3002;</p>
<p>(2)&#x5B9E;&#x4F8B;</p>
<p>2020-11-04 &#x65E5;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x7684;userid=1,2,5,9&#x3002;</p>
<p>setbit unique:users:20201104 1 1</p>
<p>setbit unique:users:20201104 2 1</p>
<p>setbit unique:users:20201104 5 1</p>
<p>setbit unique:users:20201104 9 1</p>
<p>2020-11-03 &#x65E5;&#x8BBF;&#x95EE;&#x7F51;&#x7AD9;&#x7684;userid=0,1,4,9&#x3002;</p>
<p>setbit unique:users:20201103 0 1</p>
<p>setbit unique:users:20201103 1 1</p>
<p>setbit unique:users:20201103 4 1</p>
<p>setbit unique:users:20201103 9 1</p>
<p>&#x8BA1;&#x7B97;&#x51FA;&#x4E24;&#x5929;&#x90FD;&#x8BBF;&#x95EE;&#x8FC7;&#x7F51;&#x7AD9;&#x7684;&#x7528;&#x6237;&#x6570;&#x91CF;</p>
<p>bitop and unique:users:and:20201104_03</p>
<p>unique:users:20201103unique:users:20201104</p>
<p><img src="https://uploader.shimo.im/f/5SlhepiBkPZ8ItPx.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://uploader.shimo.im/f/NcQ0BlX5zcH9McKX.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x8BA1;&#x7B97;&#x51FA;&#x4EFB;&#x610F;&#x4E00;&#x5929;&#x90FD;&#x8BBF;&#x95EE;&#x8FC7;&#x7F51;&#x7AD9;&#x7684;&#x7528;&#x6237;&#x6570;&#x91CF;&#xFF08;&#x4F8B;&#x5982;&#x6708;&#x6D3B;&#x8DC3;&#x5C31;&#x662F;&#x7C7B;&#x4F3C;&#x8FD9;&#x79CD;&#xFF09; &#xFF0C; &#x53EF;&#x4EE5;&#x4F7F;&#x7528;or&#x6C42;&#x5E76;&#x96C6;</p>
<p><img src="https://uploader.shimo.im/f/L6LZJuP7v4dAgOOJ.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Bitmaps&#x4E0E;set&#x5BF9;&#x6BD4;</p>
<p>&#x5047;&#x8BBE;&#x7F51;&#x7AD9;&#x6709;1&#x4EBF;&#x7528;&#x6237;&#xFF0C; &#x6BCF;&#x5929;&#x72EC;&#x7ACB;&#x8BBF;&#x95EE;&#x7684;&#x7528;&#x6237;&#x6709;5&#x5343;&#x4E07;&#xFF0C; &#x5982;&#x679C;&#x6BCF;&#x5929;&#x7528;&#x96C6;&#x5408;&#x7C7B;&#x578B;&#x548C;Bitmaps&#x5206;&#x522B;&#x5B58;&#x50A8;&#x6D3B;&#x8DC3;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x8868;</p>
<table>
<thead>
<tr>
<th style="text-align:left">set&#x548C;Bitmaps&#x5B58;&#x50A8;&#x4E00;&#x5929;&#x6D3B;&#x8DC3;&#x7528;&#x6237;&#x5BF9;&#x6BD4;</th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&#x6570;&#x636E;<br>&#x7C7B;&#x578B;</td>
<td style="text-align:left">&#x6BCF;&#x4E2A;&#x7528;&#x6237;id&#x5360;&#x7528;&#x7A7A;&#x95F4;</td>
<td style="text-align:left">&#x9700;&#x8981;&#x5B58;&#x50A8;&#x7684;&#x7528;&#x6237;&#x91CF;</td>
<td style="text-align:left">&#x5168;&#x90E8;&#x5185;&#x5B58;&#x91CF;</td>
</tr>
<tr>
<td style="text-align:left">&#x96C6;&#x5408;<br>&#x7C7B;&#x578B;</td>
<td style="text-align:left">64&#x4F4D;</td>
<td style="text-align:left">50000000</td>
<td style="text-align:left">64&#x4F4D;*50000000 = 400MB</td>
</tr>
<tr>
<td style="text-align:left">Bitmaps</td>
<td style="text-align:left">1&#x4F4D;</td>
<td style="text-align:left">100000000</td>
<td style="text-align:left">1&#x4F4D;*100000000 = 12.5MB</td>
</tr>
</tbody>
</table>
<p>&#x5F88;&#x660E;&#x663E;&#xFF0C; &#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;Bitmaps&#x80FD;&#x8282;&#x7701;&#x5F88;&#x591A;&#x7684;&#x5185;&#x5B58;&#x7A7A;&#x95F4;&#xFF0C; &#x5C24;&#x5176;&#x662F;&#x968F;&#x7740;&#x65F6;&#x95F4;&#x63A8;&#x79FB;&#x8282;&#x7701;&#x7684;&#x5185;&#x5B58;&#x8FD8;&#x662F;&#x975E;&#x5E38;&#x53EF;&#x89C2;&#x7684;</p>
<table>
<thead>
<tr>
<th style="text-align:left">set&#x548C;Bitmaps&#x5B58;&#x50A8;&#x72EC;&#x7ACB;&#x7528;&#x6237;&#x7A7A;&#x95F4;&#x5BF9;&#x6BD4;</th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&#x6570;&#x636E;&#x7C7B;&#x578B;</td>
<td style="text-align:left">&#x4E00;&#x5929;</td>
<td style="text-align:left">&#x4E00;&#x4E2A;&#x6708;</td>
<td style="text-align:left">&#x4E00;&#x5E74;</td>
</tr>
<tr>
<td style="text-align:left">&#x96C6;&#x5408;&#x7C7B;&#x578B;</td>
<td style="text-align:left">400MB</td>
<td style="text-align:left">12GB</td>
<td style="text-align:left">144GB</td>
</tr>
<tr>
<td style="text-align:left">Bitmaps</td>
<td style="text-align:left">12.5MB</td>
<td style="text-align:left">375MB</td>
<td style="text-align:left">4.5GB</td>
</tr>
</tbody>
</table>
<p>&#x4F46;Bitmaps&#x5E76;&#x4E0D;&#x662F;&#x4E07;&#x91D1;&#x6CB9;&#xFF0C; &#x5047;&#x5982;&#x8BE5;&#x7F51;&#x7AD9;&#x6BCF;&#x5929;&#x7684;&#x72EC;&#x7ACB;&#x8BBF;&#x95EE;&#x7528;&#x6237;&#x5F88;&#x5C11;&#xFF0C; &#x4F8B;&#x5982;&#x53EA;&#x6709;10&#x4E07;&#xFF08;&#x5927;&#x91CF;&#x7684;&#x50F5;&#x5C38;&#x7528;&#x6237;&#xFF09; &#xFF0C; &#x90A3;&#x4E48;&#x4E24;&#x8005;&#x7684;&#x5BF9;&#x6BD4;&#x5982;&#x4E0B;&#x8868;&#x6240;&#x793A;&#xFF0C; &#x5F88;&#x663E;&#x7136;&#xFF0C; &#x8FD9;&#x65F6;&#x5019;&#x4F7F;&#x7528;Bitmaps&#x5C31;&#x4E0D;&#x592A;&#x5408;&#x9002;&#x4E86;&#xFF0C; &#x56E0;&#x4E3A;&#x57FA;&#x672C;&#x4E0A;&#x5927;&#x90E8;&#x5206;&#x4F4D;&#x90FD;&#x662F;0&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:left">set&#x548C;Bitmaps&#x5B58;&#x50A8;&#x4E00;&#x5929;&#x6D3B;&#x8DC3;&#x7528;&#x6237;&#x5BF9;&#x6BD4;&#xFF08;&#x72EC;&#x7ACB;&#x7528;&#x6237;&#x6BD4;&#x8F83;&#x5C11;&#xFF09;</th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&#x6570;&#x636E;&#x7C7B;&#x578B;</td>
<td style="text-align:left">&#x6BCF;&#x4E2A;userid&#x5360;&#x7528;&#x7A7A;&#x95F4;</td>
<td style="text-align:left">&#x9700;&#x8981;&#x5B58;&#x50A8;&#x7684;&#x7528;&#x6237;&#x91CF;</td>
<td style="text-align:left">&#x5168;&#x90E8;&#x5185;&#x5B58;&#x91CF;</td>
</tr>
<tr>
<td style="text-align:left">&#x96C6;&#x5408;&#x7C7B;&#x578B;</td>
<td style="text-align:left">64&#x4F4D;</td>
<td style="text-align:left">100000</td>
<td style="text-align:left">64&#x4F4D;*100000 = 800KB</td>
</tr>
<tr>
<td style="text-align:left">Bitmaps</td>
<td style="text-align:left">1&#x4F4D;</td>
<td style="text-align:left">100000000</td>
<td style="text-align:left">1&#x4F4D;*100000000 = 12.5MB</td>
</tr>
</tbody>
</table>
<p>HyperLogLog</p>
<p>&#x7B80;&#x4ECB;</p>
<p>&#x5728;&#x5DE5;&#x4F5C;&#x5F53;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x7ECF;&#x5E38;&#x4F1A;&#x9047;&#x5230;&#x4E0E;&#x7EDF;&#x8BA1;&#x76F8;&#x5173;&#x7684;&#x529F;&#x80FD;&#x9700;&#x6C42;&#xFF0C;&#x6BD4;&#x5982;&#x7EDF;&#x8BA1;&#x7F51;&#x7AD9;PV&#xFF08;PageView&#x9875;&#x9762;&#x8BBF;&#x95EE;&#x91CF;&#xFF09;,&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Redis&#x7684;incr&#x3001;incrby&#x8F7B;&#x677E;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x4F46;&#x50CF;UV&#xFF08;UniqueVisitor&#xFF0C;&#x72EC;&#x7ACB;&#x8BBF;&#x5BA2;&#xFF09;&#x3001;&#x72EC;&#x7ACB;IP&#x6570;&#x3001;&#x641C;&#x7D22;&#x8BB0;&#x5F55;&#x6570;&#x7B49;&#x9700;&#x8981;&#x53BB;&#x91CD;&#x548C;&#x8BA1;&#x6570;&#x7684;&#x95EE;&#x9898;&#x5982;&#x4F55;&#x89E3;&#x51B3;&#xFF1F;&#x8FD9;&#x79CD;&#x6C42;&#x96C6;&#x5408;&#x4E2D;&#x4E0D;&#x91CD;&#x590D;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x7684;&#x95EE;&#x9898;&#x79F0;&#x4E3A;&#x57FA;&#x6570;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x57FA;&#x6570;&#x95EE;&#x9898;&#x6709;&#x5F88;&#x591A;&#x79CD;&#x65B9;&#x6848;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x5728;MySQL&#x8868;&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;distinct count&#x8BA1;&#x7B97;&#x4E0D;&#x91CD;&#x590D;&#x4E2A;&#x6570;</p>
<p>&#xFF08;2&#xFF09;&#x4F7F;&#x7528;Redis&#x63D0;&#x4F9B;&#x7684;hash&#x3001;set&#x3001;bitmaps&#x7B49;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x6765;&#x5904;&#x7406;</p>
<p>&#x4EE5;&#x4E0A;&#x7684;&#x65B9;&#x6848;&#x7ED3;&#x679C;&#x7CBE;&#x786E;&#xFF0C;&#x4F46;&#x968F;&#x7740;&#x6570;&#x636E;&#x4E0D;&#x65AD;&#x589E;&#x52A0;&#xFF0C;&#x5BFC;&#x81F4;&#x5360;&#x7528;&#x7A7A;&#x95F4;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#xFF0C;&#x5BF9;&#x4E8E;&#x975E;&#x5E38;&#x5927;&#x7684;&#x6570;&#x636E;&#x96C6;&#x662F;&#x4E0D;&#x5207;&#x5B9E;&#x9645;&#x7684;&#x3002;</p>
<p>&#x80FD;&#x5426;&#x80FD;&#x591F;&#x964D;&#x4F4E;&#x4E00;&#x5B9A;&#x7684;&#x7CBE;&#x5EA6;&#x6765;&#x5E73;&#x8861;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#xFF1F;Redis&#x63A8;&#x51FA;&#x4E86;HyperLogLog</p>
<p>Redis HyperLogLog &#x662F;&#x7528;&#x6765;&#x505A;&#x57FA;&#x6570;&#x7EDF;&#x8BA1;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;HyperLogLog &#x7684;&#x4F18;&#x70B9;&#x662F;&#xFF0C;&#x5728;&#x8F93;&#x5165;&#x5143;&#x7D20;&#x7684;&#x6570;&#x91CF;&#x6216;&#x8005;&#x4F53;&#x79EF;&#x975E;&#x5E38;&#x975E;&#x5E38;&#x5927;&#x65F6;&#xFF0C;&#x8BA1;&#x7B97;&#x57FA;&#x6570;&#x6240;&#x9700;&#x7684;&#x7A7A;&#x95F4;&#x603B;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#x3001;&#x5E76;&#x4E14;&#x662F;&#x5F88;&#x5C0F;&#x7684;&#x3002;</p>
<p>&#x5728; Redis &#x91CC;&#x9762;&#xFF0C;&#x6BCF;&#x4E2A; HyperLogLog &#x952E;&#x53EA;&#x9700;&#x8981;&#x82B1;&#x8D39; 12 KB &#x5185;&#x5B58;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x63A5;&#x8FD1; 2^64 &#x4E2A;&#x4E0D;&#x540C;&#x5143;&#x7D20;&#x7684;&#x57FA;&#x6570;&#x3002;&#x8FD9;&#x548C;&#x8BA1;&#x7B97;&#x57FA;&#x6570;&#x65F6;&#xFF0C;&#x5143;&#x7D20;&#x8D8A;&#x591A;&#x8017;&#x8D39;&#x5185;&#x5B58;&#x5C31;&#x8D8A;&#x591A;&#x7684;&#x96C6;&#x5408;&#x5F62;&#x6210;&#x9C9C;&#x660E;&#x5BF9;&#x6BD4;&#x3002;</p>
<p>&#x4F46;&#x662F;&#xFF0C;&#x56E0;&#x4E3A; HyperLogLog &#x53EA;&#x4F1A;&#x6839;&#x636E;&#x8F93;&#x5165;&#x5143;&#x7D20;&#x6765;&#x8BA1;&#x7B97;&#x57FA;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x50A8;&#x5B58;&#x8F93;&#x5165;&#x5143;&#x7D20;&#x672C;&#x8EAB;&#xFF0C;&#x6240;&#x4EE5; HyperLogLog &#x4E0D;&#x80FD;&#x50CF;&#x96C6;&#x5408;&#x90A3;&#x6837;&#xFF0C;&#x8FD4;&#x56DE;&#x8F93;&#x5165;&#x7684;&#x5404;&#x4E2A;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x4EC0;&#x4E48;&#x662F;&#x57FA;&#x6570;?</p>
<p>&#x6BD4;&#x5982;&#x6570;&#x636E;&#x96C6; {1, 3, 5, 7, 5, 7, 8}&#xFF0C; &#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x96C6;&#x7684;&#x57FA;&#x6570;&#x96C6;&#x4E3A; {1, 3, 5 ,7, 8}, &#x57FA;&#x6570;(&#x4E0D;&#x91CD;&#x590D;&#x5143;&#x7D20;)&#x4E3A;5&#x3002; &#x57FA;&#x6570;&#x4F30;&#x8BA1;&#x5C31;&#x662F;&#x5728;&#x8BEF;&#x5DEE;&#x53EF;&#x63A5;&#x53D7;&#x7684;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x5FEB;&#x901F;&#x8BA1;&#x7B97;&#x57FA;&#x6570;&#x3002;</p>
<p>&#x547D;&#x4EE4;</p>
<p>1&#x3001;pfadd</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>pfadd <key>&lt; element&gt; [element ...]   &#x6DFB;&#x52A0;&#x6307;&#x5B9A;&#x5143;&#x7D20;&#x5230; HyperLogLog &#x4E2D;</key></p>
<p><img src="https://uploader.shimo.im/f/6fUXRJxoYP6r4iPr.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p><img src="https://uploader.shimo.im/f/hX8k5YjxtmeZcdFm.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5C06;&#x6240;&#x6709;&#x5143;&#x7D20;&#x6DFB;&#x52A0;&#x5230;&#x6307;&#x5B9A;HyperLogLog&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x540E;HLL&#x4F30;&#x8BA1;&#x7684;&#x8FD1;&#x4F3C;&#x57FA;&#x6570;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;1&#xFF0C;&#x5426;&#x5219;&#x8FD4;&#x56DE;0&#x3002;</p>
<p>2&#x3001;pfcount</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>pfcount<key> [key ...] &#x8BA1;&#x7B97;HLL&#x7684;&#x8FD1;&#x4F3C;&#x57FA;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x591A;&#x4E2A;HLL&#xFF0C;&#x6BD4;&#x5982;&#x7528;HLL&#x5B58;&#x50A8;&#x6BCF;&#x5929;&#x7684;UV&#xFF0C;&#x8BA1;&#x7B97;&#x4E00;&#x5468;&#x7684;UV&#x53EF;&#x4EE5;&#x4F7F;&#x7528;7&#x5929;&#x7684;UV&#x5408;&#x5E76;&#x8BA1;&#x7B97;&#x5373;&#x53EF;</key></p>
<p><img src="https://uploader.shimo.im/f/iR7wbS3eIVw0t1I4.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p><img src="https://uploader.shimo.im/f/Iuw47XU8wuvfPLXQ.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>3&#x3001;pfmerge</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>pfmerge<destkey><sourcekey> [sourcekey ...]  &#x5C06;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;HLL&#x5408;&#x5E76;&#x540E;&#x7684;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x5728;&#x53E6;&#x4E00;&#x4E2A;HLL&#x4E2D;&#xFF0C;&#x6BD4;&#x5982;&#x6BCF;&#x6708;&#x6D3B;&#x8DC3;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6BCF;&#x5929;&#x7684;&#x6D3B;&#x8DC3;&#x7528;&#x6237;&#x6765;&#x5408;&#x5E76;&#x8BA1;&#x7B97;&#x53EF;&#x5F97;</sourcekey></destkey></p>
<p><img src="https://uploader.shimo.im/f/yZ1F1iSM1bZmYlJQ.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p><img src="https://uploader.shimo.im/f/jqPds4oE5BxXLwGL.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Geospatial</p>
<p>&#x7B80;&#x4ECB;</p>
<p>Redis 3.2 &#x4E2D;&#x589E;&#x52A0;&#x4E86;&#x5BF9;GEO&#x7C7B;&#x578B;&#x7684;&#x652F;&#x6301;&#x3002;GEO&#xFF0C;Geographic&#xFF0C;&#x5730;&#x7406;&#x4FE1;&#x606F;&#x7684;&#x7F29;&#x5199;&#x3002;&#x8BE5;&#x7C7B;&#x578B;&#xFF0C;&#x5C31;&#x662F;&#x5143;&#x7D20;&#x7684;2&#x7EF4;&#x5750;&#x6807;&#xFF0C;&#x5728;&#x5730;&#x56FE;&#x4E0A;&#x5C31;&#x662F;&#x7ECF;&#x7EAC;&#x5EA6;&#x3002;redis&#x57FA;&#x4E8E;&#x8BE5;&#x7C7B;&#x578B;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x7ECF;&#x7EAC;&#x5EA6;&#x8BBE;&#x7F6E;&#xFF0C;&#x67E5;&#x8BE2;&#xFF0C;&#x8303;&#x56F4;&#x67E5;&#x8BE2;&#xFF0C;&#x8DDD;&#x79BB;&#x67E5;&#x8BE2;&#xFF0C;&#x7ECF;&#x7EAC;&#x5EA6;Hash&#x7B49;&#x5E38;&#x89C1;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x547D;&#x4EE4;</p>
<p>1&#x3001;geoadd</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>geoadd<key>&lt; longitude&gt;<latitude><member> [longitude latitude member...]   &#x6DFB;&#x52A0;&#x5730;&#x7406;&#x4F4D;&#x7F6E;&#xFF08;&#x7ECF;&#x5EA6;&#xFF0C;&#x7EAC;&#x5EA6;&#xFF0C;&#x540D;&#x79F0;&#xFF09;</member></latitude></key></p>
<p><img src="https://uploader.shimo.im/f/AdtTa7WWDdBcpY3j.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p>geoadd china:city121.47 31.23 shanghai</p>
<p>geoadd china:city 106.50 29.53 chongqing 114.05 22.52 shenzhen 116.38 39.90 beijing</p>
<p><img src="https://uploader.shimo.im/f/qrCacDHaygQRNKVs.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E24;&#x6781;&#x65E0;&#x6CD5;&#x76F4;&#x63A5;&#x6DFB;&#x52A0;&#xFF0C;&#x4E00;&#x822C;&#x4F1A;&#x4E0B;&#x8F7D;&#x57CE;&#x5E02;&#x6570;&#x636E;&#xFF0C;&#x76F4;&#x63A5;&#x901A;&#x8FC7; Java &#x7A0B;&#x5E8F;&#x4E00;&#x6B21;&#x6027;&#x5BFC;&#x5165;&#x3002;</p>
<p>&#x6709;&#x6548;&#x7684;&#x7ECF;&#x5EA6;&#x4ECE; -180 &#x5EA6;&#x5230; 180 &#x5EA6;&#x3002;&#x6709;&#x6548;&#x7684;&#x7EAC;&#x5EA6;&#x4ECE; -85.05112878 &#x5EA6;&#x5230; 85.05112878 &#x5EA6;&#x3002;</p>
<p>&#x5F53;&#x5750;&#x6807;&#x4F4D;&#x7F6E;&#x8D85;&#x51FA;&#x6307;&#x5B9A;&#x8303;&#x56F4;&#x65F6;&#xFF0C;&#x8BE5;&#x547D;&#x4EE4;&#x5C06;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#x3002;</p>
<p>&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x662F;&#x65E0;&#x6CD5;&#x518D;&#x6B21;&#x5F80;&#x91CC;&#x9762;&#x6DFB;&#x52A0;&#x7684;&#x3002;</p>
<p>2&#x3001;geopos</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>geopos  <key><member> [member...]  &#x83B7;&#x5F97;&#x6307;&#x5B9A;&#x5730;&#x533A;&#x7684;&#x5750;&#x6807;&#x503C;</member></key></p>
<p><img src="https://uploader.shimo.im/f/XCpkctZZmHSgtaZt.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p><img src="https://uploader.shimo.im/f/yyth4rmrbwLwvMh3.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>3&#x3001;geodist</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>geodist<key><member1><member2>  [m|km|ft|mi ]  &#x83B7;&#x53D6;&#x4E24;&#x4E2A;&#x4F4D;&#x7F6E;&#x4E4B;&#x95F4;&#x7684;&#x76F4;&#x7EBF;&#x8DDD;&#x79BB;</member2></member1></key></p>
<p><img src="https://uploader.shimo.im/f/6REtT8VBmdmXvguq.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p>&#x83B7;&#x53D6;&#x4E24;&#x4E2A;&#x4F4D;&#x7F6E;&#x4E4B;&#x95F4;&#x7684;&#x76F4;&#x7EBF;&#x8DDD;&#x79BB;</p>
<p><img src="https://uploader.shimo.im/f/Db0lv0t75mUQqNcU.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5355;&#x4F4D;&#xFF1A;</p>
<p>m &#x8868;&#x793A;&#x5355;&#x4F4D;&#x4E3A;&#x7C73;[&#x9ED8;&#x8BA4;&#x503C;]&#x3002;</p>
<p>km &#x8868;&#x793A;&#x5355;&#x4F4D;&#x4E3A;&#x5343;&#x7C73;&#x3002;</p>
<p>mi &#x8868;&#x793A;&#x5355;&#x4F4D;&#x4E3A;&#x82F1;&#x91CC;&#x3002;</p>
<p>ft &#x8868;&#x793A;&#x5355;&#x4F4D;&#x4E3A;&#x82F1;&#x5C3A;&#x3002;</p>
<p>&#x5982;&#x679C;&#x7528;&#x6237;&#x6CA1;&#x6709;&#x663E;&#x5F0F;&#x5730;&#x6307;&#x5B9A;&#x5355;&#x4F4D;&#x53C2;&#x6570;&#xFF0C; &#x90A3;&#x4E48; GEODIST &#x9ED8;&#x8BA4;&#x4F7F;&#x7528;&#x7C73;&#x4F5C;&#x4E3A;&#x5355;&#x4F4D;</p>
<p>4&#x3001;georadius</p>
<p>&#xFF08;1&#xFF09;&#x683C;&#x5F0F;</p>
<p>georadius<key>&lt; longitude&gt;<latitude>radius  m|km|ft|mi   &#x4EE5;&#x7ED9;&#x5B9A;&#x7684;&#x7ECF;&#x7EAC;&#x5EA6;&#x4E3A;&#x4E2D;&#x5FC3;&#xFF0C;&#x627E;&#x51FA;&#x67D0;&#x4E00;&#x534A;&#x5F84;&#x5185;&#x7684;&#x5143;&#x7D20;</latitude></key></p>
<p><img src="https://uploader.shimo.im/f/GQ4AnXuEp9UZLfLA.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x7ECF;&#x5EA6; &#x7EAC;&#x5EA6; &#x8DDD;&#x79BB; &#x5355;&#x4F4D;</p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x4F8B;</p>
<p><img src="https://uploader.shimo.im/f/zuSmPCS4LTMYHnhn.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h1 id="7redisjedis&#x6D4B;&#x8BD5;">7.Redis<em>Jedis</em>&#x6D4B;&#x8BD5;</h1>
<p>Jedis&#x6240;&#x9700;&#x8981;&#x7684;jar&#x5305;</p>
<table>
<thead>
<tr>
<th style="text-align:left"><dependency><br><groupid>redis.clients</groupid><br><artifactid>jedis</artifactid><br><version>3.2.0</version><br></dependency></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x8FDE;&#x63A5;Redis&#x6CE8;&#x610F;&#x4E8B;&#x9879;</p>
<p>&#x7981;&#x7528;Linux&#x7684;&#x9632;&#x706B;&#x5899;&#xFF1A;Linux(CentOS7)&#x91CC;&#x6267;&#x884C;&#x547D;&#x4EE4;</p>
<p>systemctl stop/disable firewalld.service</p>
<p>redis.conf&#x4E2D;&#x6CE8;&#x91CA;&#x6389;bind 127.0.0.1 ,&#x7136;&#x540E; protected-mode no</p>
<p>Jedis&#x5E38;&#x7528;&#x64CD;&#x4F5C;</p>
<p>&#x521B;&#x5EFA;&#x52A8;&#x6001;&#x7684;&#x5DE5;&#x7A0B;</p>
<p>&#x521B;&#x5EFA;&#x6D4B;&#x8BD5;&#x7A0B;&#x5E8F;</p>
<table>
<thead>
<tr>
<th style="text-align:left">package com.atguigu.jedis;<br>import redis.clients.jedis.Jedis;<br>public class Demo01 {<br>public static void main(String[] args) {<br>Jedis jedis = new Jedis(&quot;192.168.137.3&quot;,6379);<br>String pong = jedis.ping();<br>System.out.println(&quot;&#x8FDE;&#x63A5;&#x6210;&#x529F;&#xFF1A;&quot;+pong);<br>jedis.close();<br>}<br>}</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x6D4B;&#x8BD5;&#x76F8;&#x5173;&#x6570;&#x636E;&#x7C7B;&#x578B;</p>
<p>Jedis-API:    Key</p>
<table>
<thead>
<tr>
<th style="text-align:left">jedis.set(&quot;k1&quot;, &quot;v1&quot;);<br>jedis.set(&quot;k2&quot;, &quot;v2&quot;);<br>jedis.set(&quot;k3&quot;, &quot;v3&quot;);<br>Set<string> keys = jedis.keys(&quot;*&quot;);<br>System.out.println(keys.size());<br>for (String key : keys) {<br>System.out.println(key);<br>}<br>System.out.println(jedis.exists(&quot;k1&quot;));<br>System.out.println(jedis.ttl(&quot;k1&quot;));<br>System.out.println(jedis.get(&quot;k1&quot;));</string></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>Jedis-API:    String</p>
<table>
<thead>
<tr>
<th style="text-align:left">jedis.mset(&quot;str1&quot;,&quot;v1&quot;,&quot;str2&quot;,&quot;v2&quot;,&quot;str3&quot;,&quot;v3&quot;);<br>System.out.println(jedis.mget(&quot;str1&quot;,&quot;str2&quot;,&quot;str3&quot;));</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>Jedis-API:    List</p>
<table>
<thead>
<tr>
<th style="text-align:left">List<string> list = jedis.lrange(&quot;mylist&quot;,0,-1);<br>for (String element : list) {<br>System.out.println(element);<br>}</string></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>Jedis-API:    set</p>
<table>
<thead>
<tr>
<th style="text-align:left">jedis.sadd(&quot;orders&quot;, &quot;order01&quot;);<br>jedis.sadd(&quot;orders&quot;, &quot;order02&quot;);<br>jedis.sadd(&quot;orders&quot;, &quot;order03&quot;);<br>jedis.sadd(&quot;orders&quot;, &quot;order04&quot;);<br>Set<string> smembers = jedis.smembers(&quot;orders&quot;);<br>for (String order : smembers) {<br>System.out.println(order);<br>}<br>jedis.srem(&quot;orders&quot;, &quot;order02&quot;);</string></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>Jedis-API:    hash</p>
<table>
<thead>
<tr>
<th style="text-align:left">jedis.hset(&quot;hash1&quot;,&quot;userName&quot;,&quot;lisi&quot;);<br>System.out.println(jedis.hget(&quot;hash1&quot;,&quot;userName&quot;));<br>Map<string,string> map = new HashMap<string,string>();<br>map.put(&quot;telphone&quot;,&quot;13810169999&quot;);<br>map.put(&quot;address&quot;,&quot;atguigu&quot;);<br>map.put(&quot;email&quot;,&quot;abc@163.com&quot;);<br>jedis.hmset(&quot;hash2&quot;,map);<br>List<string> result = jedis.hmget(&quot;hash2&quot;, &quot;telphone&quot;,&quot;email&quot;);<br>for (String element : result) {<br>System.out.println(element);<br>}</string></string,string></string,string></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>Jedis-API:    zset</p>
<table>
<thead>
<tr>
<th style="text-align:left">jedis.zadd(&quot;zset01&quot;, 100d, &quot;z3&quot;);<br>jedis.zadd(&quot;zset01&quot;, 90d, &quot;l4&quot;);<br>jedis.zadd(&quot;zset01&quot;, 80d, &quot;w5&quot;);<br>jedis.zadd(&quot;zset01&quot;, 70d, &quot;z6&quot;);<br><br>Set<string> zrange = jedis.zrange(&quot;zset01&quot;, 0, -1);<br>for (String e : zrange) {<br>System.out.println(e);<br>}</string></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h1 id="8redisjedis&#x5B9E;&#x4F8B;">8.Redis<em>Jedis</em>&#x5B9E;&#x4F8B;</h1>
<p>&#x5B8C;&#x6210;&#x4E00;&#x4E2A;&#x624B;&#x673A;&#x9A8C;&#x8BC1;&#x7801;&#x529F;&#x80FD;</p>
<p>&#x8981;&#x6C42;&#xFF1A;</p>
<p>1&#x3001;&#x8F93;&#x5165;&#x624B;&#x673A;&#x53F7;&#xFF0C;&#x70B9;&#x51FB;&#x53D1;&#x9001;&#x540E;&#x968F;&#x673A;&#x751F;&#x6210;6&#x4F4D;&#x6570;&#x5B57;&#x7801;&#xFF0C;2&#x5206;&#x949F;&#x6709;&#x6548;</p>
<p>2&#x3001;&#x8F93;&#x5165;&#x9A8C;&#x8BC1;&#x7801;&#xFF0C;&#x70B9;&#x51FB;&#x9A8C;&#x8BC1;&#xFF0C;&#x8FD4;&#x56DE;&#x6210;&#x529F;&#x6216;&#x5931;&#x8D25;</p>
<p>3&#x3001;&#x6BCF;&#x4E2A;&#x624B;&#x673A;&#x53F7;&#x6BCF;&#x5929;&#x53EA;&#x80FD;&#x8F93;&#x5165;3&#x6B21;</p>
<p><img src="https://uploader.shimo.im/f/SIQizd5buOHWLZxl.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h1 id="9redis&#x4E0E;spring-boot&#x6574;&#x5408;">9.Redis&#x4E0E;Spring Boot&#x6574;&#x5408;</h1>
<p>Spring Boot&#x6574;&#x5408;Redis&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x53EA;&#x9700;&#x8981;&#x6309;&#x5982;&#x4E0B;&#x6B65;&#x9AA4;&#x6574;&#x5408;&#x5373;&#x53EF;</p>
<p>&#x6574;&#x5408;&#x6B65;&#x9AA4;</p>
<p>&#x5728;pom.xml&#x6587;&#x4EF6;&#x4E2D;&#x5F15;&#x5165;redis&#x76F8;&#x5173;&#x4F9D;&#x8D56;</p>
<table>
<thead>
<tr>
<th style="text-align:left"><!-- redis --><br><dependency><br><groupid>org.springframework.boot</groupid><br><artifactid>spring-boot-starter-data-redis</artifactid><br></dependency><br><br><!-- spring2.X集成redis所需common-pool2--><br><dependency><br><groupid>org.apache.commons</groupid><br><artifactid>commons-pool2</artifactid><br><version>2.6.0</version><br></dependency></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>application.properties&#x914D;&#x7F6E;redis&#x914D;&#x7F6E;</p>
<table>
<thead>
<tr>
<th style="text-align:left">#Redis&#x670D;&#x52A1;&#x5668;&#x5730;&#x5740;<br>spring.redis.host=192.168.140.136<br>#Redis&#x670D;&#x52A1;&#x5668;&#x8FDE;&#x63A5;&#x7AEF;&#x53E3;<br>spring.redis.port=6379<br>#Redis&#x6570;&#x636E;&#x5E93;&#x7D22;&#x5F15;&#xFF08;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF09;<br>spring.redis.database= 0<br>#&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF08;&#x6BEB;&#x79D2;&#xFF09;<br>spring.redis.timeout=1800000<br>#&#x8FDE;&#x63A5;&#x6C60;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;&#xFF08;&#x4F7F;&#x7528;&#x8D1F;&#x503C;&#x8868;&#x793A;&#x6CA1;&#x6709;&#x9650;&#x5236;&#xFF09;<br>spring.redis.lettuce.pool.max-active=20<br>#&#x6700;&#x5927;&#x963B;&#x585E;&#x7B49;&#x5F85;&#x65F6;&#x95F4;(&#x8D1F;&#x6570;&#x8868;&#x793A;&#x6CA1;&#x9650;&#x5236;)<br>spring.redis.lettuce.pool.max-wait=-1<br>#&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x7684;&#x6700;&#x5927;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;<br>spring.redis.lettuce.pool.max-idle=5<br>#&#x8FDE;&#x63A5;&#x6C60;&#x4E2D;&#x7684;&#x6700;&#x5C0F;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;<br>spring.redis.lettuce.pool.min-idle=0</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x6DFB;&#x52A0;redis&#x914D;&#x7F6E;&#x7C7B;</p>
<table>
<thead>
<tr>
<th style="text-align:left">@EnableCaching&lt;br/&gt;@Configuration<br>public class RedisConfig extends CachingConfigurerSupport {<br>&lt;br/&gt;@Bean<br>public RedisTemplate<string, object=""> redisTemplate(RedisConnectionFactory factory) {<br>RedisTemplate<string, object=""> template = new RedisTemplate&lt;&gt;();<br>RedisSerializer<string> redisSerializer = new StringRedisSerializer();<br>Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);<br>ObjectMapper om = new ObjectMapper();<br>om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);<br>om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);<br>jackson2JsonRedisSerializer.setObjectMapper(om);<br>template.setConnectionFactory(factory);<br>//key&#x5E8F;&#x5217;&#x5316;&#x65B9;&#x5F0F;<br>template.setKeySerializer(redisSerializer);<br>//value&#x5E8F;&#x5217;&#x5316;<br>template.setValueSerializer(jackson2JsonRedisSerializer);<br>//value hashmap&#x5E8F;&#x5217;&#x5316;<br>template.setHashValueSerializer(jackson2JsonRedisSerializer);<br>return template;<br>}<br>&lt;br/&gt;@Bean<br>public CacheManager cacheManager(RedisConnectionFactory factory) {<br>RedisSerializer<string> redisSerializer = new StringRedisSerializer();<br>Jackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);<br>//&#x89E3;&#x51B3;&#x67E5;&#x8BE2;&#x7F13;&#x5B58;&#x8F6C;&#x6362;&#x5F02;&#x5E38;&#x7684;&#x95EE;&#x9898;<br>ObjectMapper om = new ObjectMapper();<br>om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);<br>om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);<br>jackson2JsonRedisSerializer.setObjectMapper(om);<br>//&#x914D;&#x7F6E;&#x5E8F;&#x5217;&#x5316;&#xFF08;&#x89E3;&#x51B3;&#x4E71;&#x7801;&#x7684;&#x95EE;&#x9898;&#xFF09;,&#x8FC7;&#x671F;&#x65F6;&#x95F4;600&#x79D2;<br>RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig()<br>.entryTtl(Duration.ofSeconds(600))<br>.serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(redisSerializer))<br>.serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(jackson2JsonRedisSerializer))<br>.disableCachingNullValues();<br>RedisCacheManager cacheManager = RedisCacheManager.builder(factory)<br>.cacheDefaults(config)<br>.build();<br>return cacheManager;<br>}<br>}</string></string></string,></string,></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>4&#x3001;&#x6D4B;&#x8BD5;&#x4E00;&#x4E0B;</p>
<p>RedisTestController&#x4E2D;&#x6DFB;&#x52A0;&#x6D4B;&#x8BD5;&#x65B9;&#x6CD5;</p>
<table>
<thead>
<tr>
<th style="text-align:left">@RestController&lt;br/&gt;@RequestMapping(&quot;/redisTest&quot;)<br>public class RedisTestController {&lt;br/&gt;@Autowired<br>private RedisTemplate redisTemplate;<br>null&lt;br/&gt;@GetMapping<br>public String testRedis() {<br>//&#x8BBE;&#x7F6E;&#x503C;&#x5230;redis<br>redisTemplate.opsForValue().set(&quot;name&quot;,&quot;lucy&quot;);<br>//&#x4ECE;redis&#x83B7;&#x53D6;&#x503C;<br>String name = (String)redisTemplate.opsForValue().get(&quot;name&quot;);<br>return name;<br>}<br>}</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h1 id="10redis&#x4E8B;&#x52A1;&#x9501;&#x673A;&#x5236;&#x79D2;&#x6740;">10.Redis<em>&#x4E8B;&#x52A1;</em>&#x9501;&#x673A;&#x5236;_&#x79D2;&#x6740;</h1>
<p>Redis&#x7684;&#x4E8B;&#x52A1;&#x5B9A;&#x4E49;</p>
<p><img src="https://uploader.shimo.im/f/IXxxwGzyD76VjdR3.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Redis&#x4E8B;&#x52A1;&#x662F;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x9694;&#x79BB;&#x64CD;&#x4F5C;&#xFF1A;&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x5E8F;&#x5217;&#x5316;&#x3001;&#x6309;&#x987A;&#x5E8F;&#x5730;&#x6267;&#x884C;&#x3002;&#x4E8B;&#x52A1;&#x5728;&#x6267;&#x884C;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E0D;&#x4F1A;&#x88AB;&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x6765;&#x7684;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x6240;&#x6253;&#x65AD;&#x3002;</p>
<p>Redis&#x4E8B;&#x52A1;&#x7684;&#x4E3B;&#x8981;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x4E32;&#x8054;&#x591A;&#x4E2A;&#x547D;&#x4EE4;&#x9632;&#x6B62;&#x522B;&#x7684;&#x547D;&#x4EE4;&#x63D2;&#x961F;&#x3002;</p>
<p>Multi&#x3001;Exec&#x3001;discard</p>
<p>&#x4ECE;&#x8F93;&#x5165;Multi&#x547D;&#x4EE4;&#x5F00;&#x59CB;&#xFF0C;&#x8F93;&#x5165;&#x7684;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x4F9D;&#x6B21;&#x8FDB;&#x5165;&#x547D;&#x4EE4;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x4F46;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x76F4;&#x5230;&#x8F93;&#x5165;Exec&#x540E;&#xFF0C;Redis&#x4F1A;&#x5C06;&#x4E4B;&#x524D;&#x7684;&#x547D;&#x4EE4;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x4F9D;&#x6B21;&#x6267;&#x884C;&#x3002;</p>
<p>&#x7EC4;&#x961F;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;discard&#x6765;&#x653E;&#x5F03;&#x7EC4;&#x961F;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/Kr0mawmZfTvwUysP.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x6848;&#x4F8B;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left"><img src="https://uploader.shimo.im/f/GN9YK873VuZDQ7GX.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br>&#x7EC4;&#x961F;&#x6210;&#x529F;&#xFF0C;&#x63D0;&#x4EA4;&#x6210;&#x529F;<br></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><img src="https://uploader.shimo.im/f/grYwWJrFh6LhYUps.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br>&#x7EC4;&#x961F;&#x9636;&#x6BB5;&#x62A5;&#x9519;&#xFF0C;&#x63D0;&#x4EA4;&#x5931;&#x8D25;</td>
</tr>
<tr>
<td style="text-align:left"><img src="https://uploader.shimo.im/f/Sra394r1q3bIb6Yz.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br>&#x7EC4;&#x961F;&#x6210;&#x529F;&#xFF0C;&#x63D0;&#x4EA4;&#x6709;&#x6210;&#x529F;&#x6709;&#x5931;&#x8D25;&#x60C5;&#x51B5;</td>
</tr>
</tbody>
</table>
<p>&#x4E8B;&#x52A1;&#x7684;&#x9519;&#x8BEF;&#x5904;&#x7406;</p>
<p>&#x7EC4;&#x961F;&#x4E2D;&#x67D0;&#x4E2A;&#x547D;&#x4EE4;&#x51FA;&#x73B0;&#x4E86;&#x62A5;&#x544A;&#x9519;&#x8BEF;&#xFF0C;&#x6267;&#x884C;&#x65F6;&#x6574;&#x4E2A;&#x7684;&#x6240;&#x6709;&#x961F;&#x5217;&#x90FD;&#x4F1A;&#x88AB;&#x53D6;&#x6D88;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/NDImbuuXrE31VKsJ.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5982;&#x679C;&#x6267;&#x884C;&#x9636;&#x6BB5;&#x67D0;&#x4E2A;&#x547D;&#x4EE4;&#x62A5;&#x51FA;&#x4E86;&#x9519;&#x8BEF;&#xFF0C;&#x5219;&#x53EA;&#x6709;&#x62A5;&#x9519;&#x7684;&#x547D;&#x4EE4;&#x4E0D;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x800C;&#x5176;&#x4ED6;&#x7684;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x6267;&#x884C;&#xFF0C;&#x4E0D;&#x4F1A;&#x56DE;&#x6EDA;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/eSxelWgb4FixqKns.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x505A;&#x6210;&#x4E8B;&#x52A1;</p>
<p>&#x60F3;&#x60F3;&#x4E00;&#x4E2A;&#x573A;&#x666F;&#xFF1A;&#x6709;&#x5F88;&#x591A;&#x4EBA;&#x6709;&#x4F60;&#x7684;&#x8D26;&#x6237;,&#x540C;&#x65F6;&#x53BB;&#x53C2;&#x52A0;&#x53CC;&#x5341;&#x4E00;&#x62A2;&#x8D2D;</p>
<p>&#x4E8B;&#x52A1;&#x51B2;&#x7A81;&#x7684;&#x95EE;&#x9898;</p>
<p>&#x4F8B;&#x5B50;</p>
<p>&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x60F3;&#x7ED9;&#x91D1;&#x989D;&#x51CF;8000</p>
<p>&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x60F3;&#x7ED9;&#x91D1;&#x989D;&#x51CF;5000</p>
<p>&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x60F3;&#x7ED9;&#x91D1;&#x989D;&#x51CF;1000</p>
<p><img src="https://uploader.shimo.im/f/XVFDz5imsF0rwJAC.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x60B2;&#x89C2;&#x9501;</p>
<p><img src="https://uploader.shimo.im/f/597HeBh2EPaqZwU5.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x60B2;&#x89C2;&#x9501;(Pessimistic Lock), &#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5C31;&#x662F;&#x5F88;&#x60B2;&#x89C2;&#xFF0C;&#x6BCF;&#x6B21;&#x53BB;&#x62FF;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x8BA4;&#x4E3A;&#x522B;&#x4EBA;&#x4F1A;&#x4FEE;&#x6539;&#xFF0C;&#x6240;&#x4EE5;&#x6BCF;&#x6B21;&#x5728;&#x62FF;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x4F1A;&#x4E0A;&#x9501;&#xFF0C;&#x8FD9;&#x6837;&#x522B;&#x4EBA;&#x60F3;&#x62FF;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x5C31;&#x4F1A;block&#x76F4;&#x5230;&#x5B83;&#x62FF;&#x5230;&#x9501;&#x3002;&#x4F20;&#x7EDF;&#x7684;&#x5173;&#x7CFB;&#x578B;&#x6570;&#x636E;&#x5E93;&#x91CC;&#x8FB9;&#x5C31;&#x7528;&#x5230;&#x4E86;&#x5F88;&#x591A;&#x8FD9;&#x79CD;&#x9501;&#x673A;&#x5236;&#xFF0C;&#x6BD4;&#x5982;&#x884C;&#x9501;&#xFF0C;&#x8868;&#x9501;&#x7B49;&#xFF0C;&#x8BFB;&#x9501;&#xFF0C;&#x5199;&#x9501;&#x7B49;&#xFF0C;&#x90FD;&#x662F;&#x5728;&#x505A;&#x64CD;&#x4F5C;&#x4E4B;&#x524D;&#x5148;&#x4E0A;&#x9501;&#x3002;</p>
<p>&#x4E50;&#x89C2;&#x9501;</p>
<p><img src="https://uploader.shimo.im/f/7uTRUTQh1U1qOwr8.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E50;&#x89C2;&#x9501;(Optimistic Lock), &#x987E;&#x540D;&#x601D;&#x4E49;&#xFF0C;&#x5C31;&#x662F;&#x5F88;&#x4E50;&#x89C2;&#xFF0C;&#x6BCF;&#x6B21;&#x53BB;&#x62FF;&#x6570;&#x636E;&#x7684;&#x65F6;&#x5019;&#x90FD;&#x8BA4;&#x4E3A;&#x522B;&#x4EBA;&#x4E0D;&#x4F1A;&#x4FEE;&#x6539;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x4F1A;&#x4E0A;&#x9501;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x66F4;&#x65B0;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x5224;&#x65AD;&#x4E00;&#x4E0B;&#x5728;&#x6B64;&#x671F;&#x95F4;&#x522B;&#x4EBA;&#x6709;&#x6CA1;&#x6709;&#x53BB;&#x66F4;&#x65B0;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x7248;&#x672C;&#x53F7;&#x7B49;&#x673A;&#x5236;&#x3002;&#x4E50;&#x89C2;&#x9501;&#x9002;&#x7528;&#x4E8E;&#x591A;&#x8BFB;&#x7684;&#x5E94;&#x7528;&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x541E;&#x5410;&#x91CF;&#x3002;Redis&#x5C31;&#x662F;&#x5229;&#x7528;&#x8FD9;&#x79CD;check-and-set&#x673A;&#x5236;&#x5B9E;&#x73B0;&#x4E8B;&#x52A1;&#x7684;&#x3002;</p>
<p>WATCH key [key ...]</p>
<p>&#x5728;&#x6267;&#x884C;multi&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x6267;&#x884C;watch key1 [key2],&#x53EF;&#x4EE5;&#x76D1;&#x89C6;&#x4E00;&#x4E2A;(&#x6216;&#x591A;&#x4E2A;) key &#xFF0C;&#x5982;&#x679C;&#x5728;&#x4E8B;&#x52A1;&#x6267;&#x884C;&#x4E4B;&#x524D;&#x8FD9;&#x4E2A;(&#x6216;&#x8FD9;&#x4E9B;) key &#x88AB;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x6240;&#x6539;&#x52A8;&#xFF0C;&#x90A3;&#x4E48;&#x4E8B;&#x52A1;&#x5C06;&#x88AB;&#x6253;&#x65AD;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/wu4cSNAho63y0YVH.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>unwatch</p>
<p>&#x53D6;&#x6D88; WATCH &#x547D;&#x4EE4;&#x5BF9;&#x6240;&#x6709; key &#x7684;&#x76D1;&#x89C6;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5728;&#x6267;&#x884C; WATCH &#x547D;&#x4EE4;&#x4E4B;&#x540E;&#xFF0C;EXEC &#x547D;&#x4EE4;&#x6216;DISCARD &#x547D;&#x4EE4;&#x5148;&#x88AB;&#x6267;&#x884C;&#x4E86;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x518D;&#x6267;&#x884C;UNWATCH &#x4E86;&#x3002;</p>
<p><a href="http://doc.redisfans.com/transaction/exec.html?fileGuid=yBtmdjz5Ja42cjcb" target="_blank">http://doc.redisfans.com/transaction/exec.html</a></p>
<p>Redis&#x4E8B;&#x52A1;&#x4E09;&#x7279;&#x6027;</p>
<p>&#x5355;&#x72EC;&#x7684;&#x9694;&#x79BB;&#x64CD;&#x4F5C;</p>
<p>&#x4E8B;&#x52A1;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x547D;&#x4EE4;&#x90FD;&#x4F1A;&#x5E8F;&#x5217;&#x5316;&#x3001;&#x6309;&#x987A;&#x5E8F;&#x5730;&#x6267;&#x884C;&#x3002;&#x4E8B;&#x52A1;&#x5728;&#x6267;&#x884C;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E0D;&#x4F1A;&#x88AB;&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x9001;&#x6765;&#x7684;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x6240;&#x6253;&#x65AD;&#x3002;</p>
<p>&#x6CA1;&#x6709;&#x9694;&#x79BB;&#x7EA7;&#x522B;&#x7684;&#x6982;&#x5FF5;</p>
<p>&#x961F;&#x5217;&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#x6CA1;&#x6709;&#x63D0;&#x4EA4;&#x4E4B;&#x524D;&#x90FD;&#x4E0D;&#x4F1A;&#x5B9E;&#x9645;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x56E0;&#x4E3A;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x524D;&#x4EFB;&#x4F55;&#x6307;&#x4EE4;&#x90FD;&#x4E0D;&#x4F1A;&#x88AB;&#x5B9E;&#x9645;&#x6267;&#x884C;</p>
<p>&#x4E0D;&#x4FDD;&#x8BC1;&#x539F;&#x5B50;&#x6027;</p>
<p>&#x4E8B;&#x52A1;&#x4E2D;&#x5982;&#x679C;&#x6709;&#x4E00;&#x6761;&#x547D;&#x4EE4;&#x6267;&#x884C;&#x5931;&#x8D25;&#xFF0C;&#x5176;&#x540E;&#x7684;&#x547D;&#x4EE4;&#x4ECD;&#x7136;&#x4F1A;&#x88AB;&#x6267;&#x884C;&#xFF0C;&#x6CA1;&#x6709;&#x56DE;&#x6EDA;</p>
<h1 id="11redis&#x4E8B;&#x52A1;&#x79D2;&#x6740;&#x6848;&#x4F8B;">11.Redis<em>&#x4E8B;&#x52A1;</em>&#x79D2;&#x6740;&#x6848;&#x4F8B;</h1>
<p>&#x89E3;&#x51B3;&#x8BA1;&#x6570;&#x5668;&#x548C;&#x4EBA;&#x5458;&#x8BB0;&#x5F55;&#x7684;&#x4E8B;&#x52A1;&#x64CD;&#x4F5C;</p>
<p><img src="https://uploader.shimo.im/f/LeqfGbH84qm1hDEa.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Redis&#x4E8B;&#x52A1;--&#x79D2;&#x6740;&#x5E76;&#x53D1;&#x6A21;&#x62DF;</p>
<p>&#x4F7F;&#x7528;&#x5DE5;&#x5177;ab&#x6A21;&#x62DF;&#x6D4B;&#x8BD5;</p>
<p>CentOS6 &#x9ED8;&#x8BA4;&#x5B89;&#x88C5;</p>
<p>CentOS7&#x9700;&#x8981;&#x624B;&#x52A8;&#x5B89;&#x88C5;</p>
<p>&#x8054;&#x7F51;&#xFF1A;yum install httpd-tools</p>
<p>&#x65E0;&#x7F51;&#x7EDC;</p>
<p>&#xFF08;1&#xFF09; &#x8FDB;&#x5165;cd  /run/media/root/CentOS 7 x86_64/Packages&#xFF08;&#x8DEF;&#x5F84;&#x8DDF;centos6&#x4E0D;&#x540C;&#xFF09;</p>
<p>&#xFF08;2&#xFF09; &#x987A;&#x5E8F;&#x5B89;&#x88C5;</p>
<p>apr-1.4.8-3.el7.x86_64.rpm</p>
<p>apr-util-1.5.2-6.el7.x86_64.rpm</p>
<p>httpd-tools-2.4.6-67.el7.centos.x86_64.rpm</p>
<p>&#x6D4B;&#x8BD5;&#x53CA;&#x7ED3;&#x679C;</p>
<p>&#x901A;&#x8FC7;ab&#x6D4B;&#x8BD5;</p>
<p>vim postfile &#x6A21;&#x62DF;&#x8868;&#x5355;&#x63D0;&#x4EA4;&#x53C2;&#x6570;,&#x4EE5;&amp;&#x7B26;&#x53F7;&#x7ED3;&#x5C3E;;&#x5B58;&#x653E;&#x5F53;&#x524D;&#x76EE;&#x5F55;&#x3002;</p>
<p>&#x5185;&#x5BB9;&#xFF1A;prodid=0101&amp;</p>
<p>ab -n 2000 -c 200 -k -p ~/postfile -T application/x-www-form-urlencoded <a href="http://192.168.2.115:8081/Seckill/doseckill" target="_blank">http://192.168.2.115:8081/Seckill/doseckill</a></p>
<p>&#x8D85;&#x5356;</p>
<table>
<thead>
<tr>
<th style="text-align:left"><img src="https://uploader.shimo.im/f/qfFuB3aK27Bnrn71.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></th>
<th style="text-align:left"><img src="https://uploader.shimo.im/f/mnSS4TWJpR1Xx0PU.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x8D85;&#x5356;&#x95EE;&#x9898;</p>
<p><img src="https://uploader.shimo.im/f/kr4NkCcSpILZ31we.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5229;&#x7528;&#x4E50;&#x89C2;&#x9501;&#x6DD8;&#x6C70;&#x7528;&#x6237;&#xFF0C;&#x89E3;&#x51B3;&#x8D85;&#x5356;&#x95EE;&#x9898;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/dF0N2Lo6JNSWeMPi.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<table>
<thead>
<tr>
<th style="text-align:left">//&#x589E;&#x52A0;&#x4E50;&#x89C2;&#x9501;<br>jedis.watch(qtkey);<br><br>//3.&#x5224;&#x65AD;&#x5E93;&#x5B58;<br>String qtkeystr = jedis.get(qtkey);<br>if(qtkeystr==null \</th>
<th style="text-align:left">\</th>
<th>&quot;&quot;.equals(qtkeystr.trim())) {<br>System.out.println(&quot;&#x672A;&#x521D;&#x59CB;&#x5316;&#x5E93;&#x5B58;&quot;);<br>jedis.close();<br>return false ;<br>}<br><br>int qt = Integer.parseInt(qtkeystr);<br>if(qt&lt;=0) {<br>System.err.println(&quot;&#x5DF2;&#x7ECF;&#x79D2;&#x5149;&quot;);<br>jedis.close();<br>return false;<br>}<br><br>//&#x589E;&#x52A0;&#x4E8B;&#x52A1;<br>Transaction multi = jedis.multi();<br><br>//4.&#x51CF;&#x5C11;&#x5E93;&#x5B58;<br>//jedis.decr(qtkey);<br>multi.decr(qtkey);<br><br>//5.&#x52A0;&#x4EBA;<br>//jedis.sadd(usrkey, uid);<br>multi.sadd(usrkey, uid);<br><br>//&#x6267;&#x884C;&#x4E8B;&#x52A1;<br>List<object> list = multi.exec();<br><br>//&#x5224;&#x65AD;&#x4E8B;&#x52A1;&#x63D0;&#x4EA4;&#x662F;&#x5426;&#x5931;&#x8D25;<br>if(list==null \</object></th>
<th>\</th>
<th>list.size()==0) {<br>System.out.println(&quot;&#x79D2;&#x6740;&#x5931;&#x8D25;&quot;);<br>jedis.close();<br>return false;<br>}<br>System.err.println(&quot;&#x79D2;&#x6740;&#x6210;&#x529F;&quot;);<br>jedis.close();</th>
<th><img src="https://uploader.shimo.im/f/Pbs8E3ffL7QHWPdn.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"><br><img src="https://uploader.shimo.im/f/EJBjypSbn9pqUQx9.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x7EE7;&#x7EED;&#x589E;&#x52A0;&#x5E76;&#x53D1;&#x6D4B;&#x8BD5;</p>
<p>&#x8FDE;&#x63A5;&#x6709;&#x9650;&#x5236;</p>
<p>ab -n 2000 -c 200 -k -p postfile -T &apos;application/x-www-form-urlencoded&apos;<a href="http://192.168.140.1:8080/seckill/doseckill?fileGuid=yBtmdjz5Ja42cjcb" target="_blank">http://192.168.140.1:8080/seckill/doseckill</a></p>
<p><img src="https://uploader.shimo.im/f/oojTEAm3NhkVqbZz.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x589E;&#x52A0;-r&#x53C2;&#x6570;&#xFF0C;-r   Don&apos;t exit on socket receive errors.</p>
<p>ab -n 2000 -c 100 -r -p postfile -T &apos;application/x-www-form-urlencoded&apos;<a href="http://192.168.140.1:8080/seckill/doseckill?fileGuid=yBtmdjz5Ja42cjcb" target="_blank">http://192.168.140.1:8080/seckill/doseckill</a></p>
<p>&#x5DF2;&#x7ECF;&#x79D2;&#x5149;&#xFF0C;&#x53EF;&#x662F;&#x8FD8;&#x6709;&#x5E93;&#x5B58;</p>
<p>ab -n 2000 -c 100 -p postfile -T &apos;application/x-www-form-urlencoded&apos;<a href="http://192.168.137.1:8080/seckill/doseckill?fileGuid=yBtmdjz5Ja42cjcb" target="_blank">http://192.168.137.1:8080/seckill/doseckill</a></p>
<p>&#x5DF2;&#x7ECF;&#x79D2;&#x5149;&#xFF0C;&#x53EF;&#x662F;&#x8FD8;&#x6709;&#x5E93;&#x5B58;&#x3002;&#x539F;&#x56E0;&#xFF0C;&#x5C31;&#x662F;&#x4E50;&#x89C2;&#x9501;&#x5BFC;&#x81F4;&#x5F88;&#x591A;&#x8BF7;&#x6C42;&#x90FD;&#x5931;&#x8D25;&#x3002;&#x5148;&#x70B9;&#x7684;&#x6CA1;&#x79D2;&#x5230;&#xFF0C;&#x540E;&#x70B9;&#x7684;&#x53EF;&#x80FD;&#x79D2;&#x5230;&#x4E86;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/E6NN8z2NM4QbtQ2K.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#xFF0C;&#x901A;&#x8FC7;&#x8FDE;&#x63A5;&#x6C60;&#x89E3;&#x51B3;</p>
<p><img src="https://uploader.shimo.im/f/YXlQdQImb0drpJFY.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x8FDE;&#x63A5;&#x6C60;</p>
<p>&#x8282;&#x7701;&#x6BCF;&#x6B21;&#x8FDE;&#x63A5;redis&#x670D;&#x52A1;&#x5E26;&#x6765;&#x7684;&#x6D88;&#x8017;&#xFF0C;&#x628A;&#x8FDE;&#x63A5;&#x597D;&#x7684;&#x5B9E;&#x4F8B;&#x53CD;&#x590D;&#x5229;&#x7528;&#x3002;</p>
<p>&#x901A;&#x8FC7;&#x53C2;&#x6570;&#x7BA1;&#x7406;&#x8FDE;&#x63A5;&#x7684;&#x884C;&#x4E3A;</p>
<p>&#x4EE3;&#x7801;&#x89C1;&#x9879;&#x76EE;&#x4E2D;</p>
<p>&#x94FE;&#x63A5;&#x6C60;&#x53C2;&#x6570;</p>
<p>MaxTotal&#xFF1A;&#x63A7;&#x5236;&#x4E00;&#x4E2A;pool&#x53EF;&#x5206;&#x914D;&#x591A;&#x5C11;&#x4E2A;jedis&#x5B9E;&#x4F8B;&#xFF0C;&#x901A;&#x8FC7;pool.getResource()&#x6765;&#x83B7;&#x53D6;&#xFF1B;&#x5982;&#x679C;&#x8D4B;&#x503C;&#x4E3A;-1&#xFF0C;&#x5219;&#x8868;&#x793A;&#x4E0D;&#x9650;&#x5236;&#xFF1B;&#x5982;&#x679C;pool&#x5DF2;&#x7ECF;&#x5206;&#x914D;&#x4E86;MaxTotal&#x4E2A;jedis&#x5B9E;&#x4F8B;&#xFF0C;&#x5219;&#x6B64;&#x65F6;pool&#x7684;&#x72B6;&#x6001;&#x4E3A;exhausted&#x3002;</p>
<p>maxIdle&#xFF1A;&#x63A7;&#x5236;&#x4E00;&#x4E2A;pool&#x6700;&#x591A;&#x6709;&#x591A;&#x5C11;&#x4E2A;&#x72B6;&#x6001;&#x4E3A;idle(&#x7A7A;&#x95F2;)&#x7684;jedis&#x5B9E;&#x4F8B;&#xFF1B;</p>
<p>MaxWaitMillis&#xFF1A;&#x8868;&#x793A;&#x5F53;borrow&#x4E00;&#x4E2A;jedis&#x5B9E;&#x4F8B;&#x65F6;&#xFF0C;&#x6700;&#x5927;&#x7684;&#x7B49;&#x5F85;&#x6BEB;&#x79D2;&#x6570;&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#xFF0C;&#x5219;&#x76F4;&#x63A5;&#x629B;JedisConnectionException&#xFF1B;</p>
<p>testOnBorrow&#xFF1A;&#x83B7;&#x5F97;&#x4E00;&#x4E2A;jedis&#x5B9E;&#x4F8B;&#x7684;&#x65F6;&#x5019;&#x662F;&#x5426;&#x68C0;&#x67E5;&#x8FDE;&#x63A5;&#x53EF;&#x7528;&#x6027;&#xFF08;ping()&#xFF09;&#xFF1B;&#x5982;&#x679C;&#x4E3A;true&#xFF0C;&#x5219;&#x5F97;&#x5230;&#x7684;jedis&#x5B9E;&#x4F8B;&#x5747;&#x662F;&#x53EF;&#x7528;&#x7684;&#xFF1B;</p>
<p>&#x89E3;&#x51B3;&#x5E93;&#x5B58;&#x9057;&#x7559;&#x95EE;&#x9898;</p>
<p>LUA&#x811A;&#x672C;</p>
<p><img src="https://uploader.shimo.im/f/KoDtlymdKYSDsI5p.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Lua &#x662F;&#x4E00;&#x4E2A;&#x5C0F;&#x5DE7;&#x7684;<a href="http://baike.baidu.com/item/%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80?fileGuid=yBtmdjz5Ja42cjcb" target="_blank">&#x811A;&#x672C;&#x8BED;&#x8A00;</a>&#xFF0C;Lua&#x811A;&#x672C;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x7684;&#x88AB;C/C++ &#x4EE3;&#x7801;&#x8C03;&#x7528;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x53CD;&#x8FC7;&#x6765;&#x8C03;&#x7528;C/C++&#x7684;&#x51FD;&#x6570;&#xFF0C;Lua&#x5E76;&#x6CA1;&#x6709;&#x63D0;&#x4F9B;&#x5F3A;&#x5927;&#x7684;&#x5E93;&#xFF0C;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;&#x7684;Lua&#x89E3;&#x91CA;&#x5668;&#x4E0D;&#x8FC7;200k&#xFF0C;&#x6240;&#x4EE5;Lua&#x4E0D;&#x9002;&#x5408;&#x4F5C;&#x4E3A;&#x5F00;&#x53D1;&#x72EC;&#x7ACB;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x8BED;&#x8A00;&#xFF0C;&#x800C;&#x662F;&#x4F5C;&#x4E3A;&#x5D4C;&#x5165;&#x5F0F;&#x811A;&#x672C;&#x8BED;&#x8A00;&#x3002;</p>
<p>&#x5F88;&#x591A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3001;&#x6E38;&#x620F;&#x4F7F;&#x7528;LUA&#x4F5C;&#x4E3A;&#x81EA;&#x5DF1;&#x7684;&#x5D4C;&#x5165;&#x5F0F;&#x811A;&#x672C;&#x8BED;&#x8A00;&#xFF0C;&#x4EE5;&#x6B64;&#x6765;&#x5B9E;&#x73B0;&#x53EF;&#x914D;&#x7F6E;&#x6027;&#x3001;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x3002;</p>
<p>&#x8FD9;&#x5176;&#x4E2D;&#x5305;&#x62EC;&#x9B54;&#x517D;&#x4E89;&#x9738;&#x5730;&#x56FE;&#x3001;&#x9B54;&#x517D;&#x4E16;&#x754C;&#x3001;&#x535A;&#x5FB7;&#x4E4B;&#x95E8;&#x3001;&#x6124;&#x6012;&#x7684;&#x5C0F;&#x9E1F;&#x7B49;&#x4F17;&#x591A;&#x6E38;&#x620F;&#x63D2;&#x4EF6;&#x6216;&#x5916;&#x6302;&#x3002;</p>
<p><a href="https://www.w3cschool.cn/lua/?fileGuid=yBtmdjz5Ja42cjcb" target="_blank">https://www.w3cschool.cn/lua/</a></p>
<p>LUA&#x811A;&#x672C;&#x5728;Redis&#x4E2D;&#x7684;&#x4F18;&#x52BF;</p>
<p>&#x5C06;&#x590D;&#x6742;&#x7684;&#x6216;&#x8005;&#x591A;&#x6B65;&#x7684;redis&#x64CD;&#x4F5C;&#xFF0C;&#x5199;&#x4E3A;&#x4E00;&#x4E2A;&#x811A;&#x672C;&#xFF0C;&#x4E00;&#x6B21;&#x63D0;&#x4EA4;&#x7ED9;redis&#x6267;&#x884C;&#xFF0C;&#x51CF;&#x5C11;&#x53CD;&#x590D;&#x8FDE;&#x63A5;redis&#x7684;&#x6B21;&#x6570;&#x3002;&#x63D0;&#x5347;&#x6027;&#x80FD;&#x3002;</p>
<p>LUA&#x811A;&#x672C;&#x662F;&#x7C7B;&#x4F3C;redis&#x4E8B;&#x52A1;&#xFF0C;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x539F;&#x5B50;&#x6027;&#xFF0C;&#x4E0D;&#x4F1A;&#x88AB;&#x5176;&#x4ED6;&#x547D;&#x4EE4;&#x63D2;&#x961F;&#xFF0C;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;&#x4E00;&#x4E9B;redis&#x4E8B;&#x52A1;&#x6027;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x4F46;&#x662F;&#x6CE8;&#x610F;redis&#x7684;lua&#x811A;&#x672C;&#x529F;&#x80FD;&#xFF0C;&#x53EA;&#x6709;&#x5728;Redis 2.6&#x4EE5;&#x4E0A;&#x7684;&#x7248;&#x672C;&#x624D;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x5229;&#x7528;lua&#x811A;&#x672C;&#x6DD8;&#x6C70;&#x7528;&#x6237;&#xFF0C;&#x89E3;&#x51B3;&#x8D85;&#x5356;&#x95EE;&#x9898;&#x3002;</p>
<p>redis 2.6&#x7248;&#x672C;&#x4EE5;&#x540E;&#xFF0C;&#x901A;&#x8FC7;lua&#x811A;&#x672C;&#x89E3;&#x51B3;&#x4E89;&#x62A2;&#x95EE;&#x9898;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x662F;redis &#x5229;&#x7528;&#x5176;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x7528;&#x4EFB;&#x52A1;&#x961F;&#x5217;&#x7684;&#x65B9;&#x5F0F;&#x89E3;&#x51B3;&#x591A;&#x4EFB;&#x52A1;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/Sx7IM3DxrO39LRqW.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Redis<em>&#x4E8B;&#x52A1;</em>&#x79D2;&#x6740;&#x6848;&#x4F8B;_&#x4EE3;&#x7801;</p>
<p>&#x9879;&#x76EE;&#x7ED3;&#x6784;</p>
<p><img src="https://uploader.shimo.im/f/QDuphfuKGyof7zZA.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x7B2C;&#x4E00;&#x7248;&#xFF1A;&#x7B80;&#x5355;&#x7248;</p>
<p>&#x8001;&#x5E08;&#x70B9;10&#x6B21;&#xFF0C;&#x6B63;&#x5E38;&#x79D2;&#x6740;</p>
<p>&#x540C;&#x5B66;&#x4E00;&#x8D77;&#x70B9;&#x8BD5;&#x4E00;&#x8BD5;&#xFF0C;&#x79D2;&#x6740;&#x4E5F;&#x662F;&#x6B63;&#x5E38;&#x7684;&#x3002;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x8FD8;&#x8FBE;&#x4E0D;&#x5230;&#x5E76;&#x53D1;&#x7684;&#x6548;&#x679C;&#x3002;</p>
<p>&#x4F7F;&#x7528;&#x5DE5;&#x5177;ab&#x6A21;&#x62DF;&#x5E76;&#x53D1;&#x6D4B;&#x8BD5;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;&#x8D85;&#x5356;&#x60C5;&#x51B5;&#x3002;&#x67E5;&#x770B;&#x5E93;&#x5B58;&#x4F1A;&#x51FA;&#x73B0;&#x8D1F;&#x6570;&#x3002;</p>
<p>&#x7B2C;&#x4E8C;&#x7248;&#xFF1A;&#x52A0;&#x4E8B;&#x52A1;-&#x4E50;&#x89C2;&#x9501;(&#x89E3;&#x51B3;&#x8D85;&#x5356;),&#x4F46;&#x51FA;&#x73B0;&#x9057;&#x7559;&#x5E93;&#x5B58;&#x548C;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;</p>
<p>&#x7B2C;&#x4E09;&#x7248;&#xFF1A;&#x8FDE;&#x63A5;&#x6C60;&#x89E3;&#x51B3;&#x8D85;&#x65F6;&#x95EE;&#x9898;</p>
<p>&#x7B2C;&#x56DB;&#x7248;&#xFF1A;&#x89E3;&#x51B3;&#x5E93;&#x5B58;&#x4F9D;&#x8D56;&#x95EE;&#x9898;&#xFF0C;LUA&#x811A;&#x672C;</p>
<table>
<thead>
<tr>
<th style="text-align:left">local userid=KEYS[1];<br>local prodid=KEYS[2];<br>localqtkey=&quot;sk:&quot;..prodid..&quot;:qt&quot;;<br>localusersKey=&quot;sk:&quot;..prodid.&quot;:usr&apos;;<br>local userExists=redis.call(&quot;sismember&quot;,usersKey,userid);<br>if tonumber(userExists)==1 then<br>return 2;<br>end<br>local num= redis.call(&quot;get&quot; ,qtkey);<br>if tonumber(num)&lt;=0 then<br>return 0;<br>else<br>redis.call(&quot;decr&quot;,qtkey);<br>redis.call(&quot;sadd&quot;,usersKey,userid);<br>end<br>return 1;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h1 id="12redis&#x6301;&#x4E45;&#x5316;&#x4E4B;rdb">12.Redis&#x6301;&#x4E45;&#x5316;&#x4E4B;RDB</h1>
<p>&#x603B;&#x4F53;&#x4ECB;&#x7ECD;</p>
<p>&#x5B98;&#x7F51;&#x4ECB;&#x7ECD;&#xFF1A;<a href="http://www.redis.io" target="_blank">http://www.redis.io</a></p>
<p><img src="https://uploader.shimo.im/f/zbSTcwAtKCyHrcUh.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Redis &#x63D0;&#x4F9B;&#x4E86;2&#x4E2A;&#x4E0D;&#x540C;&#x5F62;&#x5F0F;&#x7684;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#x3002;</p>
<p>RDB&#xFF08;Redis DataBase&#xFF09;</p>
<p>AOF&#xFF08;Append Of File&#xFF09;</p>
<p>RDB&#xFF08;Redis DataBase&#xFF09;</p>
<p>&#x5B98;&#x7F51;&#x4ECB;&#x7ECD;</p>
<p><img src="https://uploader.shimo.im/f/3qMiEO4PWvW90J2X.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x662F;&#x4EC0;&#x4E48;</p>
<p>&#x5728;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x5185;&#x5C06;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x96C6;&#x5FEB;&#x7167;&#x5199;&#x5165;&#x78C1;&#x76D8;&#xFF0C; &#x4E5F;&#x5C31;&#x662F;&#x884C;&#x8BDD;&#x8BB2;&#x7684;Snapshot&#x5FEB;&#x7167;&#xFF0C;&#x5B83;&#x6062;&#x590D;&#x65F6;&#x662F;&#x5C06;&#x5FEB;&#x7167;&#x6587;&#x4EF6;&#x76F4;&#x63A5;&#x8BFB;&#x5230;&#x5185;&#x5B58;&#x91CC;</p>
<p>&#x5907;&#x4EFD;&#x662F;&#x5982;&#x4F55;&#x6267;&#x884C;&#x7684;</p>
<p>Redis&#x4F1A;&#x5355;&#x72EC;&#x521B;&#x5EFA;&#xFF08;fork&#xFF09;&#x4E00;&#x4E2A;&#x5B50;&#x8FDB;&#x7A0B;&#x6765;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#xFF0C;&#x4F1A;&#x5148;&#x5C06;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230; &#x4E00;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5F85;&#x6301;&#x4E45;&#x5316;&#x8FC7;&#x7A0B;&#x90FD;&#x7ED3;&#x675F;&#x4E86;&#xFF0C;&#x518D;&#x7528;&#x8FD9;&#x4E2A;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x66FF;&#x6362;&#x4E0A;&#x6B21;&#x6301;&#x4E45;&#x5316;&#x597D;&#x7684;&#x6587;&#x4EF6;&#x3002; &#x6574;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x4E3B;&#x8FDB;&#x7A0B;&#x662F;&#x4E0D;&#x8FDB;&#x884C;&#x4EFB;&#x4F55;IO&#x64CD;&#x4F5C;&#x7684;&#xFF0C;&#x8FD9;&#x5C31;&#x786E;&#x4FDD;&#x4E86;&#x6781;&#x9AD8;&#x7684;&#x6027;&#x80FD; &#x5982;&#x679C;&#x9700;&#x8981;&#x8FDB;&#x884C;&#x5927;&#x89C4;&#x6A21;&#x6570;&#x636E;&#x7684;&#x6062;&#x590D;&#xFF0C;&#x4E14;&#x5BF9;&#x4E8E;&#x6570;&#x636E;&#x6062;&#x590D;&#x7684;&#x5B8C;&#x6574;&#x6027;&#x4E0D;&#x662F;&#x975E;&#x5E38;&#x654F;&#x611F;&#xFF0C;&#x90A3;RDB&#x65B9;&#x5F0F;&#x8981;&#x6BD4;AOF&#x65B9;&#x5F0F;&#x66F4;&#x52A0;&#x7684;&#x9AD8;&#x6548;&#x3002;RDB&#x7684;&#x7F3A;&#x70B9;&#x662F;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x6301;&#x4E45;&#x5316;&#x540E;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x3002;</p>
<p>Fork</p>
<p>Fork&#x7684;&#x4F5C;&#x7528;&#x662F;&#x590D;&#x5236;&#x4E00;&#x4E2A;&#x4E0E;&#x5F53;&#x524D;&#x8FDB;&#x7A0B;&#x4E00;&#x6837;&#x7684;&#x8FDB;&#x7A0B;&#x3002;&#x65B0;&#x8FDB;&#x7A0B;&#x7684;&#x6240;&#x6709;&#x6570;&#x636E;&#xFF08;&#x53D8;&#x91CF;&#x3001;&#x73AF;&#x5883;&#x53D8;&#x91CF;&#x3001;&#x7A0B;&#x5E8F;&#x8BA1;&#x6570;&#x5668;&#x7B49;&#xFF09; &#x6570;&#x503C;&#x90FD;&#x548C;&#x539F;&#x8FDB;&#x7A0B;&#x4E00;&#x81F4;&#xFF0C;&#x4F46;&#x662F;&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x65B0;&#x7684;&#x8FDB;&#x7A0B;&#xFF0C;&#x5E76;&#x4F5C;&#x4E3A;&#x539F;&#x8FDB;&#x7A0B;&#x7684;&#x5B50;&#x8FDB;&#x7A0B;</p>
<p>&#x5728;Linux&#x7A0B;&#x5E8F;&#x4E2D;&#xFF0C;fork()&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x548C;&#x7236;&#x8FDB;&#x7A0B;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x5B50;&#x8FDB;&#x7A0B;&#xFF0C;&#x4F46;&#x5B50;&#x8FDB;&#x7A0B;&#x5728;&#x6B64;&#x540E;&#x591A;&#x4F1A;exec&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#xFF0C;&#x51FA;&#x4E8E;&#x6548;&#x7387;&#x8003;&#x8651;&#xFF0C;Linux&#x4E2D;&#x5F15;&#x5165;&#x4E86;&#x201C;&#x5199;&#x65F6;&#x590D;&#x5236;&#x6280;&#x672F;&#x201D;</p>
<p>&#x4E00;&#x822C;&#x60C5;&#x51B5;&#x7236;&#x8FDB;&#x7A0B;&#x548C;&#x5B50;&#x8FDB;&#x7A0B;&#x4F1A;&#x5171;&#x7528;&#x540C;&#x4E00;&#x6BB5;&#x7269;&#x7406;&#x5185;&#x5B58;&#xFF0C;&#x53EA;&#x6709;&#x8FDB;&#x7A0B;&#x7A7A;&#x95F4;&#x7684;&#x5404;&#x6BB5;&#x7684;&#x5185;&#x5BB9;&#x8981;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;&#xFF0C;&#x624D;&#x4F1A;&#x5C06;&#x7236;&#x8FDB;&#x7A0B;&#x7684;&#x5185;&#x5BB9;&#x590D;&#x5236;&#x4E00;&#x4EFD;&#x7ED9;&#x5B50;&#x8FDB;&#x7A0B;&#x3002;</p>
<p>RDB&#x6301;&#x4E45;&#x5316;&#x6D41;&#x7A0B;</p>
<p><img src="https://uploader.shimo.im/f/SSlDmVkra8AIdrmA.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>dump.rdb&#x6587;&#x4EF6;</p>
<p>&#x5728;redis.conf&#x4E2D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;dump.rdb</p>
<p><img src="https://uploader.shimo.im/f/2owP6gPgEckz9V8B.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x914D;&#x7F6E;&#x4F4D;&#x7F6E;</p>
<p>rdb&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A;Redis&#x542F;&#x52A8;&#x65F6;&#x547D;&#x4EE4;&#x884C;&#x6240;&#x5728;&#x7684;&#x76EE;&#x5F55;&#x4E0B;</p>
<p>dir &quot;/myredis/&quot;</p>
<p><img src="https://uploader.shimo.im/f/M56xUQPO2rHeuYFD.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5982;&#x4F55;&#x89E6;&#x53D1;RDB&#x5FEB;&#x7167;&#xFF1B;&#x4FDD;&#x6301;&#x7B56;&#x7565;</p>
<p>&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x9ED8;&#x8BA4;&#x7684;&#x5FEB;&#x7167;&#x914D;&#x7F6E;</p>
<p><img src="https://uploader.shimo.im/f/sGvcNCSFyPhwum5g.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x547D;&#x4EE4;save VS bgsave</p>
<p>save &#xFF1A;save&#x65F6;&#x53EA;&#x7BA1;&#x4FDD;&#x5B58;&#xFF0C;&#x5176;&#x5B83;&#x4E0D;&#x7BA1;&#xFF0C;&#x5168;&#x90E8;&#x963B;&#x585E;&#x3002;&#x624B;&#x52A8;&#x4FDD;&#x5B58;&#x3002;&#x4E0D;&#x5EFA;&#x8BAE;&#x3002;</p>
<p>bgsave&#xFF1A;Redis&#x4F1A;&#x5728;&#x540E;&#x53F0;&#x5F02;&#x6B65;&#x8FDB;&#x884C;&#x5FEB;&#x7167;&#x64CD;&#x4F5C;&#xFF0C; &#x5FEB;&#x7167;&#x540C;&#x65F6;&#x8FD8;&#x53EF;&#x4EE5;&#x54CD;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#x8BF7;&#x6C42;&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;lastsave &#x547D;&#x4EE4;&#x83B7;&#x53D6;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x6210;&#x529F;&#x6267;&#x884C;&#x5FEB;&#x7167;&#x7684;&#x65F6;&#x95F4;</p>
<p>flushall&#x547D;&#x4EE4;</p>
<p>&#x6267;&#x884C;flushall&#x547D;&#x4EE4;&#xFF0C;&#x4E5F;&#x4F1A;&#x4EA7;&#x751F;dump.rdb&#x6587;&#x4EF6;&#xFF0C;&#x4F46;&#x91CC;&#x9762;&#x662F;&#x7A7A;&#x7684;&#xFF0C;&#x65E0;&#x610F;&#x4E49;</p>
<h3 id="snapshotting&#x5FEB;&#x7167;">SNAPSHOTTING&#x5FEB;&#x7167;</h3>
<p>Save</p>
<p>&#x683C;&#x5F0F;&#xFF1A;save &#x79D2;&#x949F; &#x5199;&#x64CD;&#x4F5C;&#x6B21;&#x6570;</p>
<p>RDB&#x662F;&#x6574;&#x4E2A;&#x5185;&#x5B58;&#x7684;&#x538B;&#x7F29;&#x8FC7;&#x7684;Snapshot&#xFF0C;RDB&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF0C;&#x53EF;&#x4EE5;&#x914D;&#x7F6E;&#x590D;&#x5408;&#x7684;&#x5FEB;&#x7167;&#x89E6;&#x53D1;&#x6761;&#x4EF6;&#xFF0C;</p>
<p>&#x9ED8;&#x8BA4;&#x662F;1&#x5206;&#x949F;&#x5185;&#x6539;&#x4E86;1&#x4E07;&#x6B21;&#xFF0C;&#x6216;5&#x5206;&#x949F;&#x5185;&#x6539;&#x4E86;10&#x6B21;&#xFF0C;&#x6216;15&#x5206;&#x949F;&#x5185;&#x6539;&#x4E86;1&#x6B21;&#x3002;</p>
<p>&#x7981;&#x7528;</p>
<p>&#x4E0D;&#x8BBE;&#x7F6E;save&#x6307;&#x4EE4;&#xFF0C;&#x6216;&#x8005;&#x7ED9;save&#x4F20;&#x5165;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;</p>
<p>stop-writes-on-bgsave-error</p>
<p><img src="https://uploader.shimo.im/f/LHm2WDpcmuS8sDtw.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5F53;Redis&#x65E0;&#x6CD5;&#x5199;&#x5165;&#x78C1;&#x76D8;&#x7684;&#x8BDD;&#xFF0C;&#x76F4;&#x63A5;&#x5173;&#x6389;Redis&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x3002;&#x63A8;&#x8350;yes.</p>
<p>rdbcompression &#x538B;&#x7F29;&#x6587;&#x4EF6;</p>
<p><img src="https://uploader.shimo.im/f/w2U62etvjGLJrzGd.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5BF9;&#x4E8E;&#x5B58;&#x50A8;&#x5230;&#x78C1;&#x76D8;&#x4E2D;&#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x5B58;&#x50A8;&#x3002;&#x5982;&#x679C;&#x662F;&#x7684;&#x8BDD;&#xFF0C;redis&#x4F1A;&#x91C7;&#x7528;LZF&#x7B97;&#x6CD5;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x4E0D;&#x60F3;&#x6D88;&#x8017;CPU&#x6765;&#x8FDB;&#x884C;&#x538B;&#x7F29;&#x7684;&#x8BDD;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E3A;&#x5173;&#x95ED;&#x6B64;&#x529F;&#x80FD;&#x3002;&#x63A8;&#x8350;yes.</p>
<p>rdbchecksum &#x68C0;&#x67E5;&#x5B8C;&#x6574;&#x6027;</p>
<p><img src="https://uploader.shimo.im/f/MjZduV6xJilCpedx.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5728;&#x5B58;&#x50A8;&#x5FEB;&#x7167;&#x540E;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x8BA9;redis&#x4F7F;&#x7528;CRC64&#x7B97;&#x6CD5;&#x6765;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6821;&#x9A8C;&#xFF0C;</p>
<p>&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x4F1A;&#x589E;&#x52A0;&#x5927;&#x7EA6;10%&#x7684;&#x6027;&#x80FD;&#x6D88;&#x8017;&#xFF0C;&#x5982;&#x679C;&#x5E0C;&#x671B;&#x83B7;&#x53D6;&#x5230;&#x6700;&#x5927;&#x7684;&#x6027;&#x80FD;&#x63D0;&#x5347;&#xFF0C;&#x53EF;&#x4EE5;&#x5173;&#x95ED;&#x6B64;&#x529F;&#x80FD;</p>
<p>&#x63A8;&#x8350;yes.</p>
<p>rdb&#x7684;&#x5907;&#x4EFD;</p>
<p>&#x5148;&#x901A;&#x8FC7;config get dir  &#x67E5;&#x8BE2;rdb&#x6587;&#x4EF6;&#x7684;&#x76EE;&#x5F55;</p>
<p>&#x5C06;*.rdb&#x7684;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x522B;&#x7684;&#x5730;&#x65B9;</p>
<p>rdb&#x7684;&#x6062;&#x590D;</p>
<p>&#x5173;&#x95ED;Redis</p>
<p>&#x5148;&#x628A;&#x5907;&#x4EFD;&#x7684;&#x6587;&#x4EF6;&#x62F7;&#x8D1D;&#x5230;&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E0B; cp dump2.rdb dump.rdb</p>
<p>&#x542F;&#x52A8;Redis, &#x5907;&#x4EFD;&#x6570;&#x636E;&#x4F1A;&#x76F4;&#x63A5;&#x52A0;&#x8F7D;</p>
<p>&#x4F18;&#x52BF;</p>
<p>&#x9002;&#x5408;&#x5927;&#x89C4;&#x6A21;&#x7684;&#x6570;&#x636E;&#x6062;&#x590D;</p>
<p>&#x5BF9;&#x6570;&#x636E;&#x5B8C;&#x6574;&#x6027;&#x548C;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#x4E0D;&#x9AD8;&#x66F4;&#x9002;&#x5408;&#x4F7F;&#x7528;</p>
<p>&#x8282;&#x7701;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;</p>
<p>&#x6062;&#x590D;&#x901F;&#x5EA6;&#x5FEB;</p>
<p><img src="https://uploader.shimo.im/f/ZGOtIO4iQKi5XaWX.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x52A3;&#x52BF;</p>
<p>Fork&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x88AB;&#x514B;&#x9686;&#x4E86;&#x4E00;&#x4EFD;&#xFF0C;&#x5927;&#x81F4;2&#x500D;&#x7684;&#x81A8;&#x80C0;&#x6027;&#x9700;&#x8981;&#x8003;&#x8651;</p>
<p>&#x867D;&#x7136;Redis&#x5728;fork&#x65F6;&#x4F7F;&#x7528;&#x4E86;&#x5199;&#x65F6;&#x62F7;&#x8D1D;&#x6280;&#x672F;,&#x4F46;&#x662F;&#x5982;&#x679C;&#x6570;&#x636E;&#x5E9E;&#x5927;&#x65F6;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x6D88;&#x8017;&#x6027;&#x80FD;&#x3002;</p>
<p>&#x5728;&#x5907;&#x4EFD;&#x5468;&#x671F;&#x5728;&#x4E00;&#x5B9A;&#x95F4;&#x9694;&#x65F6;&#x95F4;&#x505A;&#x4E00;&#x6B21;&#x5907;&#x4EFD;&#xFF0C;&#x6240;&#x4EE5;&#x5982;&#x679C;Redis&#x610F;&#x5916;down&#x6389;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4F1A;&#x4E22;&#x5931;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x5FEB;&#x7167;&#x540E;&#x7684;&#x6240;&#x6709;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x5982;&#x4F55;&#x505C;&#x6B62;</p>
<p>&#x52A8;&#x6001;&#x505C;&#x6B62;RDB&#xFF1A;redis-cli config set save &quot;&quot;#save&#x540E;&#x7ED9;&#x7A7A;&#x503C;&#xFF0C;&#x8868;&#x793A;&#x7981;&#x7528;&#x4FDD;&#x5B58;&#x7B56;&#x7565;</p>
<p>&#x5C0F;&#x603B;&#x7ED3;</p>
<p><img src="https://uploader.shimo.im/f/aAS7hU3hCvOseNIU.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h1 id="13redis&#x6301;&#x4E45;&#x5316;&#x4E4B;aof">13.Redis&#x6301;&#x4E45;&#x5316;&#x4E4B;AOF</h1>
<p>AOF&#xFF08;Append Only File&#xFF09;</p>
<p>&#x662F;&#x4EC0;&#x4E48;</p>
<p>&#x4EE5;&#x65E5;&#x5FD7;&#x7684;&#x5F62;&#x5F0F;&#x6765;&#x8BB0;&#x5F55;&#x6BCF;&#x4E2A;&#x5199;&#x64CD;&#x4F5C;&#xFF08;&#x589E;&#x91CF;&#x4FDD;&#x5B58;&#xFF09;&#xFF0C;&#x5C06;Redis&#x6267;&#x884C;&#x8FC7;&#x7684;&#x6240;&#x6709;&#x5199;&#x6307;&#x4EE4;&#x8BB0;&#x5F55;&#x4E0B;&#x6765;(&#x8BFB;&#x64CD;&#x4F5C;&#x4E0D;&#x8BB0;&#x5F55;)&#xFF0C; &#x53EA;&#x8BB8;&#x8FFD;&#x52A0;&#x6587;&#x4EF6;&#x4F46;&#x4E0D;&#x53EF;&#x4EE5;&#x6539;&#x5199;&#x6587;&#x4EF6;&#xFF0C;redis&#x542F;&#x52A8;&#x4E4B;&#x521D;&#x4F1A;&#x8BFB;&#x53D6;&#x8BE5;&#x6587;&#x4EF6;&#x91CD;&#x65B0;&#x6784;&#x5EFA;&#x6570;&#x636E;&#xFF0C;&#x6362;&#x8A00;&#x4E4B;&#xFF0C;redis &#x91CD;&#x542F;&#x7684;&#x8BDD;&#x5C31;&#x6839;&#x636E;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x5C06;&#x5199;&#x6307;&#x4EE4;&#x4ECE;&#x524D;&#x5230;&#x540E;&#x6267;&#x884C;&#x4E00;&#x6B21;&#x4EE5;&#x5B8C;&#x6210;&#x6570;&#x636E;&#x7684;&#x6062;&#x590D;&#x5DE5;&#x4F5C;</p>
<p>AOF&#x6301;&#x4E45;&#x5316;&#x6D41;&#x7A0B;</p>
<p>&#xFF08;1&#xFF09;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8BF7;&#x6C42;&#x5199;&#x547D;&#x4EE4;&#x4F1A;&#x88AB;append&#x8FFD;&#x52A0;&#x5230;AOF&#x7F13;&#x51B2;&#x533A;&#x5185;&#xFF1B;</p>
<p>&#xFF08;2&#xFF09;AOF&#x7F13;&#x51B2;&#x533A;&#x6839;&#x636E;AOF&#x6301;&#x4E45;&#x5316;&#x7B56;&#x7565;[always,everysec,no]&#x5C06;&#x64CD;&#x4F5C;sync&#x540C;&#x6B65;&#x5230;&#x78C1;&#x76D8;&#x7684;AOF&#x6587;&#x4EF6;&#x4E2D;&#xFF1B;</p>
<p>&#xFF08;3&#xFF09;AOF&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;&#x91CD;&#x5199;&#x7B56;&#x7565;&#x6216;&#x624B;&#x52A8;&#x91CD;&#x5199;&#x65F6;&#xFF0C;&#x4F1A;&#x5BF9;AOF&#x6587;&#x4EF6;rewrite&#x91CD;&#x5199;&#xFF0C;&#x538B;&#x7F29;AOF&#x6587;&#x4EF6;&#x5BB9;&#x91CF;&#xFF1B;</p>
<p>&#xFF08;4&#xFF09;Redis&#x670D;&#x52A1;&#x91CD;&#x542F;&#x65F6;&#xFF0C;&#x4F1A;&#x91CD;&#x65B0;load&#x52A0;&#x8F7D;AOF&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x8FBE;&#x5230;&#x6570;&#x636E;&#x6062;&#x590D;&#x7684;&#x76EE;&#x7684;&#xFF1B;</p>
<p><img src="https://uploader.shimo.im/f/5ko3knKkHxjSfVTw.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>AOF&#x9ED8;&#x8BA4;&#x4E0D;&#x5F00;&#x542F;</p>
<p>&#x53EF;&#x4EE5;&#x5728;redis.conf&#x4E2D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;&#x79F0;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A; appendonly.aof</p>
<p>AOF&#x6587;&#x4EF6;&#x7684;&#x4FDD;&#x5B58;&#x8DEF;&#x5F84;&#xFF0C;&#x540C;RDB&#x7684;&#x8DEF;&#x5F84;&#x4E00;&#x81F4;&#x3002;</p>
<p>AOF&#x548C;RDB&#x540C;&#x65F6;&#x5F00;&#x542F;&#xFF0C;redis&#x542C;&#x8C01;&#x7684;&#xFF1F;</p>
<p>AOF&#x548C;RDB&#x540C;&#x65F6;&#x5F00;&#x542F;&#xFF0C;&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x53D6;AOF&#x7684;&#x6570;&#x636E;&#xFF08;&#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x5B58;&#x5728;&#x4E22;&#x5931;&#xFF09;</p>
<p>AOF&#x542F;&#x52A8;/&#x4FEE;&#x590D;/&#x6062;&#x590D;</p>
<p>AOF&#x7684;&#x5907;&#x4EFD;&#x673A;&#x5236;&#x548C;&#x6027;&#x80FD;&#x867D;&#x7136;&#x548C;RDB&#x4E0D;&#x540C;, &#x4F46;&#x662F;&#x5907;&#x4EFD;&#x548C;&#x6062;&#x590D;&#x7684;&#x64CD;&#x4F5C;&#x540C;RDB&#x4E00;&#x6837;&#xFF0C;&#x90FD;&#x662F;&#x62F7;&#x8D1D;&#x5907;&#x4EFD;&#x6587;&#x4EF6;&#xFF0C;&#x9700;&#x8981;&#x6062;&#x590D;&#x65F6;&#x518D;&#x62F7;&#x8D1D;&#x5230;Redis&#x5DE5;&#x4F5C;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x542F;&#x52A8;&#x7CFB;&#x7EDF;&#x5373;&#x52A0;&#x8F7D;&#x3002;</p>
<p>&#x6B63;&#x5E38;&#x6062;&#x590D;</p>
<p>&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7684;appendonly no&#xFF0C;&#x6539;&#x4E3A;yes</p>
<p>&#x5C06;&#x6709;&#x6570;&#x636E;&#x7684;aof&#x6587;&#x4EF6;&#x590D;&#x5236;&#x4E00;&#x4EFD;&#x4FDD;&#x5B58;&#x5230;&#x5BF9;&#x5E94;&#x76EE;&#x5F55;(&#x67E5;&#x770B;&#x76EE;&#x5F55;&#xFF1A;config get dir)</p>
<p>&#x6062;&#x590D;&#xFF1A;&#x91CD;&#x542F;redis&#x7136;&#x540E;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</p>
<p>&#x5F02;&#x5E38;&#x6062;&#x590D;</p>
<p>&#x4FEE;&#x6539;&#x9ED8;&#x8BA4;&#x7684;appendonly no&#xFF0C;&#x6539;&#x4E3A;yes</p>
<p>&#x5982;&#x9047;&#x5230;AOF&#x6587;&#x4EF6;&#x635F;&#x574F;&#xFF0C;&#x901A;&#x8FC7;/usr/local/bin/redis-check-aof--fix appendonly.aof&#x8FDB;&#x884C;&#x6062;&#x590D;</p>
<p>&#x5907;&#x4EFD;&#x88AB;&#x5199;&#x574F;&#x7684;AOF&#x6587;&#x4EF6;</p>
<p>&#x6062;&#x590D;&#xFF1A;&#x91CD;&#x542F;redis&#xFF0C;&#x7136;&#x540E;&#x91CD;&#x65B0;&#x52A0;&#x8F7D;</p>
<p>AOF&#x540C;&#x6B65;&#x9891;&#x7387;&#x8BBE;&#x7F6E;</p>
<p>appendfsync always</p>
<p>&#x59CB;&#x7EC8;&#x540C;&#x6B65;&#xFF0C;&#x6BCF;&#x6B21;Redis&#x7684;&#x5199;&#x5165;&#x90FD;&#x4F1A;&#x7ACB;&#x523B;&#x8BB0;&#x5165;&#x65E5;&#x5FD7;&#xFF1B;&#x6027;&#x80FD;&#x8F83;&#x5DEE;&#x4F46;&#x6570;&#x636E;&#x5B8C;&#x6574;&#x6027;&#x6BD4;&#x8F83;&#x597D;</p>
<p>appendfsync everysec</p>
<p>&#x6BCF;&#x79D2;&#x540C;&#x6B65;&#xFF0C;&#x6BCF;&#x79D2;&#x8BB0;&#x5165;&#x65E5;&#x5FD7;&#x4E00;&#x6B21;&#xFF0C;&#x5982;&#x679C;&#x5B95;&#x673A;&#xFF0C;&#x672C;&#x79D2;&#x7684;&#x6570;&#x636E;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x3002;</p>
<p>appendfsync no</p>
<p>redis&#x4E0D;&#x4E3B;&#x52A8;&#x8FDB;&#x884C;&#x540C;&#x6B65;&#xFF0C;&#x628A;&#x540C;&#x6B65;&#x65F6;&#x673A;&#x4EA4;&#x7ED9;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x3002;</p>
<p>Rewrite&#x538B;&#x7F29;</p>
<p>1&#x662F;&#x4EC0;&#x4E48;&#xFF1A;</p>
<p>AOF&#x91C7;&#x7528;&#x6587;&#x4EF6;&#x8FFD;&#x52A0;&#x65B9;&#x5F0F;&#xFF0C;&#x6587;&#x4EF6;&#x4F1A;&#x8D8A;&#x6765;&#x8D8A;&#x5927;&#x4E3A;&#x907F;&#x514D;&#x51FA;&#x73B0;&#x6B64;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x65B0;&#x589E;&#x4E86;&#x91CD;&#x5199;&#x673A;&#x5236;, &#x5F53;AOF&#x6587;&#x4EF6;&#x7684;&#x5927;&#x5C0F;&#x8D85;&#x8FC7;&#x6240;&#x8BBE;&#x5B9A;&#x7684;&#x9608;&#x503C;&#x65F6;&#xFF0C;Redis&#x5C31;&#x4F1A;&#x542F;&#x52A8;AOF&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x538B;&#x7F29;&#xFF0C; &#x53EA;&#x4FDD;&#x7559;&#x53EF;&#x4EE5;&#x6062;&#x590D;&#x6570;&#x636E;&#x7684;&#x6700;&#x5C0F;&#x6307;&#x4EE4;&#x96C6;.&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x547D;&#x4EE4;bgrewriteaof</p>
<p>2&#x91CD;&#x5199;&#x539F;&#x7406;&#xFF0C;&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x91CD;&#x5199;</p>
<p>AOF&#x6587;&#x4EF6;&#x6301;&#x7EED;&#x589E;&#x957F;&#x800C;&#x8FC7;&#x5927;&#x65F6;&#xFF0C;&#x4F1A;fork&#x51FA;&#x4E00;&#x6761;&#x65B0;&#x8FDB;&#x7A0B;&#x6765;&#x5C06;&#x6587;&#x4EF6;&#x91CD;&#x5199;(&#x4E5F;&#x662F;&#x5148;&#x5199;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#x6700;&#x540E;&#x518D;rename)&#xFF0C;redis4.0&#x7248;&#x672C;&#x540E;&#x7684;&#x91CD;&#x5199;&#xFF0C;&#x662F;&#x6307;&#x4E0A;&#x5C31;&#x662F;&#x628A;rdb &#x7684;&#x5FEB;&#x7167;&#xFF0C;&#x4EE5;&#x4E8C;&#x7EA7;&#x5236;&#x7684;&#x5F62;&#x5F0F;&#x9644;&#x5728;&#x65B0;&#x7684;aof&#x5934;&#x90E8;&#xFF0C;&#x4F5C;&#x4E3A;&#x5DF2;&#x6709;&#x7684;&#x5386;&#x53F2;&#x6570;&#x636E;&#xFF0C;&#x66FF;&#x6362;&#x6389;&#x539F;&#x6765;&#x7684;&#x6D41;&#x6C34;&#x8D26;&#x64CD;&#x4F5C;&#x3002;</p>
<p>no-appendfsync-on-rewrite&#xFF1A;</p>
<p>&#x5982;&#x679C; no-appendfsync-on-rewrite=yes ,&#x4E0D;&#x5199;&#x5165;aof&#x6587;&#x4EF6;&#x53EA;&#x5199;&#x5165;&#x7F13;&#x5B58;&#xFF0C;&#x7528;&#x6237;&#x8BF7;&#x6C42;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x5982;&#x679C;&#x5B95;&#x673A;&#x4F1A;&#x4E22;&#x5931;&#x8FD9;&#x6BB5;&#x65F6;&#x95F4;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x3002;&#xFF08;&#x964D;&#x4F4E;&#x6570;&#x636E;&#x5B89;&#x5168;&#x6027;&#xFF0C;&#x63D0;&#x9AD8;&#x6027;&#x80FD;&#xFF09;</p>
<p>&#x5982;&#x679C; no-appendfsync-on-rewrite=no,  &#x8FD8;&#x662F;&#x4F1A;&#x628A;&#x6570;&#x636E;&#x5F80;&#x78C1;&#x76D8;&#x91CC;&#x5237;&#xFF0C;&#x4F46;&#x662F;&#x9047;&#x5230;&#x91CD;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x53D1;&#x751F;&#x963B;&#x585E;&#x3002;&#xFF08;&#x6570;&#x636E;&#x5B89;&#x5168;&#xFF0C;&#x4F46;&#x662F;&#x6027;&#x80FD;&#x964D;&#x4F4E;&#xFF09;</p>
<p>&#x89E6;&#x53D1;&#x673A;&#x5236;&#xFF0C;&#x4F55;&#x65F6;&#x91CD;&#x5199;</p>
<p>Redis&#x4F1A;&#x8BB0;&#x5F55;&#x4E0A;&#x6B21;&#x91CD;&#x5199;&#x65F6;&#x7684;AOF&#x5927;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x914D;&#x7F6E;&#x662F;&#x5F53;AOF&#x6587;&#x4EF6;&#x5927;&#x5C0F;&#x662F;&#x4E0A;&#x6B21;rewrite&#x540E;&#x5927;&#x5C0F;&#x7684;&#x4E00;&#x500D;&#x4E14;&#x6587;&#x4EF6;&#x5927;&#x4E8E;64M&#x65F6;&#x89E6;&#x53D1;</p>
<p>&#x91CD;&#x5199;&#x867D;&#x7136;&#x53EF;&#x4EE5;&#x8282;&#x7EA6;&#x5927;&#x91CF;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#xFF0C;&#x51CF;&#x5C11;&#x6062;&#x590D;&#x65F6;&#x95F4;&#x3002;&#x4F46;&#x662F;&#x6BCF;&#x6B21;&#x91CD;&#x5199;&#x8FD8;&#x662F;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x8D1F;&#x62C5;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x8BBE;&#x5B9A;Redis&#x8981;&#x6EE1;&#x8DB3;&#x4E00;&#x5B9A;&#x6761;&#x4EF6;&#x624D;&#x4F1A;&#x8FDB;&#x884C;&#x91CD;&#x5199;&#x3002;</p>
<p>auto-aof-rewrite-percentage&#xFF1A;&#x8BBE;&#x7F6E;&#x91CD;&#x5199;&#x7684;&#x57FA;&#x51C6;&#x503C;&#xFF0C;&#x6587;&#x4EF6;&#x8FBE;&#x5230;100%&#x65F6;&#x5F00;&#x59CB;&#x91CD;&#x5199;&#xFF08;&#x6587;&#x4EF6;&#x662F;&#x539F;&#x6765;&#x91CD;&#x5199;&#x540E;&#x6587;&#x4EF6;&#x7684;2&#x500D;&#x65F6;&#x89E6;&#x53D1;&#xFF09;</p>
<p>auto-aof-rewrite-min-size&#xFF1A;&#x8BBE;&#x7F6E;&#x91CD;&#x5199;&#x7684;&#x57FA;&#x51C6;&#x503C;&#xFF0C;&#x6700;&#x5C0F;&#x6587;&#x4EF6;64MB&#x3002;&#x8FBE;&#x5230;&#x8FD9;&#x4E2A;&#x503C;&#x5F00;&#x59CB;&#x91CD;&#x5199;&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF1A;&#x6587;&#x4EF6;&#x8FBE;&#x5230;70MB&#x5F00;&#x59CB;&#x91CD;&#x5199;&#xFF0C;&#x964D;&#x5230;50MB&#xFF0C;&#x4E0B;&#x6B21;&#x4EC0;&#x4E48;&#x65F6;&#x5019;&#x5F00;&#x59CB;&#x91CD;&#x5199;&#xFF1F;100MB</p>
<p>&#x7CFB;&#x7EDF;&#x8F7D;&#x5165;&#x65F6;&#x6216;&#x8005;&#x4E0A;&#x6B21;&#x91CD;&#x5199;&#x5B8C;&#x6BD5;&#x65F6;&#xFF0C;Redis&#x4F1A;&#x8BB0;&#x5F55;&#x6B64;&#x65F6;AOF&#x5927;&#x5C0F;&#xFF0C;&#x8BBE;&#x4E3A;base_size,</p>
<p>&#x5982;&#x679C;Redis&#x7684;AOF&#x5F53;&#x524D;&#x5927;&#x5C0F;&gt;= base_size +base_size*100% (&#x9ED8;&#x8BA4;)&#x4E14;&#x5F53;&#x524D;&#x5927;&#x5C0F;&gt;=64mb(&#x9ED8;&#x8BA4;)&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Redis&#x4F1A;&#x5BF9;AOF&#x8FDB;&#x884C;&#x91CD;&#x5199;&#x3002;</p>
<p>3&#x3001;&#x91CD;&#x5199;&#x6D41;&#x7A0B;</p>
<p>&#xFF08;1&#xFF09;bgrewriteaof&#x89E6;&#x53D1;&#x91CD;&#x5199;&#xFF0C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5F53;&#x524D;&#x6709;bgsave&#x6216;bgrewriteaof&#x5728;&#x8FD0;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x6709;&#xFF0C;&#x5219;&#x7B49;&#x5F85;&#x8BE5;&#x547D;&#x4EE4;&#x7ED3;&#x675F;&#x540E;&#x518D;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x3002;</p>
<p>&#xFF08;2&#xFF09;&#x4E3B;&#x8FDB;&#x7A0B;fork&#x51FA;&#x5B50;&#x8FDB;&#x7A0B;&#x6267;&#x884C;&#x91CD;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E3B;&#x8FDB;&#x7A0B;&#x4E0D;&#x4F1A;&#x963B;&#x585E;&#x3002;</p>
<p>&#xFF08;3&#xFF09;&#x5B50;&#x8FDB;&#x7A0B;&#x904D;&#x5386;redis&#x5185;&#x5B58;&#x4E2D;&#x6570;&#x636E;&#x5230;&#x4E34;&#x65F6;&#x6587;&#x4EF6;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5199;&#x8BF7;&#x6C42;&#x540C;&#x65F6;&#x5199;&#x5165;aof_buf&#x7F13;&#x51B2;&#x533A;&#x548C;aof_rewrite_buf&#x91CD;&#x5199;&#x7F13;&#x51B2;&#x533A;&#x4FDD;&#x8BC1;&#x539F;AOF&#x6587;&#x4EF6;&#x5B8C;&#x6574;&#x4EE5;&#x53CA;&#x65B0;AOF&#x6587;&#x4EF6;&#x751F;&#x6210;&#x671F;&#x95F4;&#x7684;&#x65B0;&#x7684;&#x6570;&#x636E;&#x4FEE;&#x6539;&#x52A8;&#x4F5C;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x3002;</p>
<p>&#xFF08;4&#xFF09;1).&#x5B50;&#x8FDB;&#x7A0B;&#x5199;&#x5B8C;&#x65B0;&#x7684;AOF&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x5411;&#x4E3B;&#x8FDB;&#x7A0B;&#x53D1;&#x4FE1;&#x53F7;&#xFF0C;&#x7236;&#x8FDB;&#x7A0B;&#x66F4;&#x65B0;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#x3002;2).&#x4E3B;&#x8FDB;&#x7A0B;&#x628A;aof_rewrite_buf&#x4E2D;&#x7684;&#x6570;&#x636E;&#x5199;&#x5165;&#x5230;&#x65B0;&#x7684;AOF&#x6587;&#x4EF6;&#x3002;</p>
<p>&#xFF08;5&#xFF09;&#x4F7F;&#x7528;&#x65B0;&#x7684;AOF&#x6587;&#x4EF6;&#x8986;&#x76D6;&#x65E7;&#x7684;AOF&#x6587;&#x4EF6;&#xFF0C;&#x5B8C;&#x6210;AOF&#x91CD;&#x5199;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/kT9hEEkzEFHmpqwI.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4F18;&#x52BF;</p>
<p><img src="https://uploader.shimo.im/f/DWwT59SzXyrd1Ack.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5907;&#x4EFD;&#x673A;&#x5236;&#x66F4;&#x7A33;&#x5065;&#xFF0C;&#x4E22;&#x5931;&#x6570;&#x636E;&#x6982;&#x7387;&#x66F4;&#x4F4E;&#x3002;</p>
<p>&#x53EF;&#x8BFB;&#x7684;&#x65E5;&#x5FD7;&#x6587;&#x672C;&#xFF0C;&#x901A;&#x8FC7;&#x64CD;&#x4F5C;AOF&#x7A33;&#x5065;&#xFF0C;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x8BEF;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x52A3;&#x52BF;</p>
<p>&#x6BD4;&#x8D77;RDB&#x5360;&#x7528;&#x66F4;&#x591A;&#x7684;&#x78C1;&#x76D8;&#x7A7A;&#x95F4;&#x3002;</p>
<p>&#x6062;&#x590D;&#x5907;&#x4EFD;&#x901F;&#x5EA6;&#x8981;&#x6162;&#x3002;</p>
<p>&#x6BCF;&#x6B21;&#x8BFB;&#x5199;&#x90FD;&#x540C;&#x6B65;&#x7684;&#x8BDD;&#xFF0C;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x6027;&#x80FD;&#x538B;&#x529B;&#x3002;</p>
<p>&#x5B58;&#x5728;&#x4E2A;&#x522B;Bug&#xFF0C;&#x9020;&#x6210;&#x6062;&#x590D;&#x4E0D;&#x80FD;&#x3002;</p>
<p>&#x5C0F;&#x603B;&#x7ED3;</p>
<p><img src="https://uploader.shimo.im/f/IlhvLHSiPiY8ASsZ.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x603B;&#x7ED3;(Which one)</p>
<p>&#x7528;&#x54EA;&#x4E2A;&#x597D;</p>
<p>&#x5B98;&#x65B9;&#x63A8;&#x8350;&#x4E24;&#x4E2A;&#x90FD;&#x542F;&#x7528;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5BF9;&#x6570;&#x636E;&#x4E0D;&#x654F;&#x611F;&#xFF0C;&#x53EF;&#x4EE5;&#x9009;&#x5355;&#x72EC;&#x7528;RDB&#x3002;</p>
<p>&#x4E0D;&#x5EFA;&#x8BAE;&#x5355;&#x72EC;&#x7528; AOF&#xFF0C;&#x56E0;&#x4E3A;&#x53EF;&#x80FD;&#x4F1A;&#x51FA;&#x73B0;Bug&#x3002;</p>
<p>&#x5982;&#x679C;&#x53EA;&#x662F;&#x505A;&#x7EAF;&#x5185;&#x5B58;&#x7F13;&#x5B58;&#xFF0C;&#x53EF;&#x4EE5;&#x90FD;&#x4E0D;&#x7528;&#x3002;</p>
<p>&#x5B98;&#x7F51;&#x5EFA;&#x8BAE;</p>
<p><img src="https://uploader.shimo.im/f/O6Qw6zgMcZicFV7d.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>RDB&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#x80FD;&#x591F;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x80FD;&#x5BF9;&#x4F60;&#x7684;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x5FEB;&#x7167;&#x5B58;&#x50A8;</p>
<p>AOF&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;&#x8BB0;&#x5F55;&#x6BCF;&#x6B21;&#x5BF9;&#x670D;&#x52A1;&#x5668;&#x5199;&#x7684;&#x64CD;&#x4F5C;,&#x5F53;&#x670D;&#x52A1;&#x5668;&#x91CD;&#x542F;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x91CD;&#x65B0;&#x6267;&#x884C;&#x8FD9;&#x4E9B;&#x547D;&#x4EE4;&#x6765;&#x6062;&#x590D;&#x539F;&#x59CB;&#x7684;&#x6570;&#x636E;,AOF&#x547D;&#x4EE4;&#x4EE5;redis&#x534F;&#x8BAE;&#x8FFD;&#x52A0;&#x4FDD;&#x5B58;&#x6BCF;&#x6B21;&#x5199;&#x7684;&#x64CD;&#x4F5C;&#x5230;&#x6587;&#x4EF6;&#x672B;&#x5C3E;.</p>
<p>Redis&#x8FD8;&#x80FD;&#x5BF9;AOF&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x540E;&#x53F0;&#x91CD;&#x5199;,&#x4F7F;&#x5F97;AOF&#x6587;&#x4EF6;&#x7684;&#x4F53;&#x79EF;&#x4E0D;&#x81F3;&#x4E8E;&#x8FC7;&#x5927;</p>
<p>&#x53EA;&#x505A;&#x7F13;&#x5B58;&#xFF1A;&#x5982;&#x679C;&#x4F60;&#x53EA;&#x5E0C;&#x671B;&#x4F60;&#x7684;&#x6570;&#x636E;&#x5728;&#x670D;&#x52A1;&#x5668;&#x8FD0;&#x884C;&#x7684;&#x65F6;&#x5019;&#x5B58;&#x5728;,&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x4E0D;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;.</p>
<p>&#x540C;&#x65F6;&#x5F00;&#x542F;&#x4E24;&#x79CD;&#x6301;&#x4E45;&#x5316;&#x65B9;&#x5F0F;</p>
<p>&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;,&#x5F53;redis&#x91CD;&#x542F;&#x7684;&#x65F6;&#x5019;&#x4F1A;&#x4F18;&#x5148;&#x8F7D;&#x5165;AOF&#x6587;&#x4EF6;&#x6765;&#x6062;&#x590D;&#x539F;&#x59CB;&#x7684;&#x6570;&#x636E;, &#x56E0;&#x4E3A;&#x5728;&#x901A;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;AOF&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x7684;&#x6570;&#x636E;&#x96C6;&#x8981;&#x6BD4;RDB&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x7684;&#x6570;&#x636E;&#x96C6;&#x8981;&#x5B8C;&#x6574;.</p>
<p>RDB&#x7684;&#x6570;&#x636E;&#x4E0D;&#x5B9E;&#x65F6;&#xFF0C;&#x540C;&#x65F6;&#x4F7F;&#x7528;&#x4E24;&#x8005;&#x65F6;&#x670D;&#x52A1;&#x5668;&#x91CD;&#x542F;&#x4E5F;&#x53EA;&#x4F1A;&#x627E;AOF&#x6587;&#x4EF6;&#x3002;&#x90A3;&#x8981;&#x4E0D;&#x8981;&#x53EA;&#x4F7F;&#x7528;AOF&#x5462;&#xFF1F;</p>
<p>&#x5EFA;&#x8BAE;&#x4E0D;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;RDB&#x66F4;&#x9002;&#x5408;&#x7528;&#x4E8E;&#x5907;&#x4EFD;&#x6570;&#x636E;&#x5E93;(AOF&#x5728;&#x4E0D;&#x65AD;&#x53D8;&#x5316;&#x4E0D;&#x597D;&#x5907;&#x4EFD;)&#xFF0C; &#x5FEB;&#x901F;&#x91CD;&#x542F;&#xFF0C;&#x800C;&#x4E14;&#x4E0D;&#x4F1A;&#x6709;AOF&#x53EF;&#x80FD;&#x6F5C;&#x5728;&#x7684;bug&#xFF0C;&#x7559;&#x7740;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x4E07;&#x4E00;&#x7684;&#x624B;&#x6BB5;&#x3002;</p>
<p>&#x6027;&#x80FD;&#x5EFA;&#x8BAE;</p>
<table>
<thead>
<tr>
<th style="text-align:left">&#x56E0;&#x4E3A;RDB&#x6587;&#x4EF6;&#x53EA;&#x7528;&#x4F5C;&#x540E;&#x5907;&#x7528;&#x9014;&#xFF0C;&#x5EFA;&#x8BAE;&#x53EA;&#x5728;Slave&#x4E0A;&#x6301;&#x4E45;&#x5316;RDB&#x6587;&#x4EF6;&#xFF0C;&#x800C;&#x4E14;&#x53EA;&#x8981;15&#x5206;&#x949F;&#x5907;&#x4EFD;&#x4E00;&#x6B21;&#x5C31;&#x591F;&#x4E86;&#xFF0C;&#x53EA;&#x4FDD;&#x7559;save 900 1&#x8FD9;&#x6761;&#x89C4;&#x5219;&#x3002;<br><br>&#x5982;&#x679C;&#x4F7F;&#x7528;AOF&#xFF0C;&#x597D;&#x5904;&#x662F;&#x5728;&#x6700;&#x6076;&#x52A3;&#x60C5;&#x51B5;&#x4E0B;&#x4E5F;&#x53EA;&#x4F1A;&#x4E22;&#x5931;&#x4E0D;&#x8D85;&#x8FC7;&#x4E24;&#x79D2;&#x6570;&#x636E;&#xFF0C;&#x542F;&#x52A8;&#x811A;&#x672C;&#x8F83;&#x7B80;&#x5355;&#x53EA;load&#x81EA;&#x5DF1;&#x7684;AOF&#x6587;&#x4EF6;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;<br>&#x4EE3;&#x4EF7;,&#x4E00;&#x662F;&#x5E26;&#x6765;&#x4E86;&#x6301;&#x7EED;&#x7684;IO&#xFF0C;&#x4E8C;&#x662F;AOF rewrite&#x7684;&#x6700;&#x540E;&#x5C06;rewrite&#x8FC7;&#x7A0B;&#x4E2D;&#x4EA7;&#x751F;&#x7684;&#x65B0;&#x6570;&#x636E;&#x5199;&#x5230;&#x65B0;&#x6587;&#x4EF6;&#x9020;&#x6210;&#x7684;&#x963B;&#x585E;&#x51E0;&#x4E4E;&#x662F;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x3002;<br>&#x53EA;&#x8981;&#x786C;&#x76D8;&#x8BB8;&#x53EF;&#xFF0C;&#x5E94;&#x8BE5;&#x5C3D;&#x91CF;&#x51CF;&#x5C11;AOF rewrite&#x7684;&#x9891;&#x7387;&#xFF0C;AOF&#x91CD;&#x5199;&#x7684;&#x57FA;&#x7840;&#x5927;&#x5C0F;&#x9ED8;&#x8BA4;&#x503C;64M&#x592A;&#x5C0F;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x5230;5G&#x4EE5;&#x4E0A;&#x3002;<br>&#x9ED8;&#x8BA4;&#x8D85;&#x8FC7;&#x539F;&#x5927;&#x5C0F;100%&#x5927;&#x5C0F;&#x65F6;&#x91CD;&#x5199;&#x53EF;&#x4EE5;&#x6539;&#x5230;&#x9002;&#x5F53;&#x7684;&#x6570;&#x503C;&#x3002;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h1 id="14redis&#x4E3B;&#x4ECE;&#x590D;&#x5236;">14.Redis_&#x4E3B;&#x4ECE;&#x590D;&#x5236;</h1>
<p>&#x662F;&#x4EC0;&#x4E48;</p>
<p>&#x4E3B;&#x673A;&#x6570;&#x636E;&#x66F4;&#x65B0;&#x540E;&#x6839;&#x636E;&#x914D;&#x7F6E;&#x548C;&#x7B56;&#x7565;&#xFF0C; &#x81EA;&#x52A8;&#x540C;&#x6B65;&#x5230;&#x5907;&#x673A;&#x7684;master/slaver&#x673A;&#x5236;&#xFF0C;Master&#x4EE5;&#x5199;&#x4E3A;&#x4E3B;&#xFF0C;Slave&#x4EE5;&#x8BFB;&#x4E3A;&#x4E3B;</p>
<p>&#x80FD;&#x5E72;&#x561B;</p>
<p>&#x8BFB;&#x5199;&#x5206;&#x79BB;&#xFF0C;&#x6027;&#x80FD;&#x6269;&#x5C55;</p>
<p>&#x5BB9;&#x707E;&#x5FEB;&#x901F;&#x6062;&#x590D;</p>
<p><img src="https://uploader.shimo.im/f/NmgWTW44PGduYQgO.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x600E;&#x4E48;&#x73A9;&#xFF1A;&#x4E3B;&#x4ECE;&#x590D;&#x5236;</p>
<p>&#x62F7;&#x8D1D;&#x591A;&#x4E2A;redis.conf&#x6587;&#x4EF6;include(&#x5199;&#x7EDD;&#x5BF9;&#x8DEF;&#x5F84;)</p>
<p>&#x5F00;&#x542F;daemonize yes</p>
<p>Pid&#x6587;&#x4EF6;&#x540D;&#x5B57;pidfile</p>
<p>&#x6307;&#x5B9A;&#x7AEF;&#x53E3;port</p>
<p>Log&#x6587;&#x4EF6;&#x540D;&#x5B57;</p>
<p>dump.rdb&#x540D;&#x5B57;dbfilename</p>
<p>Appendonly &#x5173;&#x6389;&#x6216;&#x8005;&#x6362;&#x540D;&#x5B57;</p>
<p>&#x65B0;&#x5EFA;redis6379.conf&#xFF0C;&#x586B;&#x5199;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;</p>
<p>include /myredis/redis.conf</p>
<p>pidfile /var/run/redis_6379.pid</p>
<p>port 6379</p>
<p>dbfilename dump6379.rdb</p>
<p><img src="https://uploader.shimo.im/f/HG0fXHo87f6CJ1Vm.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x65B0;&#x5EFA;redis6380.conf&#xFF0C;&#x586B;&#x5199;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;</p>
<p><img src="https://uploader.shimo.im/f/nh6AGyJs5FyC4hA4.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x65B0;&#x5EFA;redis6381.conf&#xFF0C;&#x586B;&#x5199;&#x4EE5;&#x4E0B;&#x5185;&#x5BB9;</p>
<p><img src="https://uploader.shimo.im/f/qfwRTOasVjnpjibz.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>slave-priority 10</p>
<p>&#x8BBE;&#x7F6E;&#x4ECE;&#x673A;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x503C;&#x8D8A;&#x5C0F;&#xFF0C;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;&#xFF0C;&#x7528;&#x4E8E;&#x9009;&#x4E3E;&#x4E3B;&#x673A;&#x65F6;&#x4F7F;&#x7528;&#x3002;&#x9ED8;&#x8BA4;100</p>
<p>&#x542F;&#x52A8;&#x4E09;&#x53F0;redis&#x670D;&#x52A1;&#x5668;</p>
<p><img src="https://uploader.shimo.im/f/3RdVLmsP5O53kt03.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x67E5;&#x770B;&#x7CFB;&#x7EDF;&#x8FDB;&#x7A0B;&#xFF0C;&#x770B;&#x770B;&#x4E09;&#x53F0;&#x670D;&#x52A1;&#x5668;&#x662F;&#x5426;&#x542F;&#x52A8;</p>
<p><img src="https://uploader.shimo.im/f/xbJFOMUAn6rzyFG1.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x67E5;&#x770B;&#x4E09;&#x53F0;&#x4E3B;&#x673A;&#x8FD0;&#x884C;&#x60C5;&#x51B5;</p>
<p>info replication</p>
<p>&#x6253;&#x5370;&#x4E3B;&#x4ECE;&#x590D;&#x5236;&#x7684;&#x76F8;&#x5173;&#x4FE1;&#x606F;</p>
<p><img src="https://uploader.shimo.im/f/5uwQ2chrH2kHcNNr.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x914D;&#x4ECE;(&#x5E93;)&#x4E0D;&#x914D;&#x4E3B;(&#x5E93;)</p>
<p>slaveof  <ip><port></port></ip></p>
<p>&#x6210;&#x4E3A;&#x67D0;&#x4E2A;&#x5B9E;&#x4F8B;&#x7684;&#x4ECE;&#x670D;&#x52A1;&#x5668;</p>
<p>1&#x3001;&#x5728;6380&#x548C;6381&#x4E0A;&#x6267;&#x884C;: slaveof 127.0.0.1 6379</p>
<p><img src="https://uploader.shimo.im/f/i3I0LTSOL7NlCqgS.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>2&#x3001;&#x5728;&#x4E3B;&#x673A;&#x4E0A;&#x5199;&#xFF0C;&#x5728;&#x4ECE;&#x673A;&#x4E0A;&#x53EF;&#x4EE5;&#x8BFB;&#x53D6;&#x6570;&#x636E;</p>
<p>&#x5728;&#x4ECE;&#x673A;&#x4E0A;&#x5199;&#x6570;&#x636E;&#x62A5;&#x9519;</p>
<p><img src="https://uploader.shimo.im/f/w4DY3nRZ3i9zDyq9.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>3&#x3001;&#x4E3B;&#x673A;&#x6302;&#x6389;&#xFF0C;&#x91CD;&#x542F;&#x5C31;&#x884C;&#xFF0C;&#x4E00;&#x5207;&#x5982;&#x521D;</p>
<p>4&#x3001;&#x4ECE;&#x673A;&#x91CD;&#x542F;&#x9700;&#x91CD;&#x8BBE;&#xFF1A;slaveof 127.0.0.1 6379</p>
<p>&#x53EF;&#x4EE5;&#x5C06;&#x914D;&#x7F6E;&#x589E;&#x52A0;&#x5230;&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x6C38;&#x4E45;&#x751F;&#x6548;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/BQ5jGxOHbvYUwpJD.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5E38;&#x7528;3&#x62DB;</p>
<p>&#x4E00;&#x4E3B;&#x4E8C;&#x4EC6;</p>
<p>&#x5207;&#x5165;&#x70B9;&#x95EE;&#x9898;&#xFF1F;slave1&#x3001;slave2&#x662F;&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x590D;&#x5236;&#x8FD8;&#x662F;&#x4ECE;&#x5207;&#x5165;&#x70B9;&#x5F00;&#x59CB;&#x590D;&#x5236;?&#x6BD4;&#x5982;&#x4ECE;k4&#x8FDB;&#x6765;&#xFF0C;&#x90A3;&#x4E4B;&#x524D;&#x7684;k1,k2,k3&#x662F;&#x5426;&#x4E5F;&#x53EF;&#x4EE5;&#x590D;&#x5236;&#xFF1F;</p>
<p>&#x4ECE;&#x673A;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x5199;&#xFF1F;set&#x53EF;&#x5426;&#xFF1F;</p>
<p>&#x4E3B;&#x673A;shutdown&#x540E;&#x60C5;&#x51B5;&#x5982;&#x4F55;&#xFF1F;&#x4ECE;&#x673A;&#x662F;&#x4E0A;&#x4F4D;&#x8FD8;&#x662F;&#x539F;&#x5730;&#x5F85;&#x547D;&#xFF1F;</p>
<p>&#x4E3B;&#x673A;&#x53C8;&#x56DE;&#x6765;&#x4E86;&#x540E;&#xFF0C;&#x4E3B;&#x673A;&#x65B0;&#x589E;&#x8BB0;&#x5F55;&#xFF0C;&#x4ECE;&#x673A;&#x8FD8;&#x80FD;&#x5426;&#x987A;&#x5229;&#x590D;&#x5236;&#xFF1F;</p>
<p>&#x5176;&#x4E2D;&#x4E00;&#x53F0;&#x4ECE;&#x673A;down&#x540E;&#x60C5;&#x51B5;&#x5982;&#x4F55;&#xFF1F;&#x4F9D;&#x7167;&#x539F;&#x6709;&#x5B83;&#x80FD;&#x8DDF;&#x4E0A;&#x5927;&#x90E8;&#x961F;&#x5417;&#xFF1F;</p>
<p><img src="https://uploader.shimo.im/f/yPgQxlWIj5jopWn6.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x85AA;&#x706B;&#x76F8;&#x4F20;</p>
<p>&#x4E0A;&#x4E00;&#x4E2A;Slave&#x53EF;&#x4EE5;&#x662F;&#x4E0B;&#x4E00;&#x4E2A;slave&#x7684;Master&#xFF0C;Slave&#x540C;&#x6837;&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x5176;&#x4ED6; slaves&#x7684;&#x8FDE;&#x63A5;&#x548C;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;slave&#x4F5C;&#x4E3A;&#x4E86;&#x94FE;&#x6761;&#x4E2D;&#x4E0B;&#x4E00;&#x4E2A;&#x7684;master, &#x53EF;&#x4EE5;&#x6709;&#x6548;&#x51CF;&#x8F7B;master&#x7684;&#x5199;&#x538B;&#x529B;,&#x53BB;&#x4E2D;&#x5FC3;&#x5316;&#x964D;&#x4F4E;&#x98CE;&#x9669;&#x3002;</p>
<p>&#x7528; slaveof  <ip><port></port></ip></p>
<p>&#x4E2D;&#x9014;&#x53D8;&#x66F4;&#x8F6C;&#x5411;:&#x4F1A;&#x6E05;&#x9664;&#x4E4B;&#x524D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x91CD;&#x65B0;&#x5EFA;&#x7ACB;&#x62F7;&#x8D1D;&#x6700;&#x65B0;&#x7684;</p>
<p>&#x98CE;&#x9669;&#x662F;&#x4E00;&#x65E6;&#x67D0;&#x4E2A;slave&#x5B95;&#x673A;&#xFF0C;&#x540E;&#x9762;&#x7684;slave&#x90FD;&#x6CA1;&#x6CD5;&#x5907;&#x4EFD;</p>
<p>&#x4E3B;&#x673A;&#x6302;&#x4E86;&#xFF0C;&#x4ECE;&#x673A;&#x8FD8;&#x662F;&#x4ECE;&#x673A;&#xFF0C;&#x65E0;&#x6CD5;&#x5199;&#x6570;&#x636E;&#x4E86;</p>
<p><img src="https://uploader.shimo.im/f/CVyPEfNbAHHe97ls.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://uploader.shimo.im/f/jYpVAT3r3FkvLWfB.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x53CD;&#x5BA2;&#x4E3A;&#x4E3B;</p>
<p>&#x5F53;&#x4E00;&#x4E2A;master&#x5B95;&#x673A;&#x540E;&#xFF0C;&#x540E;&#x9762;&#x7684;slave&#x53EF;&#x4EE5;&#x7ACB;&#x523B;&#x5347;&#x4E3A;master&#xFF0C;&#x5176;&#x540E;&#x9762;&#x7684;slave&#x4E0D;&#x7528;&#x505A;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#x3002;</p>
<p>&#x7528; slaveof  no one  &#x5C06;&#x4ECE;&#x673A;&#x53D8;&#x4E3A;&#x4E3B;&#x673A;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/VQrAs9Lzn7lA0csK.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x590D;&#x5236;&#x539F;&#x7406;</p>
<p>Slave&#x542F;&#x52A8;&#x6210;&#x529F;&#x8FDE;&#x63A5;&#x5230;master&#x540E;&#x4F1A;&#x53D1;&#x9001;&#x4E00;&#x4E2A;sync&#x547D;&#x4EE4;</p>
<p>Master&#x63A5;&#x5230;&#x547D;&#x4EE4;&#x542F;&#x52A8;&#x540E;&#x53F0;&#x7684;&#x5B58;&#x76D8;&#x8FDB;&#x7A0B;&#xFF0C;&#x540C;&#x65F6;&#x6536;&#x96C6;&#x6240;&#x6709;&#x63A5;&#x6536;&#x5230;&#x7684;&#x7528;&#x4E8E;&#x4FEE;&#x6539;&#x6570;&#x636E;&#x96C6;&#x547D;&#x4EE4;&#xFF0C; &#x5728;&#x540E;&#x53F0;&#x8FDB;&#x7A0B;&#x6267;&#x884C;&#x5B8C;&#x6BD5;&#x4E4B;&#x540E;&#xFF0C;master&#x5C06;&#x4F20;&#x9001;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x5230;slave,&#x4EE5;&#x5B8C;&#x6210;&#x4E00;&#x6B21;&#x5B8C;&#x5168;&#x540C;&#x6B65;</p>
<p>&#x5168;&#x91CF;&#x590D;&#x5236;&#xFF1A;&#x800C;slave&#x670D;&#x52A1;&#x5728;&#x63A5;&#x6536;&#x5230;&#x6570;&#x636E;&#x5E93;&#x6587;&#x4EF6;&#x6570;&#x636E;&#x540E;&#xFF0C;&#x5C06;&#x5176;&#x5B58;&#x76D8;&#x5E76;&#x52A0;&#x8F7D;&#x5230;&#x5185;&#x5B58;&#x4E2D;&#x3002;</p>
<p>&#x589E;&#x91CF;&#x590D;&#x5236;&#xFF1A;Master&#x7EE7;&#x7EED;&#x5C06;&#x65B0;&#x7684;&#x6240;&#x6709;&#x6536;&#x96C6;&#x5230;&#x7684;&#x4FEE;&#x6539;&#x547D;&#x4EE4;&#x4F9D;&#x6B21;&#x4F20;&#x7ED9;slave,&#x5B8C;&#x6210;&#x540C;&#x6B65;</p>
<p>&#x4F46;&#x662F;&#x53EA;&#x8981;&#x662F;&#x91CD;&#x65B0;&#x8FDE;&#x63A5;master,&#x4E00;&#x6B21;&#x5B8C;&#x5168;&#x540C;&#x6B65;&#xFF08;&#x5168;&#x91CF;&#x590D;&#x5236;)&#x5C06;&#x88AB;&#x81EA;&#x52A8;&#x6267;&#x884C;</p>
<p><img src="https://uploader.shimo.im/f/Ka7tRlfmfmhQeQSl.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x54E8;&#x5175;&#x6A21;&#x5F0F;(sentinel)</p>
<p>&#x662F;&#x4EC0;&#x4E48;</p>
<p>&#x53CD;&#x5BA2;&#x4E3A;&#x4E3B;&#x7684;&#x81EA;&#x52A8;&#x7248;&#xFF0C;&#x80FD;&#x591F;&#x540E;&#x53F0;&#x76D1;&#x63A7;&#x4E3B;&#x673A;&#x662F;&#x5426;&#x6545;&#x969C;&#xFF0C;&#x5982;&#x679C;&#x6545;&#x969C;&#x4E86;&#x6839;&#x636E;&#x6295;&#x7968;&#x6570;&#x81EA;&#x52A8;&#x5C06;&#x4ECE;&#x5E93;&#x8F6C;&#x6362;&#x4E3A;&#x4E3B;&#x5E93;</p>
<p><img src="https://uploader.shimo.im/f/O0yZ6KUju6yZ1Dz2.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x600E;&#x4E48;&#x73A9;(&#x4F7F;&#x7528;&#x6B65;&#x9AA4;)</p>
<p>&#x8C03;&#x6574;&#x4E3A;&#x4E00;&#x4E3B;&#x4E8C;&#x4EC6;&#x6A21;&#x5F0F;&#xFF0C;6379&#x5E26;&#x7740;6380&#x3001;6381</p>
<p><img src="https://uploader.shimo.im/f/QAqTlurqaE6mLEtk.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x81EA;&#x5B9A;&#x4E49;&#x7684;/myredis&#x76EE;&#x5F55;&#x4E0B;&#x65B0;&#x5EFA;sentinel.conf&#x6587;&#x4EF6;&#xFF0C;&#x540D;&#x5B57;&#x7EDD;&#x4E0D;&#x80FD;&#x9519;</p>
<p>&#x914D;&#x7F6E;&#x54E8;&#x5175;,&#x586B;&#x5199;&#x5185;&#x5BB9;</p>
<p>sentinel monitor mymaster 127.0.0.1 6379 1</p>
<p>&#x5176;&#x4E2D;mymaster&#x4E3A;&#x76D1;&#x63A7;&#x5BF9;&#x8C61;&#x8D77;&#x7684;&#x670D;&#x52A1;&#x5668;&#x540D;&#x79F0;&#xFF0C; 1 &#x4E3A;&#x81F3;&#x5C11;&#x6709;&#x591A;&#x5C11;&#x4E2A;&#x54E8;&#x5175;&#x540C;&#x610F;&#x8FC1;&#x79FB;&#x7684;&#x6570;&#x91CF;&#x3002;</p>
<p>&#x542F;&#x52A8;&#x54E8;&#x5175;</p>
<p>/usr/local/bin</p>
<p>redis&#x505A;&#x538B;&#x6D4B;&#x53EF;&#x4EE5;&#x7528;&#x81EA;&#x5E26;&#x7684;redis-benchmark&#x5DE5;&#x5177;</p>
<p>&#x6267;&#x884C;redis-sentinel  /myredis/sentinel.conf</p>
<p><img src="https://uploader.shimo.im/f/lmh2AadIER69RTMy.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5F53;&#x4E3B;&#x673A;&#x6302;&#x6389;&#xFF0C;&#x4ECE;&#x673A;&#x9009;&#x4E3E;&#x4E2D;&#x4EA7;&#x751F;&#x65B0;&#x7684;&#x4E3B;&#x673A;</p>
<p>(&#x5927;&#x6982;10&#x79D2;&#x5DE6;&#x53F3;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x54E8;&#x5175;&#x7A97;&#x53E3;&#x65E5;&#x5FD7;&#xFF0C;&#x5207;&#x6362;&#x4E86;&#x65B0;&#x7684;&#x4E3B;&#x673A;)</p>
<p>&#x54EA;&#x4E2A;&#x4ECE;&#x673A;&#x4F1A;&#x88AB;&#x9009;&#x4E3E;&#x4E3A;&#x4E3B;&#x673A;&#x5462;&#xFF1F;&#x6839;&#x636E;&#x4F18;&#x5148;&#x7EA7;&#x522B;&#xFF1A;slave-priority</p>
<p>&#x539F;&#x4E3B;&#x673A;&#x91CD;&#x542F;&#x540E;&#x4F1A;&#x53D8;&#x4E3A;&#x4ECE;&#x673A;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/BdYRKop0J16DSpgx.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x590D;&#x5236;&#x5EF6;&#x65F6;</p>
<p>&#x7531;&#x4E8E;&#x6240;&#x6709;&#x7684;&#x5199;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x5148;&#x5728;Master&#x4E0A;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x540C;&#x6B65;&#x66F4;&#x65B0;&#x5230;Slave&#x4E0A;&#xFF0C;&#x6240;&#x4EE5;&#x4ECE;Master&#x540C;&#x6B65;&#x5230;Slave&#x673A;&#x5668;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x5EF6;&#x8FDF;&#xFF0C;&#x5F53;&#x7CFB;&#x7EDF;&#x5F88;&#x7E41;&#x5FD9;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5EF6;&#x8FDF;&#x95EE;&#x9898;&#x4F1A;&#x66F4;&#x52A0;&#x4E25;&#x91CD;&#xFF0C;Slave&#x673A;&#x5668;&#x6570;&#x91CF;&#x7684;&#x589E;&#x52A0;&#x4E5F;&#x4F1A;&#x4F7F;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x66F4;&#x52A0;&#x4E25;&#x91CD;&#x3002;</p>
<p>&#x6545;&#x969C;&#x6062;&#x590D;</p>
<p><img src="https://uploader.shimo.im/f/4K5MkFLGsu7Oaxz6.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4F18;&#x5148;&#x7EA7;&#x5728;redis.conf&#x4E2D;&#x9ED8;&#x8BA4;&#xFF1A;slave-priority 100&#xFF0C;&#x503C;&#x8D8A;&#x5C0F;&#x4F18;&#x5148;&#x7EA7;&#x8D8A;&#x9AD8;</p>
<p>&#x504F;&#x79FB;&#x91CF;&#x662F;&#x6307;&#x83B7;&#x5F97;&#x539F;&#x4E3B;&#x673A;&#x6570;&#x636E;&#x6700;&#x5168;&#x7684;</p>
<p>&#x6BCF;&#x4E2A;redis&#x5B9E;&#x4F8B;&#x542F;&#x52A8;&#x540E;&#x90FD;&#x4F1A;&#x968F;&#x673A;&#x751F;&#x6210;&#x4E00;&#x4E2A;40&#x4F4D;&#x7684;runid</p>
<p>&#x4E3B;&#x4ECE;&#x590D;&#x5236;</p>
<table>
<thead>
<tr>
<th style="text-align:left">private static JedisSentinelPool jedisSentinelPool=null;<br><br>public static  Jedis getJedisFromSentinel(){<br>if(jedisSentinelPool==null){<br>Set<string> sentinelSet=new HashSet&lt;&gt;();<br>sentinelSet.add(&quot;192.168.11.103:26379&quot;);<br><br>JedisPoolConfig jedisPoolConfig =new JedisPoolConfig();<br>jedisPoolConfig.setMaxTotal(10); //&#x6700;&#x5927;&#x53EF;&#x7528;&#x8FDE;&#x63A5;&#x6570;<br>jedisPoolConfig.setMaxIdle(5); //&#x6700;&#x5927;&#x95F2;&#x7F6E;&#x8FDE;&#x63A5;&#x6570;<br>jedisPoolConfig.setMinIdle(5); //&#x6700;&#x5C0F;&#x95F2;&#x7F6E;&#x8FDE;&#x63A5;&#x6570;<br>jedisPoolConfig.setBlockWhenExhausted(true); //&#x8FDE;&#x63A5;&#x8017;&#x5C3D;&#x662F;&#x5426;&#x7B49;&#x5F85;<br>jedisPoolConfig.setMaxWaitMillis(2000); //&#x7B49;&#x5F85;&#x65F6;&#x95F4;<br>jedisPoolConfig.setTestOnBorrow(true); //&#x53D6;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x8FDB;&#x884C;&#x4E00;&#x4E0B;&#x6D4B;&#x8BD5;ping pong<br><br>jedisSentinelPool=new JedisSentinelPool(&quot;mymaster&quot;,sentinelSet,jedisPoolConfig);<br>return jedisSentinelPool.getResource();<br>}else{<br>return jedisSentinelPool.getResource();<br>}<br>}</string></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h1 id="15redis&#x96C6;&#x7FA4;">15.Redis&#x96C6;&#x7FA4;</h1>
<p>&#x95EE;&#x9898;</p>
<p>&#x5BB9;&#x91CF;&#x4E0D;&#x591F;&#xFF0C;redis&#x5982;&#x4F55;&#x8FDB;&#x884C;&#x6269;&#x5BB9;&#xFF1F;</p>
<p>&#x5E76;&#x53D1;&#x5199;&#x64CD;&#x4F5C;&#xFF0C; redis&#x5982;&#x4F55;&#x5206;&#x644A;&#xFF1F;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x4E3B;&#x4ECE;&#x6A21;&#x5F0F;&#xFF0C;&#x85AA;&#x706B;&#x76F8;&#x4F20;&#x6A21;&#x5F0F;&#xFF0C;&#x4E3B;&#x673A;&#x5B95;&#x673A;&#xFF0C;&#x5BFC;&#x81F4;ip&#x5730;&#x5740;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x4E2D;&#x914D;&#x7F6E;&#x9700;&#x8981;&#x4FEE;&#x6539;&#x5BF9;&#x5E94;&#x7684;&#x4E3B;&#x673A;&#x5730;&#x5740;&#x3001;&#x7AEF;&#x53E3;&#x7B49;&#x4FE1;&#x606F;&#x3002;</p>
<p>&#x4E4B;&#x524D;&#x901A;&#x8FC7;&#x4EE3;&#x7406;&#x4E3B;&#x673A;&#x6765;&#x89E3;&#x51B3;&#xFF0C;&#x4F46;&#x662F;redis3.0&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;&#x5C31;&#x662F;&#x65E0;&#x4E2D;&#x5FC3;&#x5316;&#x96C6;&#x7FA4;&#x914D;&#x7F6E;&#x3002;</p>
<p>&#x4EC0;&#x4E48;&#x662F;&#x96C6;&#x7FA4;</p>
<p>Redis &#x96C6;&#x7FA4;&#x5B9E;&#x73B0;&#x4E86;&#x5BF9;Redis&#x7684;&#x6C34;&#x5E73;&#x6269;&#x5BB9;&#xFF0C;&#x5373;&#x542F;&#x52A8;N&#x4E2A;redis&#x8282;&#x70B9;&#xFF0C;&#x5C06;&#x6574;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x5206;&#x5E03;&#x5B58;&#x50A8;&#x5728;&#x8FD9;N&#x4E2A;&#x8282;&#x70B9;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x5B58;&#x50A8;&#x603B;&#x6570;&#x636E;&#x7684;1/N&#x3002;</p>
<p>Redis &#x96C6;&#x7FA4;&#x901A;&#x8FC7;&#x5206;&#x533A;&#xFF08;partition&#xFF09;&#x6765;&#x63D0;&#x4F9B;&#x4E00;&#x5B9A;&#x7A0B;&#x5EA6;&#x7684;&#x53EF;&#x7528;&#x6027;&#xFF08;availability&#xFF09;&#xFF1A; &#x5373;&#x4F7F;&#x96C6;&#x7FA4;&#x4E2D;&#x6709;&#x4E00;&#x90E8;&#x5206;&#x8282;&#x70B9;&#x5931;&#x6548;&#x6216;&#x8005;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x901A;&#x8BAF;&#xFF0C; &#x96C6;&#x7FA4;&#x4E5F;&#x53EF;&#x4EE5;&#x7EE7;&#x7EED;&#x5904;&#x7406;&#x547D;&#x4EE4;&#x8BF7;&#x6C42;&#x3002;</p>
<p>&#x5220;&#x9664;&#x6301;&#x4E45;&#x5316;&#x6570;&#x636E;</p>
<p>&#x5C06;rdb,aof&#x6587;&#x4EF6;&#x90FD;&#x5220;&#x9664;&#x6389;&#x3002;</p>
<p>&#x5236;&#x4F5C;6&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;6379,6380,6381,6389,6390,6391</p>
<p>&#x914D;&#x7F6E;&#x57FA;&#x672C;&#x4FE1;&#x606F;</p>
<p>&#x5F00;&#x542F;daemonize yes</p>
<p>Pid&#x6587;&#x4EF6;&#x540D;&#x5B57;</p>
<p>&#x6307;&#x5B9A;&#x7AEF;&#x53E3;</p>
<p>Log&#x6587;&#x4EF6;&#x540D;&#x5B57;</p>
<p>Dump.rdb&#x540D;&#x5B57;</p>
<p>Appendonly &#x5173;&#x6389;&#x6216;&#x8005;&#x6362;&#x540D;&#x5B57;</p>
<p>redis cluster&#x914D;&#x7F6E;&#x4FEE;&#x6539;</p>
<p>cluster-enabled yes    &#x6253;&#x5F00;&#x96C6;&#x7FA4;&#x6A21;&#x5F0F;</p>
<p>cluster-config-file nodes-6379.conf  &#x8BBE;&#x5B9A;&#x8282;&#x70B9;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540D;</p>
<p>cluster-node-timeout 15000   &#x8BBE;&#x5B9A;&#x8282;&#x70B9;&#x5931;&#x8054;&#x65F6;&#x95F4;&#xFF0C;&#x8D85;&#x8FC7;&#x8BE5;&#x65F6;&#x95F4;&#xFF08;&#x6BEB;&#x79D2;&#xFF09;&#xFF0C;&#x96C6;&#x7FA4;&#x81EA;&#x52A8;&#x8FDB;&#x884C;&#x4E3B;&#x4ECE;&#x5207;&#x6362;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:left">include /home/bigdata/redis.conf<br>port 6379<br>pidfile &quot;/var/run/redis_6379.pid&quot;<br>dbfilename &quot;dump6379.rdb&quot;<br>dir &quot;/home/bigdata/redis_cluster&quot;<br>logfile &quot;/home/bigdata/redis_cluster/redis_err_6379.log&quot;<br>cluster-enabled yes<br>cluster-config-file nodes-6379.conf<br>cluster-node-timeout 15000</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x4FEE;&#x6539;&#x597D;redis6379.conf&#x6587;&#x4EF6;&#xFF0C;&#x62F7;&#x8D1D;&#x591A;&#x4E2A;redis.conf&#x6587;&#x4EF6;</p>
<p><img src="https://uploader.shimo.im/f/E4GPzB5zIcouKRO0.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4F7F;&#x7528;&#x67E5;&#x627E;&#x66FF;&#x6362;&#x4FEE;&#x6539;&#x53E6;&#x5916;5&#x4E2A;&#x6587;&#x4EF6;</p>
<p>&#x4F8B;&#x5982;&#xFF1A;:%s/6379/6380</p>
<p>&#x542F;&#x52A8;6&#x4E2A;redis&#x670D;&#x52A1;</p>
<p><img src="https://uploader.shimo.im/f/g0NurjelRg6iBUZ3.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5C06;&#x516D;&#x4E2A;&#x8282;&#x70B9;&#x5408;&#x6210;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;</p>
<p>&#x7EC4;&#x5408;&#x4E4B;&#x524D;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x6240;&#x6709;redis&#x5B9E;&#x4F8B;&#x542F;&#x52A8;&#x540E;&#xFF0C;nodes-xxxx.conf&#x6587;&#x4EF6;&#x90FD;&#x751F;&#x6210;&#x6B63;&#x5E38;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/GgnhDPwdwSf52hxv.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5408;&#x4F53;&#xFF1A;</p>
<p>cd  /opt/redis-6.2.1/src</p>
<table>
<thead>
<tr>
<th style="text-align:left">redis-cli --cluster create --cluster-replicas 1 192.168.11.101:6379192.168.11.101:6380 192.168.11.101:6381 192.168.11.101:6389 192.168.11.101:6390 192.168.11.101:6391</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x6B64;&#x5904;&#x4E0D;&#x8981;&#x7528;127.0.0.1&#xFF0C; &#x8BF7;&#x7528;&#x771F;&#x5B9E;IP&#x5730;&#x5740;</p>
<p>--replicas 1 &#x91C7;&#x7528;&#x6700;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x96C6;&#x7FA4;&#xFF0C;&#x4E00;&#x53F0;&#x4E3B;&#x673A;&#xFF0C;&#x4E00;&#x53F0;&#x4ECE;&#x673A;&#xFF0C;&#x6B63;&#x597D;&#x4E09;&#x7EC4;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/71NGqb8bNBAfmySz.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://uploader.shimo.im/f/RDPc71rXGLnCXtRU.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x666E;&#x901A;&#x65B9;&#x5F0F;&#x767B;&#x5F55;</p>
<p>&#x53EF;&#x80FD;&#x76F4;&#x63A5;&#x8FDB;&#x5165;&#x8BFB;&#x4E3B;&#x673A;&#xFF0C;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x65F6;&#xFF0C;&#x4F1A;&#x51FA;&#x73B0;MOVED&#x91CD;&#x5B9A;&#x5411;&#x64CD;&#x4F5C;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x5E94;&#x8BE5;&#x4EE5;&#x96C6;&#x7FA4;&#x65B9;&#x5F0F;&#x767B;&#x5F55;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/0r1RT3WWchvzTYZK.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>-c &#x91C7;&#x7528;&#x96C6;&#x7FA4;&#x7B56;&#x7565;&#x8FDE;&#x63A5;&#xFF0C;&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x4F1A;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x5230;&#x76F8;&#x5E94;&#x7684;&#x5199;&#x4E3B;&#x673A;</p>
<p><img src="https://uploader.shimo.im/f/P7eYWME6gk0N0nKc.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x901A;&#x8FC7; cluster nodes &#x547D;&#x4EE4;&#x67E5;&#x770B;&#x96C6;&#x7FA4;&#x4FE1;&#x606F;</p>
<p><img src="https://uploader.shimo.im/f/Dh8wUYN06WgnKgjg.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>redis cluster &#x5982;&#x4F55;&#x5206;&#x914D;&#x8FD9;&#x516D;&#x4E2A;&#x8282;&#x70B9;?</p>
<p>&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x81F3;&#x5C11;&#x8981;&#x6709;&#x4E09;&#x4E2A;&#x4E3B;&#x8282;&#x70B9;&#x3002;</p>
<p>&#x9009;&#x9879; --cluster-replicas 1 &#x8868;&#x793A;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#x4E3A;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x4E3B;&#x8282;&#x70B9;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4ECE;&#x8282;&#x70B9;&#x3002;</p>
<p>&#x5206;&#x914D;&#x539F;&#x5219;&#x5C3D;&#x91CF;&#x4FDD;&#x8BC1;&#x6BCF;&#x4E2A;&#x4E3B;&#x6570;&#x636E;&#x5E93;&#x8FD0;&#x884C;&#x5728;&#x4E0D;&#x540C;&#x7684;IP&#x5730;&#x5740;&#xFF0C;&#x6BCF;&#x4E2A;&#x4ECE;&#x5E93;&#x548C;&#x4E3B;&#x5E93;&#x4E0D;&#x5728;&#x4E00;&#x4E2A;IP&#x5730;&#x5740;&#x4E0A;&#x3002;</p>
<p>&#x4EC0;&#x4E48;&#x662F;slots</p>
<p>[OK] All nodes agree about slots configuration.</p>
<blockquote>
<blockquote>
<blockquote>
<p>Check for open slots...</p>
<p>Check slots coverage...</p>
</blockquote>
</blockquote>
</blockquote>
<p>[OK] All16384slots covered.</p>
<p>&#x4E00;&#x4E2A; Redis &#x96C6;&#x7FA4;&#x5305;&#x542B; 16384 &#x4E2A;&#x63D2;&#x69FD;&#xFF08;hash slot&#xFF09;&#xFF0C; &#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x952E;&#x90FD;&#x5C5E;&#x4E8E;&#x8FD9; 16384 &#x4E2A;&#x63D2;&#x69FD;&#x7684;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#xFF0C;</p>
<p>&#x96C6;&#x7FA4;&#x4F7F;&#x7528;&#x516C;&#x5F0F; CRC16(key) % 16384 &#x6765;&#x8BA1;&#x7B97;&#x952E; key &#x5C5E;&#x4E8E;&#x54EA;&#x4E2A;&#x69FD;&#xFF0C; &#x5176;&#x4E2D; CRC16(key) &#x8BED;&#x53E5;&#x7528;&#x4E8E;&#x8BA1;&#x7B97;&#x952E; key &#x7684; CRC16 &#x6821;&#x9A8C;&#x548C; &#x3002;</p>
<p>&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x8D1F;&#x8D23;&#x5904;&#x7406;&#x4E00;&#x90E8;&#x5206;&#x63D2;&#x69FD;&#x3002; &#x4E3E;&#x4E2A;&#x4F8B;&#x5B50;&#xFF0C; &#x5982;&#x679C;&#x4E00;&#x4E2A;&#x96C6;&#x7FA4;&#x53EF;&#x4EE5;&#x6709;&#x4E3B;&#x8282;&#x70B9;&#xFF0C; &#x5176;&#x4E2D;&#xFF1A;</p>
<p>&#x8282;&#x70B9; A &#x8D1F;&#x8D23;&#x5904;&#x7406; 0 &#x53F7;&#x81F3; 5460 &#x53F7;&#x63D2;&#x69FD;&#x3002;</p>
<p>&#x8282;&#x70B9; B &#x8D1F;&#x8D23;&#x5904;&#x7406; 5461 &#x53F7;&#x81F3; 10922 &#x53F7;&#x63D2;&#x69FD;&#x3002;</p>
<p>&#x8282;&#x70B9; C &#x8D1F;&#x8D23;&#x5904;&#x7406; 10923 &#x53F7;&#x81F3; 16383 &#x53F7;&#x63D2;&#x69FD;&#x3002;</p>
<p>&#x5728;&#x96C6;&#x7FA4;&#x4E2D;&#x5F55;&#x5165;&#x503C;</p>
<p>&#x5728;redis-cli&#x6BCF;&#x6B21;&#x5F55;&#x5165;&#x3001;&#x67E5;&#x8BE2;&#x952E;&#x503C;&#xFF0C;redis&#x90FD;&#x4F1A;&#x8BA1;&#x7B97;&#x51FA;&#x8BE5;key&#x5E94;&#x8BE5;&#x9001;&#x5F80;&#x7684;&#x63D2;&#x69FD;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x8BE5;&#x5BA2;&#x6237;&#x7AEF;&#x5BF9;&#x5E94;&#x670D;&#x52A1;&#x5668;&#x7684;&#x63D2;&#x69FD;&#xFF0C;redis&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x5E76;&#x544A;&#x77E5;&#x5E94;&#x524D;&#x5F80;&#x7684;redis&#x5B9E;&#x4F8B;&#x5730;&#x5740;&#x548C;&#x7AEF;&#x53E3;&#x3002;</p>
<p>redis-cli&#x5BA2;&#x6237;&#x7AEF;&#x63D0;&#x4F9B;&#x4E86; &#x2013;c &#x53C2;&#x6570;&#x5B9E;&#x73B0;&#x81EA;&#x52A8;&#x91CD;&#x5B9A;&#x5411;&#x3002;</p>
<p>&#x5982; redis-cli-c&#x2013;p 6379 &#x767B;&#x5165;&#x540E;&#xFF0C;&#x518D;&#x5F55;&#x5165;&#x3001;&#x67E5;&#x8BE2;&#x952E;&#x503C;&#x5BF9;&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x91CD;&#x5B9A;&#x5411;&#x3002;</p>
<p>&#x4E0D;&#x5728;&#x4E00;&#x4E2A;slot&#x4E0B;&#x7684;&#x952E;&#x503C;&#xFF0C;&#x662F;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;mget,mset&#x7B49;&#x591A;&#x952E;&#x64CD;&#x4F5C;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/C7EL1dSeiRGPiJ4c.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;{}&#x6765;&#x5B9A;&#x4E49;&#x7EC4;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;key&#x4E2D;{}&#x5185;&#x76F8;&#x540C;&#x5185;&#x5BB9;&#x7684;&#x952E;&#x503C;&#x5BF9;&#x653E;&#x5230;&#x4E00;&#x4E2A;slot&#x4E2D;&#x53BB;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/ZHULQqobRjc0nYge.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x67E5;&#x8BE2;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x503C;</p>
<p>CLUSTER GETKEYSINSLOT <slot><count> &#x8FD4;&#x56DE; count &#x4E2A; slot &#x69FD;&#x4E2D;&#x7684;&#x952E;&#x3002;</count></slot></p>
<p><img src="https://uploader.shimo.im/f/LYCdRBEQhx1q8Jhs.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x6545;&#x969C;&#x6062;&#x590D;</p>
<p>&#x5982;&#x679C;&#x4E3B;&#x8282;&#x70B9;&#x4E0B;&#x7EBF;&#xFF1F;&#x4ECE;&#x8282;&#x70B9;&#x80FD;&#x5426;&#x81EA;&#x52A8;&#x5347;&#x4E3A;&#x4E3B;&#x8282;&#x70B9;&#xFF1F;&#x6CE8;&#x610F;&#xFF1A;15&#x79D2;&#x8D85;&#x65F6;</p>
<p><img src="https://uploader.shimo.im/f/7DHI8UE9qGuTY4tH.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x4E3B;&#x8282;&#x70B9;&#x6062;&#x590D;&#x540E;&#xFF0C;&#x4E3B;&#x4ECE;&#x5173;&#x7CFB;&#x4F1A;&#x5982;&#x4F55;&#xFF1F;&#x4E3B;&#x8282;&#x70B9;&#x56DE;&#x6765;&#x53D8;&#x6210;&#x4ECE;&#x673A;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/JO1eC4aEQRZw38MP.jpeg!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5982;&#x679C;&#x6240;&#x6709;&#x67D0;&#x4E00;&#x6BB5;&#x63D2;&#x69FD;&#x7684;&#x4E3B;&#x4ECE;&#x8282;&#x70B9;&#x90FD;&#x5B95;&#x6389;&#xFF0C;redis&#x670D;&#x52A1;&#x662F;&#x5426;&#x8FD8;&#x80FD;&#x7EE7;&#x7EED;?</p>
<p>&#x5982;&#x679C;&#x67D0;&#x4E00;&#x6BB5;&#x63D2;&#x69FD;&#x7684;&#x4E3B;&#x4ECE;&#x90FD;&#x6302;&#x6389;&#xFF0C;&#x800C;cluster-require-full-coverage &#x4E3A;yes &#xFF0C;&#x90A3;&#x4E48; &#xFF0C;&#x6574;&#x4E2A;&#x96C6;&#x7FA4;&#x90FD;&#x6302;&#x6389;</p>
<p>&#x5982;&#x679C;&#x67D0;&#x4E00;&#x6BB5;&#x63D2;&#x69FD;&#x7684;&#x4E3B;&#x4ECE;&#x90FD;&#x6302;&#x6389;&#xFF0C;&#x800C;cluster-require-full-coverage &#x4E3A;no &#xFF0C;&#x90A3;&#x4E48;&#xFF0C;&#x8BE5;&#x63D2;&#x69FD;&#x6570;&#x636E;&#x5168;&#x90FD;&#x4E0D;&#x80FD;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x5B58;&#x50A8;&#x3002;</p>
<p>redis.conf&#x4E2D;&#x7684;&#x53C2;&#x6570;  cluster-require-full-coverage</p>
<p>&#x96C6;&#x7FA4;&#x7684;Jedis&#x5F00;&#x53D1;</p>
<p>&#x5373;&#x4F7F;&#x8FDE;&#x63A5;&#x7684;&#x4E0D;&#x662F;&#x4E3B;&#x673A;&#xFF0C;&#x96C6;&#x7FA4;&#x4F1A;&#x81EA;&#x52A8;&#x5207;&#x6362;&#x4E3B;&#x673A;&#x5B58;&#x50A8;&#x3002;&#x4E3B;&#x673A;&#x5199;&#xFF0C;&#x4ECE;&#x673A;&#x8BFB;&#x3002;</p>
<p>&#x65E0;&#x4E2D;&#x5FC3;&#x5316;&#x4E3B;&#x4ECE;&#x96C6;&#x7FA4;&#x3002;&#x65E0;&#x8BBA;&#x4ECE;&#x54EA;&#x53F0;&#x4E3B;&#x673A;&#x5199;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5176;&#x4ED6;&#x4E3B;&#x673A;&#x4E0A;&#x90FD;&#x80FD;&#x8BFB;&#x5230;&#x6570;&#x636E;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:left">public class JedisClusterTest {<br>public static void main(String[] args) {<br>Set<hostandport>set =new HashSet<hostandport>();<br>set.add(new HostAndPort(&quot;192.168.31.211&quot;,6379));<br>JedisCluster jedisCluster=new JedisCluster(set);<br>jedisCluster.set(&quot;k1&quot;, &quot;v1&quot;);<br>System.out.println(jedisCluster.get(&quot;k1&quot;));<br>}<br>}</hostandport></hostandport></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>Redis &#x96C6;&#x7FA4;&#x63D0;&#x4F9B;&#x4E86;&#x4EE5;&#x4E0B;&#x597D;&#x5904;</p>
<p>&#x5B9E;&#x73B0;&#x6269;&#x5BB9;</p>
<p>&#x5206;&#x644A;&#x538B;&#x529B;</p>
<p>&#x65E0;&#x4E2D;&#x5FC3;&#x914D;&#x7F6E;&#x76F8;&#x5BF9;&#x7B80;&#x5355;</p>
<p>Redis &#x96C6;&#x7FA4;&#x7684;&#x4E0D;&#x8DB3;</p>
<p>&#x591A;&#x952E;&#x64CD;&#x4F5C;&#x662F;&#x4E0D;&#x88AB;&#x652F;&#x6301;&#x7684;</p>
<p>&#x591A;&#x952E;&#x7684;Redis&#x4E8B;&#x52A1;&#x662F;&#x4E0D;&#x88AB;&#x652F;&#x6301;&#x7684;&#x3002;lua&#x811A;&#x672C;&#x4E0D;&#x88AB;&#x652F;&#x6301;</p>
<p>&#x7531;&#x4E8E;&#x96C6;&#x7FA4;&#x65B9;&#x6848;&#x51FA;&#x73B0;&#x8F83;&#x665A;&#xFF0C;&#x5F88;&#x591A;&#x516C;&#x53F8;&#x5DF2;&#x7ECF;&#x91C7;&#x7528;&#x4E86;&#x5176;&#x4ED6;&#x7684;&#x96C6;&#x7FA4;&#x65B9;&#x6848;&#xFF0C;&#x800C;&#x4EE3;&#x7406;&#x6216;&#x8005;&#x5BA2;&#x6237;&#x7AEF;&#x5206;&#x7247;&#x7684;&#x65B9;&#x6848;&#x60F3;&#x8981;&#x8FC1;&#x79FB;&#x81F3;redis cluster&#xFF0C;&#x9700;&#x8981;&#x6574;&#x4F53;&#x8FC1;&#x79FB;&#x800C;&#x4E0D;&#x662F;&#x9010;&#x6B65;&#x8FC7;&#x6E21;&#xFF0C;&#x590D;&#x6742;&#x5EA6;&#x8F83;&#x5927;&#x3002;</p>
<h1 id="16redis&#x5E94;&#x7528;&#x95EE;&#x9898;&#x89E3;&#x51B3;">16.Redis&#x5E94;&#x7528;&#x95EE;&#x9898;&#x89E3;&#x51B3;</h1>
<h2 id="161&#x7F13;&#x5B58;&#x7A7F;&#x900F;">16.1&#x7F13;&#x5B58;&#x7A7F;&#x900F;</h2>
<p>&#x95EE;&#x9898;&#x63CF;&#x8FF0;</p>
<p>key&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5728;&#x6570;&#x636E;&#x6E90;&#x5E76;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x6BCF;&#x6B21;&#x9488;&#x5BF9;&#x6B64;key&#x7684;&#x8BF7;&#x6C42;&#x4ECE;&#x7F13;&#x5B58;&#x83B7;&#x53D6;&#x4E0D;&#x5230;&#xFF0C;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x538B;&#x5230;&#x6570;&#x636E;&#x6E90;&#xFF0C;&#x4ECE;&#x800C;&#x53EF;&#x80FD;&#x538B;&#x57AE;&#x6570;&#x636E;&#x6E90;&#x3002;&#x6BD4;&#x5982;&#x7528;&#x4E00;&#x4E2A;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x7528;&#x6237;id&#x83B7;&#x53D6;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x8BBA;&#x7F13;&#x5B58;&#x8FD8;&#x662F;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x6CA1;&#x6709;&#xFF0C;&#x82E5;&#x9ED1;&#x5BA2;&#x5229;&#x7528;&#x6B64;&#x6F0F;&#x6D1E;&#x8FDB;&#x884C;&#x653B;&#x51FB;&#x53EF;&#x80FD;&#x538B;&#x57AE;&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/imtQcrgNeAerHnGx.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;</p>
<p>&#x4E00;&#x4E2A;&#x4E00;&#x5B9A;&#x4E0D;&#x5B58;&#x5728;&#x7F13;&#x5B58;&#x53CA;&#x67E5;&#x8BE2;&#x4E0D;&#x5230;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x7531;&#x4E8E;&#x7F13;&#x5B58;&#x662F;&#x4E0D;&#x547D;&#x4E2D;&#x65F6;&#x88AB;&#x52A8;&#x5199;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x51FA;&#x4E8E;&#x5BB9;&#x9519;&#x8003;&#x8651;&#xFF0C;&#x5982;&#x679C;&#x4ECE;&#x5B58;&#x50A8;&#x5C42;&#x67E5;&#x4E0D;&#x5230;&#x6570;&#x636E;&#x5219;&#x4E0D;&#x5199;&#x5165;&#x7F13;&#x5B58;&#xFF0C;&#x8FD9;&#x5C06;&#x5BFC;&#x81F4;&#x8FD9;&#x4E2A;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x6570;&#x636E;&#x6BCF;&#x6B21;&#x8BF7;&#x6C42;&#x90FD;&#x8981;&#x5230;&#x5B58;&#x50A8;&#x5C42;&#x53BB;&#x67E5;&#x8BE2;&#xFF0C;&#x5931;&#x53BB;&#x4E86;&#x7F13;&#x5B58;&#x7684;&#x610F;&#x4E49;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</p>
<p>&#x5BF9;&#x7A7A;&#x503C;&#x7F13;&#x5B58;&#xFF1A;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x67E5;&#x8BE2;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x4E3A;&#x7A7A;&#xFF08;&#x4E0D;&#x7BA1;&#x662F;&#x6570;&#x636E;&#x662F;&#x5426;&#x4E0D;&#x5B58;&#x5728;&#xFF09;&#xFF0C;&#x6211;&#x4EEC;&#x4ECD;&#x7136;&#x628A;&#x8FD9;&#x4E2A;&#x7A7A;&#x7ED3;&#x679C;&#xFF08;null&#xFF09;&#x8FDB;&#x884C;&#x7F13;&#x5B58;&#xFF0C;&#x8BBE;&#x7F6E;&#x7A7A;&#x7ED3;&#x679C;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4F1A;&#x5F88;&#x77ED;&#xFF0C;&#x6700;&#x957F;&#x4E0D;&#x8D85;&#x8FC7;&#x4E94;&#x5206;&#x949F;</p>
<p>&#x8BBE;&#x7F6E;&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x540D;&#x5355;&#xFF08;&#x767D;&#x540D;&#x5355;&#xFF09;&#xFF1A;</p>
<p>&#x4F7F;&#x7528;bitmaps&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7684;&#x540D;&#x5355;&#xFF0C;&#x540D;&#x5355;id&#x4F5C;&#x4E3A;bitmaps&#x7684;&#x504F;&#x79FB;&#x91CF;&#xFF0C;&#x6BCF;&#x6B21;&#x8BBF;&#x95EE;&#x548C;bitmap&#x91CC;&#x9762;&#x7684;id&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x5982;&#x679C;&#x8BBF;&#x95EE;id&#x4E0D;&#x5728;bitmaps&#x91CC;&#x9762;&#xFF0C;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#xFF0C;&#x4E0D;&#x5141;&#x8BB8;&#x8BBF;&#x95EE;&#x3002;</p>
<p>&#x91C7;&#x7528;&#x5E03;&#x9686;&#x8FC7;&#x6EE4;&#x5668;&#xFF1A;(&#x5E03;&#x9686;&#x8FC7;&#x6EE4;&#x5668;&#xFF08;Bloom Filter&#xFF09;&#x662F;1970&#x5E74;&#x7531;&#x5E03;&#x9686;&#x63D0;&#x51FA;&#x7684;&#x3002;&#x5B83;&#x5B9E;&#x9645;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x957F;&#x7684;&#x4E8C;&#x8FDB;&#x5236;&#x5411;&#x91CF;(&#x4F4D;&#x56FE;)&#x548C;&#x4E00;&#x7CFB;&#x5217;&#x968F;&#x673A;&#x6620;&#x5C04;&#x51FD;&#x6570;&#xFF08;&#x54C8;&#x5E0C;&#x51FD;&#x6570;&#xFF09;&#x3002;</p>
<p>&#x5E03;&#x9686;&#x8FC7;&#x6EE4;&#x5668;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x68C0;&#x7D22;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x662F;&#x5426;&#x5728;&#x4E00;&#x4E2A;&#x96C6;&#x5408;&#x4E2D;&#x3002;&#x5B83;&#x7684;&#x4F18;&#x70B9;&#x662F;&#x7A7A;&#x95F4;&#x6548;&#x7387;&#x548C;&#x67E5;&#x8BE2;&#x65F6;&#x95F4;&#x90FD;&#x8FDC;&#x8FDC;&#x8D85;&#x8FC7;&#x4E00;&#x822C;&#x7684;&#x7B97;&#x6CD5;&#xFF0C;&#x7F3A;&#x70B9;&#x662F;&#x6709;&#x4E00;&#x5B9A;&#x7684;&#x8BEF;&#x8BC6;&#x522B;&#x7387;&#x548C;&#x5220;&#x9664;&#x56F0;&#x96BE;&#x3002;)</p>
<p>&#x5C06;&#x6240;&#x6709;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x7684;&#x6570;&#x636E;&#x54C8;&#x5E0C;&#x5230;&#x4E00;&#x4E2A;&#x8DB3;&#x591F;&#x5927;&#x7684;bitmaps&#x4E2D;&#xFF0C;&#x4E00;&#x4E2A;&#x4E00;&#x5B9A;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB; &#x8FD9;&#x4E2A;bitmaps&#x62E6;&#x622A;&#x6389;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x4E86;&#x5BF9;&#x5E95;&#x5C42;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x7684;&#x67E5;&#x8BE2;&#x538B;&#x529B;&#x3002;</p>
<p>&#x8FDB;&#x884C;&#x5B9E;&#x65F6;&#x76D1;&#x63A7;&#xFF1A;&#x5F53;&#x53D1;&#x73B0;Redis&#x7684;&#x547D;&#x4E2D;&#x7387;&#x5F00;&#x59CB;&#x6025;&#x901F;&#x964D;&#x4F4E;&#xFF0C;&#x9700;&#x8981;&#x6392;&#x67E5;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x548C;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x548C;&#x8FD0;&#x7EF4;&#x4EBA;&#x5458;&#x914D;&#x5408;&#xFF0C;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x9ED1;&#x540D;&#x5355;&#x9650;&#x5236;&#x670D;&#x52A1;</p>
<h2 id="172&#x7F13;&#x5B58;&#x51FB;&#x7A7F;">17.2&#x7F13;&#x5B58;&#x51FB;&#x7A7F;</h2>
<p>&#x95EE;&#x9898;&#x63CF;&#x8FF0;</p>
<p>key&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5B58;&#x5728;&#xFF0C;&#x4F46;&#x5728;redis&#x4E2D;&#x8FC7;&#x671F;&#xFF0C;&#x6B64;&#x65F6;&#x82E5;&#x6709;&#x5927;&#x91CF;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x8FC7;&#x6765;&#xFF0C;&#x8FD9;&#x4E9B;&#x8BF7;&#x6C42;&#x53D1;&#x73B0;&#x7F13;&#x5B58;&#x8FC7;&#x671F;&#x4E00;&#x822C;&#x90FD;&#x4F1A;&#x4ECE;&#x540E;&#x7AEF;DB&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x5E76;&#x56DE;&#x8BBE;&#x5230;&#x7F13;&#x5B58;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5927;&#x5E76;&#x53D1;&#x7684;&#x8BF7;&#x6C42;&#x53EF;&#x80FD;&#x4F1A;&#x77AC;&#x95F4;&#x628A;&#x540E;&#x7AEF;DB&#x538B;&#x57AE;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/J1DqEEO12XjtCDNd.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;</p>
<p>key&#x53EF;&#x80FD;&#x4F1A;&#x5728;&#x67D0;&#x4E9B;&#x65F6;&#x95F4;&#x70B9;&#x88AB;&#x8D85;&#x9AD8;&#x5E76;&#x53D1;&#x5730;&#x8BBF;&#x95EE;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x201C;&#x70ED;&#x70B9;&#x201D;&#x7684;&#x6570;&#x636E;&#x3002;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x9700;&#x8981;&#x8003;&#x8651;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x7F13;&#x5B58;&#x88AB;&#x201C;&#x51FB;&#x7A7F;&#x201D;&#x7684;&#x95EE;&#x9898;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x95EE;&#x9898;&#xFF1A;</p>
<p>&#xFF08;1&#xFF09;&#x9884;&#x5148;&#x8BBE;&#x7F6E;&#x70ED;&#x95E8;&#x6570;&#x636E;&#xFF1A;&#x5728;redis&#x9AD8;&#x5CF0;&#x8BBF;&#x95EE;&#x4E4B;&#x524D;&#xFF0C;&#x628A;&#x4E00;&#x4E9B;&#x70ED;&#x95E8;&#x6570;&#x636E;&#x63D0;&#x524D;&#x5B58;&#x5165;&#x5230;redis&#x91CC;&#x9762;&#xFF0C;&#x52A0;&#x5927;&#x8FD9;&#x4E9B;&#x70ED;&#x95E8;&#x6570;&#x636E;key&#x7684;&#x65F6;&#x957F;</p>
<p>&#xFF08;2&#xFF09;&#x5B9E;&#x65F6;&#x8C03;&#x6574;&#xFF1A;&#x73B0;&#x573A;&#x76D1;&#x63A7;&#x54EA;&#x4E9B;&#x6570;&#x636E;&#x70ED;&#x95E8;&#xFF0C;&#x5B9E;&#x65F6;&#x8C03;&#x6574;key&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x957F;</p>
<p>&#xFF08;3&#xFF09;&#x4F7F;&#x7528;&#x9501;&#xFF1A;</p>
<p>&#x5C31;&#x662F;&#x5728;&#x7F13;&#x5B58;&#x5931;&#x6548;&#x7684;&#x65F6;&#x5019;&#xFF08;&#x5224;&#x65AD;&#x62FF;&#x51FA;&#x6765;&#x7684;&#x503C;&#x4E3A;&#x7A7A;&#xFF09;&#xFF0C;&#x4E0D;&#x662F;&#x7ACB;&#x5373;&#x53BB;load db&#x3002;</p>
<p>&#x5148;&#x4F7F;&#x7528;&#x7F13;&#x5B58;&#x5DE5;&#x5177;&#x7684;&#x67D0;&#x4E9B;&#x5E26;&#x6210;&#x529F;&#x64CD;&#x4F5C;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x64CD;&#x4F5C;&#xFF08;&#x6BD4;&#x5982;Redis&#x7684;SETNX&#xFF09;&#x53BB;set&#x4E00;&#x4E2A;mutex key</p>
<p>&#x5F53;&#x64CD;&#x4F5C;&#x8FD4;&#x56DE;&#x6210;&#x529F;&#x65F6;&#xFF0C;&#x518D;&#x8FDB;&#x884C;load db&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5E76;&#x56DE;&#x8BBE;&#x7F13;&#x5B58;,&#x6700;&#x540E;&#x5220;&#x9664;mutex key&#xFF1B;</p>
<p>&#x5F53;&#x64CD;&#x4F5C;&#x8FD4;&#x56DE;&#x5931;&#x8D25;&#xFF0C;&#x8BC1;&#x660E;&#x6709;&#x7EBF;&#x7A0B;&#x5728;load db&#xFF0C;&#x5F53;&#x524D;&#x7EBF;&#x7A0B;&#x7761;&#x7720;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x518D;&#x91CD;&#x8BD5;&#x6574;&#x4E2A;get&#x7F13;&#x5B58;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/acu2KEunLBabgC51.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h2 id="173&#x7F13;&#x5B58;&#x96EA;&#x5D29;">17.3&#x7F13;&#x5B58;&#x96EA;&#x5D29;</h2>
<p>&#x95EE;&#x9898;&#x63CF;&#x8FF0;</p>
<p>key&#x5BF9;&#x5E94;&#x7684;&#x6570;&#x636E;&#x5B58;&#x5728;&#xFF0C;&#x4F46;&#x5728;redis&#x4E2D;&#x8FC7;&#x671F;&#xFF0C;&#x6B64;&#x65F6;&#x82E5;&#x6709;&#x5927;&#x91CF;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x8FC7;&#x6765;&#xFF0C;&#x8FD9;&#x4E9B;&#x8BF7;&#x6C42;&#x53D1;&#x73B0;&#x7F13;&#x5B58;&#x8FC7;&#x671F;&#x4E00;&#x822C;&#x90FD;&#x4F1A;&#x4ECE;&#x540E;&#x7AEF;DB&#x52A0;&#x8F7D;&#x6570;&#x636E;&#x5E76;&#x56DE;&#x8BBE;&#x5230;&#x7F13;&#x5B58;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x5927;&#x5E76;&#x53D1;&#x7684;&#x8BF7;&#x6C42;&#x53EF;&#x80FD;&#x4F1A;&#x77AC;&#x95F4;&#x628A;&#x540E;&#x7AEF;DB&#x538B;&#x57AE;&#x3002;</p>
<p>&#x7F13;&#x5B58;&#x96EA;&#x5D29;&#x4E0E;&#x7F13;&#x5B58;&#x51FB;&#x7A7F;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x8FD9;&#x91CC;&#x9488;&#x5BF9;&#x5F88;&#x591A;key&#x7F13;&#x5B58;&#xFF0C;&#x524D;&#x8005;&#x5219;&#x662F;&#x67D0;&#x4E00;&#x4E2A;key</p>
<p>&#x6B63;&#x5E38;&#x8BBF;&#x95EE;</p>
<p><img src="https://uploader.shimo.im/f/4gYK6mEGs45Nn7PJ.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x7F13;&#x5B58;&#x5931;&#x6548;&#x77AC;&#x95F4;</p>
<p><img src="https://uploader.shimo.im/f/YKuIF0imBjXvLBjC.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;</p>
<p>&#x7F13;&#x5B58;&#x5931;&#x6548;&#x65F6;&#x7684;&#x96EA;&#x5D29;&#x6548;&#x5E94;&#x5BF9;&#x5E95;&#x5C42;&#x7CFB;&#x7EDF;&#x7684;&#x51B2;&#x51FB;&#x975E;&#x5E38;&#x53EF;&#x6015;&#xFF01;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;</p>
<p>&#x6784;&#x5EFA;&#x591A;&#x7EA7;&#x7F13;&#x5B58;&#x67B6;&#x6784;&#xFF1A;nginx&#x7F13;&#x5B58; + redis&#x7F13;&#x5B58; +&#x5176;&#x4ED6;&#x7F13;&#x5B58;&#xFF08;ehcache&#x7B49;&#xFF09;</p>
<p>&#x4F7F;&#x7528;&#x9501;&#x6216;&#x961F;&#x5217;&#xFF1A;</p>
<p>&#x7528;&#x52A0;&#x9501;&#x6216;&#x8005;&#x961F;&#x5217;&#x7684;&#x65B9;&#x5F0F;&#x4FDD;&#x8BC1;&#x6765;&#x4FDD;&#x8BC1;&#x4E0D;&#x4F1A;&#x6709;&#x5927;&#x91CF;&#x7684;&#x7EBF;&#x7A0B;&#x5BF9;&#x6570;&#x636E;&#x5E93;&#x4E00;&#x6B21;&#x6027;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x5931;&#x6548;&#x65F6;&#x5927;&#x91CF;&#x7684;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x843D;&#x5230;&#x5E95;&#x5C42;&#x5B58;&#x50A8;&#x7CFB;&#x7EDF;&#x4E0A;&#x3002;&#x4E0D;&#x9002;&#x7528;&#x9AD8;&#x5E76;&#x53D1;&#x60C5;&#x51B5;</p>
<p>&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x6807;&#x5FD7;&#x66F4;&#x65B0;&#x7F13;&#x5B58;&#xFF1A;</p>
<p>&#x8BB0;&#x5F55;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x662F;&#x5426;&#x8FC7;&#x671F;&#xFF08;&#x8BBE;&#x7F6E;&#x63D0;&#x524D;&#x91CF;&#xFF09;&#xFF0C;&#x5982;&#x679C;&#x8FC7;&#x671F;&#x4F1A;&#x89E6;&#x53D1;&#x901A;&#x77E5;&#x53E6;&#x5916;&#x7684;&#x7EBF;&#x7A0B;&#x5728;&#x540E;&#x53F0;&#x53BB;&#x66F4;&#x65B0;&#x5B9E;&#x9645;key&#x7684;&#x7F13;&#x5B58;&#x3002;</p>
<p>&#x5C06;&#x7F13;&#x5B58;&#x5931;&#x6548;&#x65F6;&#x95F4;&#x5206;&#x6563;&#x5F00;&#xFF1A;</p>
<p>&#x6BD4;&#x5982;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x539F;&#x6709;&#x7684;&#x5931;&#x6548;&#x65F6;&#x95F4;&#x57FA;&#x7840;&#x4E0A;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x503C;&#xFF0C;&#x6BD4;&#x5982;1-5&#x5206;&#x949F;&#x968F;&#x673A;&#xFF0C;&#x8FD9;&#x6837;&#x6BCF;&#x4E00;&#x4E2A;&#x7F13;&#x5B58;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x7684;&#x91CD;&#x590D;&#x7387;&#x5C31;&#x4F1A;&#x964D;&#x4F4E;&#xFF0C;&#x5C31;&#x5F88;&#x96BE;&#x5F15;&#x53D1;&#x96C6;&#x4F53;&#x5931;&#x6548;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>
<h2 id="174&#x5206;&#x5E03;&#x5F0F;&#x9501;">17.4&#x5206;&#x5E03;&#x5F0F;&#x9501;</h2>
<p>&#x95EE;&#x9898;&#x63CF;&#x8FF0;</p>
<p>&#x968F;&#x7740;&#x4E1A;&#x52A1;&#x53D1;&#x5C55;&#x7684;&#x9700;&#x8981;&#xFF0C;&#x539F;&#x5355;&#x4F53;&#x5355;&#x673A;&#x90E8;&#x7F72;&#x7684;&#x7CFB;&#x7EDF;&#x88AB;&#x6F14;&#x5316;&#x6210;&#x5206;&#x5E03;&#x5F0F;&#x96C6;&#x7FA4;&#x7CFB;&#x7EDF;&#x540E;&#xFF0C;&#x7531;&#x4E8E;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x591A;&#x7EBF;&#x7A0B;&#x3001;&#x591A;&#x8FDB;&#x7A0B;&#x5E76;&#x4E14;&#x5206;&#x5E03;&#x5728;&#x4E0D;&#x540C;&#x673A;&#x5668;&#x4E0A;&#xFF0C;&#x8FD9;&#x5C06;&#x4F7F;&#x539F;&#x5355;&#x673A;&#x90E8;&#x7F72;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x5E76;&#x53D1;&#x63A7;&#x5236;&#x9501;&#x7B56;&#x7565;&#x5931;&#x6548;&#xFF0C;&#x5355;&#x7EAF;&#x7684;Java API&#x5E76;&#x4E0D;&#x80FD;&#x63D0;&#x4F9B;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x7684;&#x80FD;&#x529B;&#x3002;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x5C31;&#x9700;&#x8981;&#x4E00;&#x79CD;&#x8DE8;JVM&#x7684;&#x4E92;&#x65A5;&#x673A;&#x5236;&#x6765;&#x63A7;&#x5236;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#x7684;&#x8BBF;&#x95EE;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x8981;&#x89E3;&#x51B3;&#x7684;&#x95EE;&#x9898;&#xFF01;</p>
<p>&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x4E3B;&#x6D41;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x6848;&#xFF1A;</p>
<ol>
<li><p>&#x57FA;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;</p>
</li>
<li><p>&#x57FA;&#x4E8E;&#x7F13;&#x5B58;&#xFF08;Redis&#x7B49;&#xFF09;</p>
</li>
<li><p>&#x57FA;&#x4E8E;Zookeeper</p>
</li>
</ol>
<p>&#x6BCF;&#x4E00;&#x79CD;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x90FD;&#x6709;&#x5404;&#x81EA;&#x7684;&#x4F18;&#x7F3A;&#x70B9;&#xFF1A;</p>
<ol>
<li><p>&#x6027;&#x80FD;&#xFF1A;redis&#x6700;&#x9AD8;</p>
</li>
<li><p>&#x53EF;&#x9760;&#x6027;&#xFF1A;zookeeper&#x6700;&#x9AD8;</p>
</li>
</ol>
<p>&#x8FD9;&#x91CC;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x57FA;&#x4E8E;redis&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;&#x4F7F;&#x7528;redis&#x5B9E;&#x73B0;&#x5206;&#x5E03;&#x5F0F;&#x9501;</p>
<p>redis:&#x547D;&#x4EE4;</p>
<p>set sku:1:info &#x201C;OK&#x201D; NX PX 10000</p>
<p>EX second &#xFF1A;&#x8BBE;&#x7F6E;&#x952E;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4E3A; second &#x79D2;&#x3002; SET key value EX second &#x6548;&#x679C;&#x7B49;&#x540C;&#x4E8E; SETEX key second value &#x3002;</p>
<p>PX millisecond &#xFF1A;&#x8BBE;&#x7F6E;&#x952E;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4E3A; millisecond &#x6BEB;&#x79D2;&#x3002; SET key value PX millisecond &#x6548;&#x679C;&#x7B49;&#x540C;&#x4E8E; PSETEX key millisecond value &#x3002;</p>
<p>NX &#xFF1A;&#x53EA;&#x5728;&#x952E;&#x4E0D;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x624D;&#x5BF9;&#x952E;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x64CD;&#x4F5C;&#x3002; SET key value NX &#x6548;&#x679C;&#x7B49;&#x540C;&#x4E8E; SETNX key value &#x3002;</p>
<p>XX &#xFF1A;&#x53EA;&#x5728;&#x952E;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#x65F6;&#xFF0C;&#x624D;&#x5BF9;&#x952E;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x64CD;&#x4F5C;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/gcTFm8s6BXDbkIZi.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<ol>
<li><p>&#x591A;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x540C;&#x65F6;&#x83B7;&#x53D6;&#x9501;&#xFF08;setnx&#xFF09;</p>
</li>
<li><p>&#x83B7;&#x53D6;&#x6210;&#x529F;&#xFF0C;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;{&#x4ECE;db&#x83B7;&#x53D6;&#x6570;&#x636E;&#xFF0C;&#x653E;&#x5165;&#x7F13;&#x5B58;}&#xFF0C;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x91CA;&#x653E;&#x9501;&#xFF08;del&#xFF09;</p>
</li>
<li><p>&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;&#x7B49;&#x5F85;&#x91CD;&#x8BD5;</p>
</li>
</ol>
<p>&#x7F16;&#x5199;&#x4EE3;&#x7801;</p>
<p>Redis: set num 0</p>
<table>
<thead>
<tr>
<th style="text-align:left">@GetMapping(&quot;testLock&quot;)<br>public void testLock(){<br>//1&#x83B7;&#x53D6;&#x9501;&#xFF0C;setne<br>Boolean lock = redisTemplate.opsForValue().setIfAbsent(&quot;lock&quot;, &quot;111&quot;);<br>//2&#x83B7;&#x53D6;&#x9501;&#x6210;&#x529F;&#x3001;&#x67E5;&#x8BE2;num&#x7684;&#x503C;<br>if(lock){<br>Object value = redisTemplate.opsForValue().get(&quot;num&quot;);<br>//2.1&#x5224;&#x65AD;num&#x4E3A;&#x7A7A;return<br>if(StringUtils.isEmpty(value)){<br>return;<br>}<br>//2.2&#x6709;&#x503C;&#x5C31;&#x8F6C;&#x6210;&#x6210;int<br>int num = Integer.parseInt(value+&quot;&quot;);<br>//2.3&#x628A;redis&#x7684;num&#x52A0;1<br>redisTemplate.opsForValue().set(&quot;num&quot;, ++num);<br>//2.4&#x91CA;&#x653E;&#x9501;&#xFF0C;del<br>redisTemplate.delete(&quot;lock&quot;);<br><br>}else{<br>//3&#x83B7;&#x53D6;&#x9501;&#x5931;&#x8D25;&#x3001;&#x6BCF;&#x9694;0.1&#x79D2;&#x518D;&#x83B7;&#x53D6;<br>try {<br>Thread.sleep(100);<br>testLock();<br>} catch (InterruptedException e) {<br>e.printStackTrace();<br>}<br>}<br>}</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x91CD;&#x542F;&#xFF0C;&#x670D;&#x52A1;&#x96C6;&#x7FA4;&#xFF0C;&#x901A;&#x8FC7;&#x7F51;&#x5173;&#x538B;&#x529B;&#x6D4B;&#x8BD5;&#xFF1A;</p>
<p>ab -n 1000 -c 100 <a href="http://192.168.140.1:8080/test/testLock" target="_blank">http://192.168.140.1:8080/test/testLock</a></p>
<p><img src="https://uploader.shimo.im/f/XqUEIyRgOh1q1xAq.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x67E5;&#x770B;redis&#x4E2D;num&#x7684;&#x503C;&#xFF1A;</p>
<p><img src="https://uploader.shimo.im/f/rEzGTWFBE11WnOfp.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x57FA;&#x672C;&#x5B9E;&#x73B0;&#x3002;</p>
<p>&#x95EE;&#x9898;&#xFF1A;setnx&#x521A;&#x597D;&#x83B7;&#x53D6;&#x5230;&#x9501;&#xFF0C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#xFF0C;&#x5BFC;&#x81F4;&#x9501;&#x65E0;&#x6CD5;&#x91CA;&#x653E;</p>
<p>&#x89E3;&#x51B3;&#xFF1A;&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF0C;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x9501;&#x3002;</p>
<p>&#x4F18;&#x5316;&#x4E4B;&#x8BBE;&#x7F6E;&#x9501;&#x7684;&#x8FC7;&#x671F;&#x65F6;&#x95F4;</p>
<p>&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x6709;&#x4E24;&#x79CD;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ol>
<li><p>&#x9996;&#x5148;&#x60F3;&#x5230;&#x901A;&#x8FC7;expire&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF08;&#x7F3A;&#x4E4F;&#x539F;&#x5B50;&#x6027;&#xFF1A;&#x5982;&#x679C;&#x5728;setnx&#x548C;expire&#x4E4B;&#x95F4;&#x51FA;&#x73B0;&#x5F02;&#x5E38;&#xFF0C;&#x9501;&#x4E5F;&#x65E0;&#x6CD5;&#x91CA;&#x653E;&#xFF09;</p>
</li>
<li><p>&#x5728;set&#x65F6;&#x6307;&#x5B9A;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF08;&#x63A8;&#x8350;&#xFF09;</p>
</li>
</ol>
<p><img src="https://uploader.shimo.im/f/iFlbvNZkGN1YAmtz.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#xFF1A;</p>
<p><img src="https://uploader.shimo.im/f/4Pl313juwd7TwN8t.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x538B;&#x529B;&#x6D4B;&#x8BD5;&#x80AF;&#x5B9A;&#x4E5F;&#x6CA1;&#x6709;&#x95EE;&#x9898;&#x3002;&#x81EA;&#x884C;&#x6D4B;&#x8BD5;</p>
<p>&#x95EE;&#x9898;&#xFF1A;&#x53EF;&#x80FD;&#x4F1A;&#x91CA;&#x653E;&#x5176;&#x4ED6;&#x670D;&#x52A1;&#x5668;&#x7684;&#x9501;&#x3002;</p>
<p>&#x573A;&#x666F;&#xFF1A;&#x5982;&#x679C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x6267;&#x884C;&#x65F6;&#x95F4;&#x662F;7s&#x3002;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x5982;&#x4E0B;</p>
<p>index1&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x6CA1;&#x6267;&#x884C;&#x5B8C;&#xFF0C;3&#x79D2;&#x540E;&#x9501;&#x88AB;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x3002;</p>
<p>index2&#x83B7;&#x53D6;&#x5230;&#x9501;&#xFF0C;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#xFF0C;3&#x79D2;&#x540E;&#x9501;&#x88AB;&#x81EA;&#x52A8;&#x91CA;&#x653E;&#x3002;</p>
<p>index3&#x83B7;&#x53D6;&#x5230;&#x9501;&#xFF0C;&#x6267;&#x884C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;</p>
<p>index1&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x6267;&#x884C;&#x5B8C;&#x6210;&#xFF0C;&#x5F00;&#x59CB;&#x8C03;&#x7528;del&#x91CA;&#x653E;&#x9501;&#xFF0C;&#x8FD9;&#x65F6;&#x91CA;&#x653E;&#x7684;&#x662F;index3&#x7684;&#x9501;&#xFF0C;&#x5BFC;&#x81F4;index3&#x7684;&#x4E1A;&#x52A1;&#x53EA;&#x6267;&#x884C;1s&#x5C31;&#x88AB;&#x522B;&#x4EBA;&#x91CA;&#x653E;&#x3002;</p>
<p>&#x6700;&#x7EC8;&#x7B49;&#x4E8E;&#x6CA1;&#x9501;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#xFF1A;setnx&#x83B7;&#x53D6;&#x9501;&#x65F6;&#xFF0C;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;&#x6307;&#x5B9A;&#x7684;&#x552F;&#x4E00;&#x503C;&#xFF08;&#x4F8B;&#x5982;&#xFF1A;uuid&#xFF09;&#xFF1B;&#x91CA;&#x653E;&#x524D;&#x83B7;&#x53D6;&#x8FD9;&#x4E2A;&#x503C;&#xFF0C;&#x5224;&#x65AD;&#x662F;&#x5426;&#x81EA;&#x5DF1;&#x7684;&#x9501;</p>
<p>&#x4F18;&#x5316;&#x4E4B;UUID&#x9632;&#x8BEF;&#x5220;</p>
<p><img src="https://uploader.shimo.im/f/PwMFGgl4omMcDtnV.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p><img src="https://uploader.shimo.im/f/RAiITTMs5cvlf3DV.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x95EE;&#x9898;&#xFF1A;&#x5220;&#x9664;&#x64CD;&#x4F5C;&#x7F3A;&#x4E4F;&#x539F;&#x5B50;&#x6027;&#x3002;</p>
<p>&#x573A;&#x666F;&#xFF1A;</p>
<p>index1&#x6267;&#x884C;&#x5220;&#x9664;&#x65F6;&#xFF0C;&#x67E5;&#x8BE2;&#x5230;&#x7684;lock&#x503C;&#x786E;&#x5B9E;&#x548C;uuid&#x76F8;&#x7B49;</p>
<p>uuid=v1</p>
<p>set(lock,uuid)&#xFF1B;</p>
<p><img src="https://uploader.shimo.im/f/4At7lvlCsyvvHm8F.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>index1&#x6267;&#x884C;&#x5220;&#x9664;&#x524D;&#xFF0C;lock&#x521A;&#x597D;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x5DF2;&#x5230;&#xFF0C;&#x88AB;redis&#x81EA;&#x52A8;&#x91CA;&#x653E;</p>
<p>&#x5728;redis&#x4E2D;&#x6CA1;&#x6709;&#x4E86;lock&#xFF0C;&#x6CA1;&#x6709;&#x4E86;&#x9501;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/lg4TZCgQbHkjER3G.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>index2&#x83B7;&#x53D6;&#x4E86;lock</p>
<p>index2&#x7EBF;&#x7A0B;&#x83B7;&#x53D6;&#x5230;&#x4E86;cpu&#x7684;&#x8D44;&#x6E90;&#xFF0C;&#x5F00;&#x59CB;&#x6267;&#x884C;&#x65B9;&#x6CD5;</p>
<p>uuid=v2</p>
<p>set(lock,uuid)&#xFF1B;</p>
<p>index1&#x6267;&#x884C;&#x5220;&#x9664;&#xFF0C;&#x6B64;&#x65F6;&#x4F1A;&#x628A;index2&#x7684;lock&#x5220;&#x9664;</p>
<p>index1 &#x56E0;&#x4E3A;&#x5DF2;&#x7ECF;&#x5728;&#x65B9;&#x6CD5;&#x4E2D;&#x4E86;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x4E0A;&#x9501;&#x3002;index1&#x6709;&#x6267;&#x884C;&#x7684;&#x6743;&#x9650;&#x3002;index1&#x5DF2;&#x7ECF;&#x6BD4;&#x8F83;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x5F00;&#x59CB;&#x6267;&#x884C;</p>
<p><img src="https://uploader.shimo.im/f/lg4TZCgQbHkjER3G.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5220;&#x9664;&#x7684;index2&#x7684;&#x9501;&#xFF01;</p>
<p>&#x4F18;&#x5316;&#x4E4B;LUA&#x811A;&#x672C;&#x4FDD;&#x8BC1;&#x5220;&#x9664;&#x7684;&#x539F;&#x5B50;&#x6027;</p>
<table>
<thead>
<tr>
<th style="text-align:left">@GetMapping(&quot;testLockLua&quot;)<br>public void testLockLua() {<br>//1&#x58F0;&#x660E;&#x4E00;&#x4E2A;uuid ,&#x5C06;&#x505A;&#x4E3A;&#x4E00;&#x4E2A;value&#x653E;&#x5165;&#x6211;&#x4EEC;&#x7684;key&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x4E2D;<br>String uuid = UUID.randomUUID().toString();<br>//2&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x9501;&#xFF1A;lua&#x811A;&#x672C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x540C;&#x4E00;&#x628A;&#x9501;&#xFF0C;&#x6765;&#x5B9E;&#x73B0;&#x5220;&#x9664;&#xFF01;<br>String skuId = &quot;25&quot;; //&#x8BBF;&#x95EE;skuId&#x4E3A;25&#x53F7;&#x7684;&#x5546;&#x54C1;100008348542<br>String locKey = &quot;lock:&quot; + skuId; //&#x9501;&#x4F4F;&#x7684;&#x662F;&#x6BCF;&#x4E2A;&#x5546;&#x54C1;&#x7684;&#x6570;&#x636E;<br><br>// 3&#x83B7;&#x53D6;&#x9501;<br>Boolean lock = redisTemplate.opsForValue().setIfAbsent(locKey, uuid, 3, TimeUnit.SECONDS);<br><br>//&#x7B2C;&#x4E00;&#x79CD;&#xFF1A;lock&#x4E0E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x4E2D;&#x95F4;&#x4E0D;&#x5199;&#x4EFB;&#x4F55;&#x7684;&#x4EE3;&#x7801;&#x3002;<br>// redisTemplate.expire(&quot;lock&quot;,10, TimeUnit.SECONDS);//&#x8BBE;&#x7F6E;&#x8FC7;&#x671F;&#x65F6;&#x95F4;<br>//&#x5982;&#x679C;true<br>if (lock) {<br>//&#x6267;&#x884C;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x5F00;&#x59CB;<br>//&#x83B7;&#x53D6;&#x7F13;&#x5B58;&#x4E2D;&#x7684;num&#x6570;&#x636E;<br>Object value = redisTemplate.opsForValue().get(&quot;num&quot;);<br>//&#x5982;&#x679C;&#x662F;&#x7A7A;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;<br>if (StringUtils.isEmpty(value)) {<br>return;<br>}<br>//&#x4E0D;&#x662F;&#x7A7A;&#x5982;&#x679C;&#x8BF4;&#x5728;&#x8FD9;&#x51FA;&#x73B0;&#x4E86;&#x5F02;&#x5E38;&#xFF01;&#x90A3;&#x4E48;delete&#x5C31;&#x5220;&#x9664;&#x5931;&#x8D25;&#xFF01;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x9501;&#x6C38;&#x8FDC;&#x5B58;&#x5728;&#xFF01;<br>int num = Integer.parseInt(value + &quot;&quot;);<br>//&#x4F7F;num&#x6BCF;&#x6B21;+1&#x653E;&#x5165;&#x7F13;&#x5B58;<br>redisTemplate.opsForValue().set(&quot;num&quot;, String.valueOf(++num));<br>/<em>&#x4F7F;&#x7528;lua&#x811A;&#x672C;&#x6765;&#x9501;</em>/<br>//&#x5B9A;&#x4E49;lua&#x811A;&#x672C;<br>String script = &quot;if redis.call(&apos;get&apos;, KEYS[1]) == ARGV[1] then returnredis.call(&apos;del&apos;, KEYS[1]) else return 0 end&quot;;<br>//&#x4F7F;&#x7528;redis&#x6267;&#x884C;lua&#x6267;&#x884C;<br>DefaultRedisScript<long> redisScript = new DefaultRedisScript&lt;&gt;();<br>redisScript.setScriptText(script);<br>//&#x8BBE;&#x7F6E;&#x4E00;&#x4E0B;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x4E3A;Long<br>//&#x56E0;&#x4E3A;&#x5220;&#x9664;&#x5224;&#x65AD;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD4;&#x56DE;&#x7684;0,&#x7ED9;&#x5176;&#x5C01;&#x88C5;&#x4E3A;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x5C01;&#x88C5;&#x90A3;&#x4E48;&#x9ED8;&#x8BA4;&#x8FD4;&#x56DE;String&#x7C7B;&#x578B;&#xFF0C;<br>//&#x90A3;&#x4E48;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;&#x4E0E;0&#x4F1A;&#x6709;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#x3002;<br>redisScript.setResultType(Long.class);<br>//&#x7B2C;&#x4E00;&#x4E2A;&#x8981;&#x662F;script&#x811A;&#x672C;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x9700;&#x8981;&#x5224;&#x65AD;&#x7684;key&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x5C31;&#x662F;key&#x6240;&#x5BF9;&#x5E94;&#x7684;&#x503C;&#x3002;<br>redisTemplate.execute(redisScript, Arrays.asList(locKey), uuid);<br>} else {<br>//&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;<br>try {<br>//&#x7761;&#x7720;<br>Thread.sleep(1000);<br>//&#x7761;&#x9192;&#x4E86;&#x4E4B;&#x540E;&#xFF0C;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x3002;<br>testLockLua();<br>} catch (InterruptedException e) {<br>e.printStackTrace();<br>}<br>}<br>}</long></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>Lua &#x811A;&#x672C;&#x8BE6;&#x89E3;&#xFF1A;</p>
<p><img src="https://uploader.shimo.im/f/p9iFrNBZptt9CaLZ.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x9879;&#x76EE;&#x4E2D;&#x6B63;&#x786E;&#x4F7F;&#x7528;&#xFF1A;</p>
<table>
<thead>
<tr>
<th style="text-align:left">&#x5B9A;&#x4E49;key&#xFF0C;key&#x5E94;&#x8BE5;&#x662F;&#x4E3A;&#x6BCF;&#x4E2A;sku&#x5B9A;&#x4E49;&#x7684;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6BCF;&#x4E2A;sku&#x6709;&#x4E00;&#x628A;&#x9501;&#x3002;<br>String locKey =&quot;lock:&quot;+skuId; //&#x9501;&#x4F4F;&#x7684;&#x662F;&#x6BCF;&#x4E2A;&#x5546;&#x54C1;&#x7684;&#x6570;&#x636E;<br>Boolean lock = redisTemplate.opsForValue().setIfAbsent(locKey, uuid,3,TimeUnit.SECONDS);<br></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><img src="https://uploader.shimo.im/f/NHt1trbPbh32DzCI.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></td>
</tr>
</tbody>
</table>
<p>&#x603B;&#x7ED3;</p>
<p>1&#x3001;&#x52A0;&#x9501;</p>
<table>
<thead>
<tr>
<th style="text-align:left">// 1.&#x4ECE;redis&#x4E2D;&#x83B7;&#x53D6;&#x9501;,set k1 v1 px 20000 nx<br>String uuid = UUID.randomUUID().toString();<br>Boolean lock = this.redisTemplate.opsForValue()<br>.setIfAbsent(&quot;lock&quot;, uuid, 2, TimeUnit.SECONDS);</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x4F7F;&#x7528;lua&#x91CA;&#x653E;&#x9501;</p>
<table>
<thead>
<tr>
<th style="text-align:left">// 2.&#x91CA;&#x653E;&#x9501;del<br>String script = &quot;if redis.call(&apos;get&apos;, KEYS[1]) == ARGV[1] then return redis.call(&apos;del&apos;, KEYS[1]) else return 0 end&quot;;<br>//&#x8BBE;&#x7F6E;lua&#x811A;&#x672C;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;<br>DefaultRedisScript<long> redisScript = new DefaultRedisScript&lt;&gt;();<br>//&#x8BBE;&#x7F6E;lua&#x811A;&#x672C;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x4E3A;Long<br>redisScript.setResultType(Long.class);<br>redisScript.setScriptText(script);<br>redisTemplate.execute(redisScript, Arrays.asList(&quot;lock&quot;),uuid);</long></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x91CD;&#x8BD5;</p>
<table>
<thead>
<tr>
<th style="text-align:left">Thread.sleep(500);<br>testLock();</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>&#x4E3A;&#x4E86;&#x786E;&#x4FDD;&#x5206;&#x5E03;&#x5F0F;&#x9501;&#x53EF;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x81F3;&#x5C11;&#x8981;&#x786E;&#x4FDD;&#x9501;&#x7684;&#x5B9E;&#x73B0;&#x540C;&#x65F6;&#x6EE1;&#x8DB3;&#x4EE5;&#x4E0B;&#x56DB;&#x4E2A;&#x6761;&#x4EF6;&#xFF1A;</p>
<ul>
<li><p>&#x4E92;&#x65A5;&#x6027;&#x3002;&#x5728;&#x4EFB;&#x610F;&#x65F6;&#x523B;&#xFF0C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x80FD;&#x6301;&#x6709;&#x9501;&#x3002;</p>
</li>
<li><p>&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x6B7B;&#x9501;&#x3002;&#x5373;&#x4F7F;&#x6709;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x5728;&#x6301;&#x6709;&#x9501;&#x7684;&#x671F;&#x95F4;&#x5D29;&#x6E83;&#x800C;&#x6CA1;&#x6709;&#x4E3B;&#x52A8;&#x89E3;&#x9501;&#xFF0C;&#x4E5F;&#x80FD;&#x4FDD;&#x8BC1;&#x540E;&#x7EED;&#x5176;&#x4ED6;&#x5BA2;&#x6237;&#x7AEF;&#x80FD;&#x52A0;&#x9501;&#x3002;</p>
</li>
<li><p>&#x89E3;&#x94C3;&#x8FD8;&#x987B;&#x7CFB;&#x94C3;&#x4EBA;&#x3002;&#x52A0;&#x9501;&#x548C;&#x89E3;&#x9501;&#x5FC5;&#x987B;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x81EA;&#x5DF1;&#x4E0D;&#x80FD;&#x628A;&#x522B;&#x4EBA;&#x52A0;&#x7684;&#x9501;&#x7ED9;&#x89E3;&#x4E86;&#x3002;</p>
</li>
<li><p>&#x52A0;&#x9501;&#x548C;&#x89E3;&#x9501;&#x5FC5;&#x987B;&#x5177;&#x6709;&#x539F;&#x5B50;&#x6027;&#x3002;</p>
</li>
</ul>
<h1 id="17redis60&#x65B0;&#x529F;&#x80FD;">17.Redis6.0&#x65B0;&#x529F;&#x80FD;</h1>
<h2 id="171acl">17.1ACL</h2>
<p>&#x7B80;&#x4ECB;</p>
<p>Redis ACL&#x662F;Access Control List&#xFF08;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x5217;&#x8868;&#xFF09;&#x7684;&#x7F29;&#x5199;&#xFF0C;&#x8BE5;&#x529F;&#x80FD;&#x5141;&#x8BB8;&#x6839;&#x636E;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;&#x548C;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7684;&#x952E;&#x6765;&#x9650;&#x5236;&#x67D0;&#x4E9B;&#x8FDE;&#x63A5;&#x3002;</p>
<p>&#x5728;Redis 5&#x7248;&#x672C;&#x4E4B;&#x524D;&#xFF0C;Redis &#x5B89;&#x5168;&#x89C4;&#x5219;&#x53EA;&#x6709;&#x5BC6;&#x7801;&#x63A7;&#x5236; &#x8FD8;&#x6709;&#x901A;&#x8FC7;rename &#x6765;&#x8C03;&#x6574;&#x9AD8;&#x5371;&#x547D;&#x4EE4;&#x6BD4;&#x5982; flushdb &#xFF0C; KEYS* &#xFF0C; shutdown &#x7B49;&#x3002;Redis 6 &#x5219;&#x63D0;&#x4F9B;ACL&#x7684;&#x529F;&#x80FD;&#x5BF9;&#x7528;&#x6237;&#x8FDB;&#x884C;&#x66F4;&#x7EC6;&#x7C92;&#x5EA6;&#x7684;&#x6743;&#x9650;&#x63A7;&#x5236; &#xFF1A;</p>
<p>&#xFF08;1&#xFF09;&#x63A5;&#x5165;&#x6743;&#x9650;:&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;</p>
<p>&#xFF08;2&#xFF09;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x7684;&#x547D;&#x4EE4;</p>
<p>&#xFF08;3&#xFF09;&#x53EF;&#x4EE5;&#x64CD;&#x4F5C;&#x7684; KEY</p>
<p>&#x53C2;&#x8003;&#x5B98;&#x7F51;&#xFF1A;<a href="https://redis.io/topics/acl" target="_blank">https://redis.io/topics/acl</a></p>
<p>&#x547D;&#x4EE4;</p>
<p>1&#x3001;&#x4F7F;&#x7528;acl list&#x547D;&#x4EE4;&#x5C55;&#x73B0;&#x7528;&#x6237;&#x6743;&#x9650;&#x5217;&#x8868;</p>
<p>&#xFF08;1&#xFF09;&#x6570;&#x636E;&#x8BF4;&#x660E;</p>
<p><img src="https://uploader.shimo.im/f/00QQS1qALG79l8So.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>2&#x3001;&#x4F7F;&#x7528;acl cat&#x547D;&#x4EE4;</p>
<p>&#xFF08;1&#xFF09;&#x67E5;&#x770B;&#x6DFB;&#x52A0;&#x6743;&#x9650;&#x6307;&#x4EE4;&#x7C7B;&#x522B;</p>
<p><img src="https://uploader.shimo.im/f/hNynKqtrmtUtkHMQ.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#xFF08;2&#xFF09;&#x52A0;&#x53C2;&#x6570;&#x7C7B;&#x578B;&#x540D;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x7C7B;&#x578B;&#x4E0B;&#x5177;&#x4F53;&#x547D;&#x4EE4;</p>
<p><img src="https://uploader.shimo.im/f/r6ClyQMfUqWiPtfW.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>3&#x3001;&#x4F7F;&#x7528;acl whoami&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x5F53;&#x524D;&#x7528;&#x6237;</p>
<p><img src="https://uploader.shimo.im/f/Jy984sgUV9YfDfV0.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>4&#x3001;&#x4F7F;&#x7528;aclsetuser&#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x548C;&#x7F16;&#x8F91;&#x7528;&#x6237;ACL</p>
<p>&#xFF08;1&#xFF09;ACL&#x89C4;&#x5219;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x6709;&#x6548;ACL&#x89C4;&#x5219;&#x7684;&#x5217;&#x8868;&#x3002;&#x67D0;&#x4E9B;&#x89C4;&#x5219;&#x53EA;&#x662F;&#x7528;&#x4E8E;&#x6FC0;&#x6D3B;&#x6216;&#x5220;&#x9664;&#x6807;&#x5FD7;&#xFF0C;&#x6216;&#x5BF9;&#x7528;&#x6237;ACL&#x6267;&#x884C;&#x7ED9;&#x5B9A;&#x66F4;&#x6539;&#x7684;&#x5355;&#x4E2A;&#x5355;&#x8BCD;&#x3002;&#x5176;&#x4ED6;&#x89C4;&#x5219;&#x662F;&#x5B57;&#x7B26;&#x524D;&#x7F00;&#xFF0C;&#x5B83;&#x4EEC;&#x4E0E;&#x547D;&#x4EE4;&#x6216;&#x7C7B;&#x522B;&#x540D;&#x79F0;&#x3001;&#x952E;&#x6A21;&#x5F0F;&#x7B49;&#x8FDE;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#x3002;</p>
<table>
<thead>
<tr>
<th style="text-align:left">ACL&#x89C4;&#x5219;</th>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">&#x7C7B;&#x578B;</td>
<td style="text-align:left">&#x53C2;&#x6570;</td>
<td style="text-align:left">&#x8BF4;&#x660E;</td>
</tr>
<tr>
<td style="text-align:left">&#x542F;&#x52A8;&#x548C;&#x7981;&#x7528;&#x7528;&#x6237;</td>
<td style="text-align:left">on</td>
<td style="text-align:left">&#x6FC0;&#x6D3B;&#x67D0;&#x7528;&#x6237;&#x8D26;&#x53F7;</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">off</td>
<td style="text-align:left">&#x7981;&#x7528;&#x67D0;&#x7528;&#x6237;&#x8D26;&#x53F7;&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x5DF2;&#x9A8C;&#x8BC1;&#x7684;&#x8FDE;&#x63A5;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x5DE5;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x9ED8;&#x8BA4;&#x7528;&#x6237;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;off&#xFF0C;&#x5219;&#x65B0;&#x8FDE;&#x63A5;&#x5C06;&#x5728;&#x672A;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x542F;&#x52A8;&#xFF0C;&#x5E76;&#x8981;&#x6C42;&#x7528;&#x6237;&#x4F7F;&#x7528;AUTH&#x9009;&#x9879;&#x53D1;&#x9001;AUTH&#x6216;HELLO&#xFF0C;&#x4EE5;&#x4FBF;&#x4EE5;&#x67D0;&#x79CD;&#x65B9;&#x5F0F;&#x8FDB;&#x884C;&#x8EAB;&#x4EFD;&#x9A8C;&#x8BC1;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left">&#x6743;&#x9650;&#x7684;&#x6DFB;&#x52A0;&#x5220;&#x9664;</td>
<td style="text-align:left">+<command></td>
<td style="text-align:left">&#x5C06;&#x6307;&#x4EE4;&#x6DFB;&#x52A0;&#x5230;&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x7684;&#x6307;&#x4EE4;&#x5217;&#x8868;&#x4E2D;</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">-<command></td>
<td style="text-align:left">&#x4ECE;&#x7528;&#x6237;&#x53EF;&#x6267;&#x884C;&#x6307;&#x4EE4;&#x5217;&#x8868;&#x79FB;&#x9664;&#x6307;&#x4EE4;</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">+@<category></category></td>
<td style="text-align:left">&#x6DFB;&#x52A0;&#x8BE5;&#x7C7B;&#x522B;&#x4E2D;&#x7528;&#x6237;&#x8981;&#x8C03;&#x7528;&#x7684;&#x6240;&#x6709;&#x6307;&#x4EE4;&#xFF0C;&#x6709;&#x6548;&#x7C7B;&#x522B;&#x4E3A;@admin&#x3001;@set&#x3001;@sortedset&#x2026;&#x7B49;&#xFF0C;&#x901A;&#x8FC7;&#x8C03;&#x7528;ACL CAT&#x547D;&#x4EE4;&#x67E5;&#x770B;&#x5B8C;&#x6574;&#x5217;&#x8868;&#x3002;&#x7279;&#x6B8A;&#x7C7B;&#x522B;@all&#x8868;&#x793A;&#x6240;&#x6709;&#x547D;&#x4EE4;&#xFF0C;&#x5305;&#x62EC;&#x5F53;&#x524D;&#x5B58;&#x5728;&#x4E8E;&#x670D;&#x52A1;&#x5668;&#x4E2D;&#x7684;&#x547D;&#x4EE4;&#xFF0C;&#x4EE5;&#x53CA;&#x5C06;&#x6765;&#x5C06;&#x901A;&#x8FC7;&#x6A21;&#x5757;&#x52A0;&#x8F7D;&#x7684;&#x547D;&#x4EE4;&#x3002;</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">-@<actegory></actegory></td>
<td style="text-align:left">&#x4ECE;&#x7528;&#x6237;&#x53EF;&#x8C03;&#x7528;&#x6307;&#x4EE4;&#x4E2D;&#x79FB;&#x9664;&#x7C7B;&#x522B;</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">allcommands</td>
<td style="text-align:left">+@all&#x7684;&#x522B;&#x540D;</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">nocommand</td>
<td style="text-align:left">-@all&#x7684;&#x522B;&#x540D;</td>
</tr>
<tr>
<td style="text-align:left">&#x53EF;&#x64CD;&#x4F5C;&#x952E;&#x7684;&#x6DFB;&#x52A0;&#x6216;&#x5220;&#x9664;</td>
<td style="text-align:left">~<pattern></pattern></td>
<td style="text-align:left">&#x6DFB;&#x52A0;&#x53EF;&#x4F5C;&#x4E3A;&#x7528;&#x6237;&#x53EF;&#x64CD;&#x4F5C;&#x7684;&#x952E;&#x7684;&#x6A21;&#x5F0F;&#x3002;&#x4F8B;&#x5982;~*&#x5141;&#x8BB8;&#x6240;&#x6709;&#x7684;&#x952E;</td>
</tr>
</tbody>
</table>
<p>&#xFF08;2&#xFF09;&#x901A;&#x8FC7;&#x547D;&#x4EE4;&#x521B;&#x5EFA;&#x65B0;&#x7528;&#x6237;&#x9ED8;&#x8BA4;&#x6743;&#x9650;</p>
<p>acl setuser user1</p>
<p><img src="https://uploader.shimo.im/f/hL8XFpYjwzlbfQOs.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x5728;&#x4E0A;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x6839;&#x672C;&#x6CA1;&#x6709;&#x6307;&#x5B9A;&#x4EFB;&#x4F55;&#x89C4;&#x5219;&#x3002;&#x5982;&#x679C;&#x7528;&#x6237;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x8FD9;&#x5C06;&#x4F7F;&#x7528;just created&#x7684;&#x9ED8;&#x8BA4;&#x5C5E;&#x6027;&#x6765;&#x521B;&#x5EFA;&#x7528;&#x6237;&#x3002;&#x5982;&#x679C;&#x7528;&#x6237;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x4E0A;&#x9762;&#x7684;&#x547D;&#x4EE4;&#x5C06;&#x4E0D;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#xFF08;3&#xFF09;&#x8BBE;&#x7F6E;&#x6709;&#x7528;&#x6237;&#x540D;&#x3001;&#x5BC6;&#x7801;&#x3001;ACL&#x6743;&#x9650;&#x3001;&#x5E76;&#x542F;&#x7528;&#x7684;&#x7528;&#x6237;</p>
<p>acl setuser user2 on &gt;password ~cached:* +get</p>
<p><img src="https://uploader.shimo.im/f/YYqII6LkwwCh0wz7.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>(4)&#x5207;&#x6362;&#x7528;&#x6237;&#xFF0C;&#x9A8C;&#x8BC1;&#x6743;&#x9650;</p>
<p><img src="https://uploader.shimo.im/f/W631IQ1JBKiXceLr.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<h2 id="172io&#x591A;&#x7EBF;&#x7A0B;">17.2IO&#x591A;&#x7EBF;&#x7A0B;</h2>
<p>&#x7B80;&#x4ECB;</p>
<p>Redis6&#x7EC8;&#x4E8E;&#x652F;&#x6491;&#x591A;&#x7EBF;&#x7A0B;&#x4E86;&#xFF0C;&#x544A;&#x522B;&#x5355;&#x7EBF;&#x7A0B;&#x4E86;&#x5417;&#xFF1F;</p>
<p>IO&#x591A;&#x7EBF;&#x7A0B;&#x5176;&#x5B9E;&#x6307;&#x5BA2;&#x6237;&#x7AEF;&#x4EA4;&#x4E92;&#x90E8;&#x5206;&#x7684;&#x7F51;&#x7EDC;IO&#x4EA4;&#x4E92;&#x5904;&#x7406;&#x6A21;&#x5757;&#x591A;&#x7EBF;&#x7A0B;&#xFF0C;&#x800C;&#x975E;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x591A;&#x7EBF;&#x7A0B;&#x3002;Redis6&#x6267;&#x884C;&#x547D;&#x4EE4;&#x4F9D;&#x7136;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x3002;</p>
<p>&#x539F;&#x7406;&#x67B6;&#x6784;</p>
<p>Redis 6 &#x52A0;&#x5165;&#x591A;&#x7EBF;&#x7A0B;,&#x4F46;&#x8DDF; Memcached &#x8FD9;&#x79CD;&#x4ECE; IO&#x5904;&#x7406;&#x5230;&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x5B9E;&#x73B0;&#x6A21;&#x5F0F;&#x6709;&#x4E9B;&#x5DEE;&#x5F02;&#x3002;Redis &#x7684;&#x591A;&#x7EBF;&#x7A0B;&#x90E8;&#x5206;&#x53EA;&#x662F;&#x7528;&#x6765;&#x5904;&#x7406;&#x7F51;&#x7EDC;&#x6570;&#x636E;&#x7684;&#x8BFB;&#x5199;&#x548C;&#x534F;&#x8BAE;&#x89E3;&#x6790;&#xFF0C;&#x6267;&#x884C;&#x547D;&#x4EE4;&#x4ECD;&#x7136;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x3002;&#x4E4B;&#x6240;&#x4EE5;&#x8FD9;&#x4E48;&#x8BBE;&#x8BA1;&#x662F;&#x4E0D;&#x60F3;&#x56E0;&#x4E3A;&#x591A;&#x7EBF;&#x7A0B;&#x800C;&#x53D8;&#x5F97;&#x590D;&#x6742;&#xFF0C;&#x9700;&#x8981;&#x53BB;&#x63A7;&#x5236; key&#x3001;lua&#x3001;&#x4E8B;&#x52A1;&#xFF0C;LPUSH/LPOP &#x7B49;&#x7B49;&#x7684;&#x5E76;&#x53D1;&#x95EE;&#x9898;&#x3002;&#x6574;&#x4F53;&#x7684;&#x8BBE;&#x8BA1;&#x5927;&#x4F53;&#x5982;&#x4E0B;:</p>
<p><img src="https://uploader.shimo.im/f/5Hbd0uNkaAMwC6W7.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x591A;&#x7EBF;&#x7A0B;IO&#x9ED8;&#x8BA4;&#x4E5F;&#x662F;&#x4E0D;&#x5F00;&#x542F;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x518D;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x914D;&#x7F6E;</p>
<p>io-threads-do-reads  yes</p>
<p>io-threads 4</p>
<p>&#x5DE5;&#x5177;&#x652F;&#x6301; Cluster</p>
<p>&#x4E4B;&#x524D;&#x8001;&#x7248;Redis&#x60F3;&#x8981;&#x642D;&#x96C6;&#x7FA4;&#x9700;&#x8981;&#x5355;&#x72EC;&#x5B89;&#x88C5;ruby&#x73AF;&#x5883;&#xFF0C;Redis 5 &#x5C06; redis-trib.rb &#x7684;&#x529F;&#x80FD;&#x96C6;&#x6210;&#x5230; redis-cli &#x3002;&#x53E6;&#x5916;&#x5B98;&#x65B9; redis-benchmark &#x5DE5;&#x5177;&#x5F00;&#x59CB;&#x652F;&#x6301; cluster &#x6A21;&#x5F0F;&#x4E86;&#xFF0C;&#x901A;&#x8FC7;&#x591A;&#x7EBF;&#x7A0B;&#x7684;&#x65B9;&#x5F0F;&#x5BF9;&#x591A;&#x4E2A;&#x5206;&#x7247;&#x8FDB;&#x884C;&#x538B;&#x6D4B;&#x3002;</p>
<p><img src="https://uploader.shimo.im/f/hAZIdX2JJIoQhyS6.png!thumbnail?fileGuid=yBtmdjz5Ja42cjcb" alt="&#x56FE;&#x7247;"></p>
<p>Redis&#x65B0;&#x529F;&#x80FD;&#x6301;&#x7EED;&#x5173;&#x6CE8;</p>
<p>Redis6&#x65B0;&#x529F;&#x80FD;&#x8FD8;&#x6709;&#xFF1A;</p>
<p>1&#x3001;RESP3&#x65B0;&#x7684; Redis &#x901A;&#x4FE1;&#x534F;&#x8BAE;&#xFF1A;&#x4F18;&#x5316;&#x670D;&#x52A1;&#x7AEF;&#x4E0E;&#x5BA2;&#x6237;&#x7AEF;&#x4E4B;&#x95F4;&#x901A;&#x4FE1;</p>
<p>2&#x3001;Client side caching&#x5BA2;&#x6237;&#x7AEF;&#x7F13;&#x5B58;&#xFF1A;&#x57FA;&#x4E8E; RESP3 &#x534F;&#x8BAE;&#x5B9E;&#x73B0;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7F13;&#x5B58;&#x529F;&#x80FD;&#x3002;&#x4E3A;&#x4E86;&#x8FDB;&#x4E00;&#x6B65;&#x63D0;&#x5347;&#x7F13;&#x5B58;&#x7684;&#x6027;&#x80FD;&#xFF0C;&#x5C06;&#x5BA2;&#x6237;&#x7AEF;&#x7ECF;&#x5E38;&#x8BBF;&#x95EE;&#x7684;&#x6570;&#x636E;cache&#x5230;&#x5BA2;&#x6237;&#x7AEF;&#x3002;&#x51CF;&#x5C11;TCP&#x7F51;&#x7EDC;&#x4EA4;&#x4E92;&#x3002;</p>
<p>3&#x3001;Proxy&#x96C6;&#x7FA4;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#xFF1A;Proxy &#x529F;&#x80FD;&#xFF0C;&#x8BA9; Cluster &#x62E5;&#x6709;&#x50CF;&#x5355;&#x5B9E;&#x4F8B;&#x4E00;&#x6837;&#x7684;&#x63A5;&#x5165;&#x65B9;&#x5F0F;&#xFF0C;&#x964D;&#x4F4E;&#x5927;&#x5BB6;&#x4F7F;&#x7528;cluster&#x7684;&#x95E8;&#x69DB;&#x3002;&#x4E0D;&#x8FC7;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x4EE3;&#x7406;&#x4E0D;&#x6539;&#x53D8; Cluster &#x7684;&#x529F;&#x80FD;&#x9650;&#x5236;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x7684;&#x547D;&#x4EE4;&#x8FD8;&#x662F;&#x4E0D;&#x4F1A;&#x652F;&#x6301;&#xFF0C;&#x6BD4;&#x5982;&#x8DE8; slot &#x7684;&#x591A;Key&#x64CD;&#x4F5C;&#x3002;</p>
<p>4&#x3001;Modules API</p>
<p>Redis 6&#x4E2D;&#x6A21;&#x5757;API&#x5F00;&#x53D1;&#x8FDB;&#x5C55;&#x975E;&#x5E38;&#x5927;&#xFF0C;&#x56E0;&#x4E3A;Redis Labs&#x4E3A;&#x4E86;&#x5F00;&#x53D1;&#x590D;&#x6742;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4ECE;&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x7528;&#x4E0A;Redis&#x6A21;&#x5757;&#x3002;Redis&#x53EF;&#x4EE5;&#x53D8;&#x6210;&#x4E00;&#x4E2A;&#x6846;&#x67B6;&#xFF0C;&#x5229;&#x7528;Modules&#x6765;&#x6784;&#x5EFA;&#x4E0D;&#x540C;&#x7CFB;&#x7EDF;&#xFF0C;&#x800C;&#x4E0D;&#x9700;&#x8981;&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x5199;&#x7136;&#x540E;&#x8FD8;&#x8981;BSD&#x8BB8;&#x53EF;&#x3002;Redis&#x4E00;&#x5F00;&#x59CB;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5411;&#x7F16;&#x5199;&#x5404;&#x79CD;&#x7CFB;&#x7EDF;&#x5F00;&#x653E;&#x7684;&#x5E73;&#x53F0;&#x3002;</p>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; ohter.com 2021 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x8BE5;&#x6587;&#x4EF6;&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;&#xFF1A;
2021-04-20 11:38:37
</span></footer>
<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="源码分析.html" class="navigation navigation-prev " aria-label="Previous page: 4.源码分析">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../shardingsphere/" class="navigation navigation-next " aria-label="Next page: shardingsphere中间件">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"5.Redis6.0","level":"1.6.8.5","depth":3,"next":{"title":"shardingsphere中间件","level":"1.6.9","depth":2,"path":"distributed/shardingsphere/README.md","ref":"distributed/shardingsphere/README.md","articles":[{"title":"1.概述","level":"1.6.9.1","depth":3,"path":"distributed/shardingsphere/概述.md","ref":"distributed/shardingsphere/概述.md","articles":[]},{"title":"2.核心概念","level":"1.6.9.2","depth":3,"path":"distributed/shardingsphere/核心概念.md","ref":"distributed/shardingsphere/核心概念.md","articles":[]}]},"previous":{"title":"4.源码分析","level":"1.6.8.4","depth":3,"path":"distributed/redis/源码分析.md","ref":"distributed/redis/源码分析.md","articles":[]},"dir":"ltr"},"config":{"plugins":["chapter-fold","theme-comscore","back-to-top-button","code","tbfed-pagefooter","page-treeview","pageview-count","popup","prism","-highlight","hide-element","-lunr","-search","search-pro","page-toc-button"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy ohter.com 2021","modify_label":"该文件修订时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"page-treeview":{"collapsed":false,"copyright":"Copyright © aleen42","minHeaderCount":"1","minHeaderDeep":"1"},"chapter-fold":{},"prism":{"css":["prismjs/themes/prism-okaidia.css"]},"search-pro":{},"popup":{},"code":{"copyButtons":true},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-comscore":{},"page-toc-button":{"maxTocDepth":2,"minTocSize":2},"back-to-top-button":{},"pageview-count":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"liufeihua","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"日常笔记","language":"zh-hans","gitbook":"*","description":"日常笔记"},"file":{"path":"distributed/redis/redis6.md","mtime":"2021-04-20T03:38:37.403Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-07-21T09:12:42.347Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

